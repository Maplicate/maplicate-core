"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var events=_interopDefault(require("events")),buffer=_interopDefault(require("buffer")),util=_interopDefault(require("util")),path=_interopDefault(require("path")),commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var eventemitter3=createCommonjsModule(function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new n(i,s||e,a),d=r?r+t:t;return e._events[d]?e._events[d].fn?e._events[d]=[e._events[d],o]:e._events[d].push(o):(e._events[d]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,a=new Array(s);n<s;n++)a[n]=i[n].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,n,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var d,f,c=this._events[o],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,n),!0;case 5:return c.fn.call(c.context,t,i,n,s),!0;case 6:return c.fn.call(c.context,t,i,n,s,a),!0}for(f=1,d=new Array(h-1);f<h;f++)d[f-1]=arguments[f];c.fn.apply(c.context,d)}else{var u,l=c.length;for(f=0;f<l;f++)switch(c[f].once&&this.removeListener(e,c[f].fn,void 0,!0),h){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,t);break;case 3:c[f].fn.call(c[f].context,t,i);break;case 4:c[f].fn.call(c[f].context,t,i,n);break;default:if(!d)for(u=1,d=new Array(h-1);u<h;u++)d[u-1]=arguments[u];c[f].fn.apply(c[f].context,d)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,i,n){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||a(this,s);else{for(var d=0,f=[],c=o.length;d<c;d++)(o[d].fn!==t||n&&!o[d].once||i&&o[d].context!==i)&&f.push(o[d]);f.length?this._events[s]=1===f.length?f[0]:f:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}),processNextickArgs=createCommonjsModule(function(e){!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var n,s,a=arguments.length;switch(a){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,i)});default:for(n=new Array(a-1),s=0;s<n.length;)n[s++]=arguments[s];return process.nextTick(function(){e.apply(null,n)})}}}:e.exports=process}),processNextickArgs_1=processNextickArgs.nextTick,toString={}.toString,isarray=Array.isArray||function(e){return"[object Array]"==toString.call(e)},streamBrowser=events.EventEmitter,safeBuffer=createCommonjsModule(function(e,t){var r=buffer.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function n(e,t,i){return r(e,t,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=buffer:(i(buffer,t),t.Buffer=n),i(r,n),n.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,i)},n.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=r(e);return void 0!==t?"string"==typeof i?n.fill(t,i):n.fill(t):n.fill(0),n},n.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},n.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(e)}}),safeBuffer_1=safeBuffer.Buffer;function isArray(e){return Array.isArray?Array.isArray(e):"[object Array]"===objectToString(e)}var isArray_1=isArray;function isBoolean(e){return"boolean"==typeof e}var isBoolean_1=isBoolean;function isNull(e){return null===e}var isNull_1=isNull;function isNullOrUndefined(e){return null==e}var isNullOrUndefined_1=isNullOrUndefined;function isNumber(e){return"number"==typeof e}var isNumber_1=isNumber;function isString(e){return"string"==typeof e}var isString_1=isString;function isSymbol(e){return"symbol"==typeof e}var isSymbol_1=isSymbol;function isUndefined(e){return void 0===e}var isUndefined_1=isUndefined;function isRegExp(e){return"[object RegExp]"===objectToString(e)}var isRegExp_1=isRegExp;function isObject(e){return"object"==typeof e&&null!==e}var isObject_1=isObject;function isDate(e){return"[object Date]"===objectToString(e)}var isDate_1=isDate;function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error}var isError_1=isError;function isFunction(e){return"function"==typeof e}var isFunction_1=isFunction;function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}var isPrimitive_1=isPrimitive,isBuffer=Buffer.isBuffer;function objectToString(e){return Object.prototype.toString.call(e)}var util$1={isArray:isArray_1,isBoolean:isBoolean_1,isNull:isNull_1,isNullOrUndefined:isNullOrUndefined_1,isNumber:isNumber_1,isString:isString_1,isSymbol:isSymbol_1,isUndefined:isUndefined_1,isRegExp:isRegExp_1,isObject:isObject_1,isDate:isDate_1,isError:isError_1,isFunction:isFunction_1,isPrimitive:isPrimitive_1,isBuffer:isBuffer},inherits_browser=createCommonjsModule(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),empty={},empty$1=Object.freeze({default:empty}),require$$0=empty$1&&empty||empty$1,BufferList=createCommonjsModule(function(e){var t=safeBuffer.Buffer;e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return t.alloc(0);if(1===this.length)return this.head.data;for(var r,i,n,s=t.allocUnsafe(e>>>0),a=this.head,o=0;a;)r=a.data,i=s,n=o,r.copy(i,n),o+=a.data.length,a=a.next;return s},e}(),require$$0&&require$$0.inspect&&require$$0.inspect.custom&&(e.exports.prototype[require$$0.inspect.custom]=function(){var e=require$$0.inspect({length:this.length});return this.constructor.name+" "+e})});function destroy(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||processNextickArgs.nextTick(emitErrorNT,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(processNextickArgs.nextTick(emitErrorNT,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}),this)}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(e,t){e.emit("error",t)}var destroy_1={destroy:destroy,undestroy:undestroy},browser=deprecate;function deprecate(e,t){if(config("noDeprecation"))return e;var r=!1;return function(){if(!r){if(config("throwDeprecation"))throw new Error(t);config("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}function config(e){try{if(!commonjsGlobal.localStorage)return!1}catch(e){return!1}var t=commonjsGlobal.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}var _stream_writable=Writable;function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(t,e)}}var Duplex,asyncWrite=processNextickArgs.nextTick;Writable.WritableState=WritableState,util$1.inherits=inherits_browser;var realHasInstance,internalUtil={deprecate:browser},Buffer$1=safeBuffer.Buffer,OurUint8Array=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer$1.from(e)}function _isUint8Array(e){return Buffer$1.isBuffer(e)||e instanceof OurUint8Array}function nop(){}function WritableState(e,t){e=e||{};var r=t instanceof(Duplex=Duplex||_stream_duplex);this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(n||0===n)?n:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){if(Duplex=Duplex||_stream_duplex,!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),streamBrowser.call(this)}function writeAfterEnd(e,t){var r=new Error("write after end");e.emit("error",r),processNextickArgs.nextTick(t,r)}function validChunk(e,t,r,i){var n=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),processNextickArgs.nextTick(i,s),n=!1),n}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer$1.from(t,r)),t}function writeOrBuffer(e,t,r,i,n,s){if(!r){var a=decodeChunk(t,i,n);i!==a&&(r=!0,n="buffer",i=a)}var o=t.objectMode?1:i.length;t.length+=o;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,o,i,n,s);return d}function doWrite(e,t,r,i,n,s,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,s,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){--t.pendingcb,r?(processNextickArgs.nextTick(n,i),processNextickArgs.nextTick(finishMaybe,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),finishMaybe(e,t))}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var s=needFinish(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),i?asyncWrite(afterWrite,e,r,s,n):afterWrite(e,r,s,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),s=t.corkedRequestsFree;s.entry=r;for(var a=0,o=!0;r;)n[a]=r,r.isBuf||(o=!1),r=r.next,a+=1;n.allBuffers=o,doWrite(e,t,!0,t.length,n,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new CorkedRequest(t),t.bufferedRequestCount=0}else{for(;r;){var d=r.chunk,f=r.encoding,c=r.callback;if(doWrite(e,t,!1,t.objectMode?1:d.length,d,f,c),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),finishMaybe(e,t)})}function prefinish(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,processNextickArgs.nextTick(callFinal,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function finishMaybe(e,t){var r=needFinish(t);return r&&(prefinish(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?processNextickArgs.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}util$1.inherits(Writable,streamBrowser),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!realHasInstance.call(this,e)||this===Writable&&(e&&e._writableState instanceof WritableState)}})):realHasInstance=function(e){return e instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1,s=!i.objectMode&&_isUint8Array(e);return s&&!Buffer$1.isBuffer(e)&&(e=_uint8ArrayToBuffer(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=nop),i.ended?writeAfterEnd(this,r):(s||validChunk(this,i,e,r))&&(i.pendingcb++,n=writeOrBuffer(this,i,s,e,t,r)),n},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||endWritable(this,i,r)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable.prototype.destroy=destroy_1.destroy,Writable.prototype._undestroy=destroy_1.undestroy,Writable.prototype._destroy=function(e,t){this.end(),t(e)};var objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},_stream_duplex=Duplex$1;util$1.inherits=inherits_browser,util$1.inherits(Duplex$1,_stream_readable);for(var keys=objectKeys(_stream_writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex$1.prototype[method]||(Duplex$1.prototype[method]=_stream_writable.prototype[method])}function Duplex$1(e){if(!(this instanceof Duplex$1))return new Duplex$1(e);_stream_readable.call(this,e),_stream_writable.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||processNextickArgs.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex$1.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex$1.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),Duplex$1.prototype._destroy=function(e,t){this.push(null),this.end(),processNextickArgs.nextTick(t,e)};var Buffer$2=safeBuffer.Buffer,isEncoding=Buffer$2.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if("string"!=typeof t&&(Buffer$2.isEncoding===isEncoding||!isEncoding(e)))throw new Error("Unknown encoding: "+e);return t||e}var StringDecoder_1=StringDecoder;function StringDecoder(e){var t;switch(this.encoding=normalizeEncoding(e),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,t=4;break;case"utf8":this.fillLast=utf8FillLast,t=4;break;case"base64":this.text=base64Text,this.end=base64End,t=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$2.allocUnsafe(t)}function utf8CheckByte(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function utf8CheckIncomplete(e,t,r){var i=t.length-1;if(i<r)return 0;var n=utf8CheckByte(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||-2===n?0:(n=utf8CheckByte(t[i]))>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||-2===n?0:(n=utf8CheckByte(t[i]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}function utf8CheckExtraBytes(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function utf8Text(e,t){var r=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function utf8End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function utf16Text(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function base64Text(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function base64End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}StringDecoder.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var Duplex$2,string_decoder={StringDecoder:StringDecoder_1},_stream_readable=Readable;Readable.ReadableState=ReadableState;var EE=events.EventEmitter,EElistenerCount=function(e,t){return e.listeners(t).length},Buffer$3=safeBuffer.Buffer,OurUint8Array$1=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer$1(e){return Buffer$3.from(e)}function _isUint8Array$1(e){return Buffer$3.isBuffer(e)||e instanceof OurUint8Array$1}util$1.inherits=inherits_browser;var StringDecoder$1,debug=void 0;debug=require$$0&&require$$0.debuglog?require$$0.debuglog("stream"):function(){},util$1.inherits(Readable,streamBrowser);var kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?isarray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState(e,t){e=e||{};var r=t instanceof(Duplex$2=Duplex$2||_stream_duplex);this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,n=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(n||0===n)?n:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder$1||(StringDecoder$1=string_decoder.StringDecoder),this.decoder=new StringDecoder$1(e.encoding),this.encoding=e.encoding)}function Readable(e){if(Duplex$2=Duplex$2||_stream_duplex,!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),streamBrowser.call(this)}function readableAddChunk(e,t,r,i,n){var s,a=e._readableState;null===t?(a.reading=!1,onEofChunk(e,a)):(n||(s=chunkInvalid(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===Buffer$3.prototype||(t=_uint8ArrayToBuffer$1(t)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):addChunk(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?addChunk(e,a,t,!1):maybeReadMore(e,a)):addChunk(e,a,t,!1))):i||(a.reading=!1));return needMoreData(a)}function addChunk(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}function chunkInvalid(e,t){var r;return _isUint8Array$1(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=destroy_1.destroy,Readable.prototype._undestroy=destroy_1.undestroy,Readable.prototype._destroy=function(e,t){this.push(null),t(e)},Readable.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=Buffer$3.from(e,t),t=""),r=!0),readableAddChunk(this,e,t,!1,r)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){return StringDecoder$1||(StringDecoder$1=string_decoder.StringDecoder),this._readableState.decoder=new StringDecoder$1(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?processNextickArgs.nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,processNextickArgs.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount(e,"data")&&(t.flowing=!0,flow(e))}}function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,processNextickArgs.nextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=fromListPartial(e,t.buffer,t.decoder),r);var r}function fromListPartial(e,t,r){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?copyFromBufferString(e,t):copyFromBuffer(e,t),i}function copyFromBufferString(e,t){var r=t.head,i=1,n=r.data;for(e-=n.length;r=r.next;){var s=r.data,a=e>s.length?s.length:e;if(a===s.length?n+=s:n+=s.slice(0,e),0===(e-=a)){a===s.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(a));break}++i}return t.length-=i,n}function copyFromBuffer(e,t){var r=Buffer$3.allocUnsafe(e),i=t.head,n=1;for(i.data.copy(r),e-=i.data.length;i=i.next;){var s=i.data,a=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,a),0===(e-=a)){a===s.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=s.slice(a));break}++n}return t.length-=n,r}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,processNextickArgs.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var i,n=t.needReadable;return debug("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&debug("length less than watermark",n=!0),t.ended||t.reading?debug("reading or ended",n=!1):n&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t))),null===(i=e>0?fromList(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==i&&this.emit("data",i),i},Readable.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,debug("pipe count=%d opts=%j",i.pipesCount,t);var n=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:b;function s(t,n){debug("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,debug("cleanup"),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("drain",o),e.removeListener("error",h),e.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",b),r.removeListener("data",c),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||o())}function a(){debug("onend"),e.end()}i.endEmitted?processNextickArgs.nextTick(n):r.once("end",n),e.on("unpipe",s);var o=pipeOnDrain(r);e.on("drain",o);var d=!1;var f=!1;function c(t){debug("ondata"),f=!1,!1!==e.write(t)||f||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==indexOf(i.pipes,e))&&!d&&(debug("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function h(t){debug("onerror",t),b(),e.removeListener("error",h),0===EElistenerCount(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",l),b()}function l(){debug("onfinish"),e.removeListener("close",u),b()}function b(){debug("unpipe"),r.unpipe(e)}return r.on("data",c),prependListener(e,"error",h),e.once("close",u),e.once("finish",l),e.emit("pipe",r),i.flowing||(debug("pipe resume"),r.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,r);return this}var a=indexOf(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Readable.prototype.on=function(e,t){var r=streamBrowser.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&emitReadable(this):processNextickArgs.nextTick(nReadingNextTick,this))}return r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,resume(this,e)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",function(){if(debug("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(n){(debug("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n)||(r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause()))}),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var s=0;s<kProxyEvents.length;s++)e.on(kProxyEvents[s],this.emit.bind(this,kProxyEvents[s]));return this._read=function(t){debug("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList;var _stream_transform=Transform;function afterTransform(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);_stream_duplex.call(this,e),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish$1)}function prefinish$1(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){done(e,t,r)}):done(this,null,null)}function done(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}util$1.inherits=inherits_browser,util$1.inherits(Transform,_stream_duplex),Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,_stream_duplex.prototype.push.call(this,e,t)},Transform.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},Transform.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Transform.prototype._destroy=function(e,t){var r=this;_stream_duplex.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})};var _stream_passthrough=PassThrough;function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);_stream_transform.call(this,e)}util$1.inherits=inherits_browser,util$1.inherits(PassThrough,_stream_transform),PassThrough.prototype._transform=function(e,t,r){r(null,e)};var readableBrowser=createCommonjsModule(function(e,t){(t=e.exports=_stream_readable).Stream=t,t.Readable=t,t.Writable=_stream_writable,t.Duplex=_stream_duplex,t.Transform=_stream_transform,t.PassThrough=_stream_passthrough}),readableBrowser_1=readableBrowser.Stream,readableBrowser_2=readableBrowser.Readable,readableBrowser_3=readableBrowser.Writable,readableBrowser_4=readableBrowser.Duplex,readableBrowser_5=readableBrowser.Transform,readableBrowser_6=readableBrowser.PassThrough,pReduce=(e,t,r)=>new Promise((i,n)=>{const s=e[Symbol.iterator]();let a=0;const o=e=>{const r=s.next();r.done?i(e):Promise.all([e,r.value]).then(e=>{o(t(e[0],e[1],a++))}).catch(n)};o(r)}),pEachSeries=(e,t)=>pReduce(e,(e,r,i)=>t(r,i)).then(()=>e),pMap=(e,t,r)=>new Promise((i,n)=>{if(r=Object.assign({concurrency:1/0},r),"function"!=typeof t)throw new TypeError("Mapper function is required");const s=r.concurrency;if(!("number"==typeof s&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);const a=[],o=e[Symbol.iterator]();let d=!1,f=!1,c=0,h=0;const u=()=>{if(d)return;const e=o.next(),r=h;if(h++,e.done)return f=!0,void(0===c&&i(a));c++,Promise.resolve(e.value).then(e=>t(e,r)).then(e=>{a[r]=e,c--,u()},e=>{d=!0,n(e)})};for(let e=0;e<s&&(u(),!f);e++);});class GSet{constuctor(e){}append(e){}merge(e){}get(e){}has(e){}get values(){}get length(){}}var gSet=GSet;class LamportClock{constructor(e,t){this.id=e,this.time=t||0}tick(){return new LamportClock(this.id,++this.time)}merge(e){return this.time=Math.max(this.time,e.time),new LamportClock(this.id,this.time)}clone(){return new LamportClock(this.id,this.time)}static compare(e,t){var r=e.time-t.time;return 0===r&&e.id!==t.id?e.id<t.id?-1:1:r}}var lamportClock=LamportClock;const isDefined=e=>null!=e;var isDefined_1=isDefined;const IpfsNotDefinedError=()=>new Error("Ipfs instance not defined");class Entry{static async create(e,t,r,i,n=[],s,a){if(!isDefined_1(e))throw IpfsNotDefinedError();if(!isDefined_1(r))throw new Error("Entry requires an id");if(!isDefined_1(i))throw new Error("Entry requires data");if(!isDefined_1(n)||!Array.isArray(n))throw new Error("'next' argument is not an array");let o=n.filter(isDefined_1).map(e=>e.hash?e.hash:e);const d=s?s.id:a?a.getPublic("hex"):r,f=s?s.time:null;let c={hash:null,id:r,payload:i,next:o,v:0,clock:new lamportClock(d,f)};return t&&a&&(c=await Entry.signEntry(t,c,a)),c.hash=await Entry.toMultihash(e,c),c}static async signEntry(e,t,r){const i=await e.sign(r,Buffer.from(JSON.stringify(t)));return t.sig=i,t.key=r.getPublic("hex"),t}static async verifyEntry(e,t){const r=Object.assign({},{hash:null,id:e.id,payload:e.payload,next:e.next,v:e.v,clock:e.clock}),i=await t.importPublicKey(e.key);await t.verify(e.sig,i,Buffer.from(JSON.stringify(r)))}static toMultihash(e,t){if(!e)throw IpfsNotDefinedError();const r=Buffer.from(JSON.stringify(t));return e.object.put(r).then(e=>e.toJSON().multihash)}static fromMultihash(e,t){if(!e)throw IpfsNotDefinedError();if(!t)throw new Error(`Invalid hash: ${t}`);return e.object.get(t,{enc:"base58"}).then(e=>JSON.parse(e.toJSON().data)).then(e=>{let r={hash:t,id:e.id,payload:e.payload,next:e.next,v:e.v,clock:e.clock};return e.sig&&Object.assign(r,{sig:e.sig}),e.key&&Object.assign(r,{key:e.key}),r})}static isEntry(e){return void 0!==e.id&&void 0!==e.next&&void 0!==e.hash&&void 0!==e.payload&&void 0!==e.v&&void 0!==e.clock}static compare(e,t){var r=lamportClock.compare(e.clock,t.clock);return 0===r?e.clock.id<t.clock.id?-1:1:r}static isEqual(e,t){return e.hash===t.hash}static isParent(e,t){return t.next.indexOf(e.hash)>-1}static findChildren(e,t){for(var r=[],i=t.find(t=>Entry.isParent(e,t)),n=e;i;)r.push(i),n=i,i=t.find(e=>Entry.isParent(n,e));return r=r.sort((e,t)=>e.clock.time>e.clock.time)}}var entry=Entry;const wrap=e=>new Promise(t=>{t(e())});var pWhilst=(e,t)=>wrap(function r(){if(e())return wrap(t).then(r)});class EntryIO{static fetchParallel(e,t,r,i=[],n,s,a){const o=(e,t)=>e.concat(t);return pMap(t,t=>EntryIO.fetchAll(e,t,r,i,s,a),{concurrency:Math.max(n||t.length,1)}).then(e=>e.reduce(o,[]))}static fetchAll(e,t,r,i=[],n=null,s){let a=[],o={},d=Array.isArray(t)?t.slice():[t];const f=e=>d.push(e);i.forEach(e=>o[e.hash]=e);return pWhilst(()=>d.length>0&&(a.length<r||r<0),()=>{const t=d.shift();return o[t]?Promise.resolve():new Promise((r,i)=>{const d=n?setTimeout(()=>{console.warn(`Warning: Couldn't fetch entry '${t}', request timed out (${n}ms)`),r()},n):null;entry.fromMultihash(e,t).then(e=>{clearTimeout(d),entry.isEntry(e)&&(e.next.forEach(f),a.push(e),o[t]=e,s&&s(t,e,a.length))}).then(r).catch(e=>{r()})})}).then(()=>a)}}var entryIo=EntryIO;const ImmutableDBNotDefinedError=()=>new Error("ImmutableDB instance not defined"),LogNotDefinedError=()=>new Error("Log instance not defined"),NotALogError=()=>new Error("Given argument is not an instance of Log");var logErrors={ImmutableDBNotDefinedError:ImmutableDBNotDefinedError,LogNotDefinedError:LogNotDefinedError,NotALogError:NotALogError};function uniques(e,t){let r={};return e.forEach(e=>r[t?e[t]:e]=e),Object.keys(r).map(e=>r[e])}var uniques_1=uniques;function difference(e,t,r){var i={},n={};e.forEach(e=>n[r?e[r]:e]=!0);return t.reduce((e,t)=>{var s=void 0!==n[r?t[r]:t],a=void 0!==i[r?t[r]:t];return s||a||(e.push(t),i[r?t[r]:t]=!0),e},[])}var difference_1=difference;const last=(e,t)=>e.slice(e.length-t,e.length);class LogIO{static toMultihash(e,t){if(!isDefined_1(e))throw logErrors.ImmutableDBNotDefinedError();if(!isDefined_1(t))throw logErrors.LogNotDefinedError();if(t.values.length<1)throw new Error("Can't serialize an empty log");return e.object.put(t.toBuffer()).then(e=>e.toJSON().multihash)}static fromMultihash(e,t,r=-1,i,n){if(!isDefined_1(e))throw logErrors.ImmutableDBNotDefinedError();if(!isDefined_1(t))throw new Error(`Invalid hash: ${t}`);return e.object.get(t,{enc:"base58"}).then(e=>JSON.parse(e.toJSON().data)).then(t=>{if(!t.heads||!t.id)throw logErrors.NotALogError();return entryIo.fetchAll(e,t.heads,r,i,null,n).then(e=>{const r=e.reduce((e,t)=>t.clock.time>e.time?new lamportClock(t.clock.id,t.clock.time):e,new lamportClock(t.id)),i=e.slice().sort(entry.compare),n=i.filter(e=>t.heads.includes(e.hash));return{id:t.id,values:i,heads:n,clock:r}})})}static fromEntryHash(e,t,r,i=-1,n,s){if(!isDefined_1(e))throw logErrors.IpfsNotDefinedError();if(!isDefined_1(t))throw new Error("'entryHash' must be defined");i=i>-1?Math.max(i,1):i;const a=n;return entryIo.fetchParallel(e,[t],i,a,null,null,s).then(e=>{return{values:i>-1?last(e,i):e}})}static fromJSON(e,t,r=-1,i,n,s){if(!isDefined_1(e))throw logErrors.ImmutableDBNotDefinedError();return entryIo.fetchParallel(e,t.heads.map(e=>e.hash),r,[],16,n,s).then(e=>{const r=e.slice().sort(entry.compare);e.filter(e=>t.heads.includes(e.hash));return{id:t.id,values:r,heads:t.heads}})}static fromEntry(e,t,r=-1,i,n,s,a){if(!isDefined_1(e))throw logErrors.ImmutableDBNotDefinedError();if(!isDefined_1(t))throw new Error("'sourceEntries' must be defined");if(!Array.isArray(t)&&!entry.isEntry(t))throw new Error("'sourceEntries' argument must be an array of Entry instances or a single Entry");Array.isArray(t)||(t=[t]),r=r>-1?Math.max(r,t.length):r;const o=i?i.map(e=>e.hash?e.hash:e):i,d=t.map(e=>e.hash);return entryIo.fetchParallel(e,d,r,o,null,null,a).then(e=>{var i=t.concat(e),n=uniques_1(i,"hash").sort(entry.compare);const s=n.slice(r>-1?-r:-n.length),a=((e,t)=>{var r=e.slice(t.length,e.length);return t.concat(r)})(s,difference_1(s,t,"hash"));return{id:a[a.length-1].id,values:a}})}}var logIo=LogIO;const randomId=()=>(new Date).getTime().toString(),getHash=e=>e.hash,flatMap=(e,t)=>e.concat(t),getNextPointers=e=>e.next,maxClockTimeReducer=(e,t)=>Math.max(e,t.clock.time),uniqueEntriesReducer=(e,t)=>(e[t.hash]=t,e);class Log extends gSet{constructor(e,t,r,i,n,s,a=[]){if(!isDefined_1(e))throw logErrors.ImmutableDBNotDefinedError();if(isDefined_1(r)&&!Array.isArray(r))throw new Error("'entries' argument must be an array of Entry instances");if(isDefined_1(i)&&!Array.isArray(i))throw new Error("'heads' argument must be an array");super(),this._storage=e,this._id=t||randomId(),this._keystore=this._storage.keystore,this._key=s,this._keys=Array.isArray(a)?a:[a],r=r||[],this._entryIndex=r.reduce(uniqueEntriesReducer,{}),i=i||Log.findHeads(r),this._headsIndex=i.reduce(uniqueEntriesReducer,{}),this._nextsIndex={},r.forEach(e=>e.next.forEach(t=>this._nextsIndex[t]=e.hash)),this._length=r?r.length:0;const o=Math.max(n?n.time:0,this.heads.reduce(maxClockTimeReducer,0)),d=s&&s.getPublic?s.getPublic("hex"):s||this._id;this._clock=new lamportClock(d,o)}get id(){return this._id}get clock(){return this._clock}get length(){return this._length}get values(){return Object.values(this._entryIndex).sort(entry.compare)||[]}get heads(){return Object.values(this._headsIndex)||[]}get tails(){return Log.findTails(this.values)}get tailHashes(){return Log.findTailHashes(this.values)}get(e){return this._entryIndex[e]}has(e){return void 0!==this._entryIndex[e.hash||e]}traverse(e,t){let r=e.map(getNextPointers).reduce(flatMap,[]),i={},n={},s=0;const a=e=>{n[e]||i[e]||(r.push(e),i[e]=!0)};for(e.forEach(e=>{n[e.hash]=e.hash,i[e.hash]=!0,s++});r.length>0&&s<t;){const e=r.shift(),t=this.get(e);t&&(s++,n[t.hash]=t.hash,i[t.hash]=!0,t.next.forEach(a))}return n}async append(e,t=1){if(this._key&&this._key.getPublic&&!this._keys.includes(this._key.getPublic("hex"))&&!this._keys.includes("*"))throw new Error("Not allowed to write");const r=Math.max(this.clock.time,this.heads.reduce(maxClockTimeReducer,0))+1;this._clock=new lamportClock(this.clock.id,r);const i=Object.keys(this.traverse(this.heads,t)),n=await entry.create(this._storage,this._keystore,this.id,e,i,this.clock,this._key);return this._entryIndex[n.hash]=n,i.forEach(e=>this._nextsIndex[e]=n.hash),this._headsIndex={},this._headsIndex[n.hash]=n,this._length++,n}async join(e,t=-1){if(!isDefined_1(e))throw logErrors.LogNotDefinedError();if(!Log.isLog(e))throw logErrors.NotALogError();const r=async e=>{this._keys.map(e=>e.getPublic?e.getPublic("hex"):e);return(await pMap(e,async e=>{if(!e.key)throw new Error("Entry doesn't have a public key");if(!e.sig)throw new Error("Entry doesn't have a signature");if(1===this._keys.length&&this._keys[0]===this._key&&e.id!==this.id)throw new Error("Entry doesn't belong in this log (wrong ID)");if(this._keys.length>0&&!this._keys.includes("*")&&!((e,t)=>e.find(e=>e===t.key))(this._keys.concat([this._key]),e))return console.warn("Warning: Input log contains entries that are not allowed in this log. Logs weren't joined."),!1;try{await entry.verifyEntry(e,this._keystore)}catch(t){throw new Error(`Invalid signature in entry '${e.hash}'`)}return!0})).every(e=>!0===e)},i=((e,t)=>{let r=Object.keys(e._headsIndex),i={},n={};const s=e=>{i[e]||t.get(e)||(r.push(e),i[e]=!0)};for(;r.length>0;){const a=r.shift(),o=e.get(a);o&&!t.get(a)&&o.id===this.id&&(n[o.hash]=o,i[o.hash]=!0,o.next.forEach(s))}return n})(e,this);if(this._key&&this._key.getPublic){if(!await r(Object.values(i)))return this}this._entryIndex=Object.assign(this._entryIndex,i);if(Object.values(i).forEach(e=>e.next.forEach(t=>this._nextsIndex[t]=e.hash)),this._length+=Object.values(i).length,t>-1){let e=this.values;e=e.slice(-t),this._entryIndex=e.reduce(uniqueEntriesReducer,{}),this._length=Object.values(this._entryIndex).length}const n=Object.values(i).map(getNextPointers).reduce(flatMap,[]),s=Log.findHeads(Object.values(Object.assign({},this._headsIndex,e._headsIndex))).filter(e=>!n.find(t=>t===e.hash)).filter(e=>!this._nextsIndex[e.hash]).reduce(uniqueEntriesReducer,{});this._headsIndex=s;const a=Object.values(this._headsIndex).reduce(maxClockTimeReducer,0);return this._clock=new lamportClock(this.clock.id,Math.max(this.clock.time,a)),this}toJSON(){return{id:this.id,heads:this.heads.map(getHash)}}toSnapshot(){return{id:this.id,heads:this.heads,values:this.values}}toBuffer(){return Buffer.from(JSON.stringify(this.toJSON()))}toString(e){return this.values.slice().reverse().map((t,r)=>{const i=entry.findChildren(t,this.values).length;let n=new Array(Math.max(i-1,0));return n=i>1?n.fill("  "):n,(n=i>0?n.concat(["└─"]):n).join("")+(e?e(t.payload):t.payload)}).join("\n")}static isLog(e){return void 0!==e.id&&void 0!==e.heads&&void 0!==e._entryIndex}toMultihash(){return logIo.toMultihash(this._storage,this)}static fromMultihash(e,t,r=-1,i,n,s){if(!isDefined_1(e))throw logErrors.ImmutableDBNotDefinedError();if(!isDefined_1(t))throw new Error(`Invalid hash: ${t}`);return logIo.fromMultihash(e,t,r,i,s).then(t=>new Log(e,t.id,t.values,t.heads,t.clock,n))}static fromEntryHash(e,t,r,i=-1,n,s,a,o){if(!isDefined_1(e))throw logErrors.ImmutableDBNotDefinedError();if(!isDefined_1(t))throw new Error("'hash' must be defined");return logIo.fromEntryHash(e,t,r,i,n,o).then(t=>new Log(e,r,t.values,null,null,s,a))}static fromJSON(e,t,r=-1,i,n,s,a){if(!isDefined_1(e))throw logErrors.ImmutableDBNotDefinedError();return logIo.fromJSON(e,t,r,i,s,a).then(t=>new Log(e,t.id,t.values,null,null,i,n))}static fromEntry(e,t,r=-1,i,n){if(!isDefined_1(e))throw logErrors.ImmutableDBNotDefinedError();if(!isDefined_1(t))throw new Error("'sourceEntries' must be defined");return logIo.fromEntry(e,t,r,i,n).then(t=>new Log(e,t.id,t.values))}static findHeads(e){var t=e.reduce((e,t,r,i)=>{return t.next.forEach(r=>e[r]=t.hash),e},{});return e.filter(e=>void 0===t[e.hash]).sort((e,t)=>e.clock.id>t.clock.id)}static findTails(e){var t={},r=[],i={},n=[];e.forEach(e=>{0===e.next.length&&r.push(e);e.next.forEach(r=>{t[r]||(t[r]=[]),t[r].push(e)}),n=n.concat(e.next),i[e.hash]=!0});const s=n.filter(e=>void 0===i[e]).map(e=>t[e]).reduce((e,t,r,i)=>e.concat(uniques_1(t,"hash")),[]).concat(r);return uniques_1(s,"hash").sort(entry.compare)}static findTailHashes(e){var t={};return e.forEach(e=>t[e.hash]=!0),e.reduce((e,r,i,n)=>{return r.next.reverse().forEach(r=>{void 0===t[r]&&e.splice(0,0,r)}),e},[])}}var log=Log;class Index{constructor(e){this.id=e,this._index=[]}get(){return this._index}async updateIndex(e,t){this._index=e.values}}var Index_1=Index;const format=util.format,EventEmitter=events.EventEmitter;let isElectronRenderer=process.type&&"renderer"===process.type,isNodejs=!(isElectronRenderer||!process.version);const LogLevels={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"};let GlobalLogLevel=LogLevels.DEBUG,GlobalLogfile=null,GlobalEvents=new EventEmitter,Colors={Black:0,Red:1,Green:2,Yellow:3,Blue:4,Magenta:5,Cyan:6,Grey:7,White:9,Default:9};isNodejs||(Colors={Black:"Black",Red:"IndianRed",Green:"LimeGreen",Yellow:"Orange",Blue:"RoyalBlue",Magenta:"Orchid",Cyan:"SkyBlue",Grey:"DimGrey",White:"White",Default:"Black"});const loglevelColors=[Colors.Cyan,Colors.Green,Colors.Yellow,Colors.Red,Colors.Default],defaultOptions={useColors:!0,color:Colors.Default,showTimestamp:!0,useLocalTime:!1,showLevel:!0,filename:GlobalLogfile,appendFile:!0};class Logger{constructor(e,t){this.category=e;let r={};Object.assign(r,defaultOptions),Object.assign(r,t),this.options=r,this.debug=this.debug.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this)}debug(){this._shouldLog(LogLevels.DEBUG)&&this._write(LogLevels.DEBUG,format.apply(null,arguments))}log(){this._shouldLog(LogLevels.DEBUG)&&this.debug.apply(this,arguments)}info(){this._shouldLog(LogLevels.INFO)&&this._write(LogLevels.INFO,format.apply(null,arguments))}warn(){this._shouldLog(LogLevels.WARN)&&this._write(LogLevels.WARN,format.apply(null,arguments))}error(){this._shouldLog(LogLevels.ERROR)&&this._write(LogLevels.ERROR,format.apply(null,arguments))}_write(e,t){(this.options.filename||GlobalLogfile)&&!this.fileWriter&&isNodejs&&(this.fileWriter=require$$0.openSync(this.options.filename||GlobalLogfile,this.options.appendFile?"a+":"w+"));let r=this._format(e,t),i=this._createLogMessage(e,t),n=this._createLogMessage(e,t,r.timestamp,r.level,r.category,r.text);this.fileWriter&&isNodejs&&require$$0.writeSync(this.fileWriter,i+"\n",null,"utf-8"),isNodejs||!this.options.useColors?(console.log(n),GlobalEvents.emit("data",this.category,e,t)):e===LogLevels.ERROR?this.options.showTimestamp&&this.options.showLevel?console.error(n,r.timestamp,r.level,r.category,r.text):this.options.showTimestamp&&!this.options.showLevel?console.error(n,r.timestamp,r.category,r.text):!this.options.showTimestamp&&this.options.showLevel?console.error(n,r.level,r.category,r.text):console.error(n,r.category,r.text):this.options.showTimestamp&&this.options.showLevel?console.log(n,r.timestamp,r.level,r.category,r.text):this.options.showTimestamp&&!this.options.showLevel?console.log(n,r.timestamp,r.category,r.text):!this.options.showTimestamp&&this.options.showLevel?console.log(n,r.level,r.category,r.text):console.log(n,r.category,r.text)}_format(e,t){let r="",i="",n="",s=": ";if(this.options.useColors){const t=Object.keys(LogLevels).map(e=>LogLevels[e]).indexOf(e),a=this.options.color;isNodejs?(this.options.showTimestamp&&(r="[3"+Colors.Grey+"m"),this.options.showLevel&&(i="[3"+loglevelColors[t]+";22m"),n="[3"+a+";1m",s="[0m: "):(this.options.showTimestamp&&(r="color:"+Colors.Grey),this.options.showLevel&&(i="color:"+loglevelColors[t]),n="color:"+a+"; font-weight: bold")}return{timestamp:r,level:i,category:n,text:s}}_createLogMessage(e,t,r,i,n,s){r=r||"",i=i||"",n=n||"",s=s||": ",!isNodejs&&this.options.useColors&&(this.options.showTimestamp&&(r="%c"),this.options.showLevel&&(i="%c"),n="%c",s=": %c");let a="";return this.options.showTimestamp&&!this.options.useLocalTime&&(a+=(new Date).toISOString()+" "),this.options.showTimestamp&&this.options.useLocalTime&&(a+=(new Date).toLocaleString()+" "),a=r+a,this.options.showLevel&&(a+=i+"["+e+"]"+(e===LogLevels.INFO||e===LogLevels.WARN?" ":"")+" "),a+=n+this.category,a+=s+t}_shouldLog(e){let t="undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.LOG?process.env.LOG.toUpperCase():null;const r=(t="undefined"!=typeof window&&window.LOG?window.LOG.toUpperCase():t)||GlobalLogLevel,i=Object.keys(LogLevels).map(e=>LogLevels[e]);return i.indexOf(e)>=i.indexOf(r)}}var src={Colors:Colors,LogLevels:LogLevels,setLogLevel:e=>{GlobalLogLevel=e},setLogfile:e=>{GlobalLogfile=e},create:(e,t)=>{return new Logger(e,t)},forceBrowserMode:e=>isNodejs=!e,events:GlobalEvents};const EventEmitter$1=events.EventEmitter,logger=src.create("replicator",{color:src.Colors.Cyan});src.setLogLevel("ERROR");const getNext=e=>e.next,flatMap$1=(e,t)=>e.concat(t),notNull=e=>null!=e,uniqueValues=(e,t)=>(e[t]=t,e),batchSize=1;class Replicator extends EventEmitter$1{constructor(e,t){super(),this._store=e,this._fetching={},this._stats={tasksRequested:0,tasksStarted:0,tasksProcessed:0},this._buffer=[],this._concurrency=t||128,this._queue={},this._q=new Set,this._flushTimer=setInterval(()=>{0===this.tasksRunning&&Object.keys(this._queue).length>0&&(logger.warn("Had to flush the queue!",Object.keys(this._queue).length,"items in the queue, ",this.tasksRequested,this.tasksFinished," tasks requested/finished"),setTimeout(()=>this._processQueue(),0))},3e3)}get tasksRequested(){return this._stats.tasksRequested}get tasksStarted(){return this._stats.tasksStarted}get tasksRunning(){return this._stats.tasksStarted-this._stats.tasksProcessed}get tasksQueued(){return Math.max(Object.keys(this._queue).length-this.tasksRunning,0)}get tasksFinished(){return this._stats.tasksProcessed}getQueue(){return Object.values(this._queue)}load(e){const t=e=>!this._store._oplog.has(e.hash||e)&&!this._queue[e.hash||e];try{e.filter(notNull).filter(t).forEach(this._addToQueue.bind(this)),setTimeout(()=>this._processQueue(),0)}catch(e){console.error(e)}}stop(){clearInterval(this._flushTimer)}_addToQueue(e){const t=e.hash||e;this._store._oplog.has(t)||this._fetching[t]||this._queue[t]||(this._stats.tasksRequested+=1,this._queue[t]=e)}async _processQueue(){if(this.tasksRunning<this._concurrency){const e=this._concurrency-this.tasksRunning,t=Object.values(this._queue).slice(0,e).filter(notNull);t.forEach(e=>delete this._queue[e.hash||e]);const r=e=>e.reduce(flatMap$1,[]).reduce(uniqueValues,{}),i=e=>{const r=Object.values(e).filter(notNull);if(t.length>0&&this._buffer.length>0||0===this.tasksRunning&&this._buffer.length>0){const e=this._buffer.slice();this._buffer=[],this.emit("load.end",e)}r.length>0&&this.load(r)};return pMap(t,e=>this._processOne(e)).then(r).then(i)}}async _processOne(e){const t=e.hash||e;if(this._store._oplog.has(t)||this._fetching[t])return;this._fetching[t]=t,this.emit("load.added",e),this._stats.tasksStarted+=1;const r=await log.fromEntryHash(this._store._ipfs,t,this._store._oplog.id,batchSize,[],this._store.key,this._store.access.write);this._buffer.push(r);const i=r.values[0];return delete this._queue[t],this._stats.tasksProcessed+=1,this.emit("load.progress",this._id,t,i,null,this._buffer.length),r.values.map(getNext).reduce(flatMap$1,[])}}var Replicator_1=Replicator;class ReplicationInfo{constructor(){this.reset()}reset(){this.progress=0,this.max=0,this.buffered=0,this.queued=0}}var replicationInfo=ReplicationInfo;const EventEmitter$2=events.EventEmitter,logger$1=src.create("orbit-db.store",{color:src.Colors.Blue});src.setLogLevel("ERROR");const DefaultOptions={Index:Index_1,maxHistory:-1,path:"./orbitdb",replicate:!0,referenceCount:64,replicationConcurrency:128};class Store{constructor(e,t,r,i){let n=Object.assign({},DefaultOptions);Object.assign(n,i),this.options=n,this._type="store",this.id=r.toString(),this.uid=t,this.address=r,this.dbname=r.path||"",this.events=new EventEmitter$2,this._ipfs=e,this._cache=i.cache,this._keystore=i.keystore,this._key=i&&i.key?i.key:this._keystore.getKey(t)||this._keystore.createKey(t),this._ipfs.keystore=this._keystore;const s={admin:[this._key.getPublic("hex")],read:[],write:[this._key.getPublic("hex")]};this.access=i.accessController||s,this._oplog=new log(this._ipfs,this.id,null,null,null,this._key,this.access.write),this._index=new this.options.Index(this.uid),this._replicationStatus=new replicationInfo,this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0};try{this._replicator=new Replicator_1(this,this.options.replicationConcurrency),this._loader=this._replicator,this._replicator.on("load.added",e=>{this._replicationStatus.queued++,this._recalculateReplicationMax(e.clock?e.clock.time:0),this.events.emit("replicate",this.address.toString(),e)}),this._replicator.on("load.progress",(e,t,r,i,n)=>{this._replicationStatus.buffered>n?this._recalculateReplicationProgress(this.replicationStatus.progress+n):this._recalculateReplicationProgress(this._oplog.length+n),this._replicationStatus.buffered=n,this._recalculateReplicationMax(this.replicationStatus.progress),this.events.emit("replicate.progress",this.address.toString(),t,r,this.replicationStatus.progress,this.replicationStatus.max)});const e=async(e,t)=>{try{for(let t of e)await this._oplog.join(t);this._replicationStatus.queued-=e.length,this._replicationStatus.buffered=this._replicator._buffer.length,await this._updateIndex();const t=this._oplog.heads;await this._cache.set("_remoteHeads",t),logger$1.debug(`Saved heads ${t.length} [${t.map(e=>e.hash).join(", ")}]`),this.events.emit("replicated",this.address.toString(),e.length)}catch(e){console.error(e)}};this._replicator.on("load.end",e)}catch(e){console.error("Store Error:",e)}}get all(){return Array.isArray(this._index._index)?this._index._index:Object.keys(this._index._index).map(e=>this._index._index[e])}get type(){return this._type}get key(){return this._key}get replicationStatus(){return this._replicationStatus}async close(){return this.options.onClose&&await this.options.onClose(this.address.toString()),this._replicator.stop(),this._replicationStatus.reset(),this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0},this.events.removeAllListeners("load"),this.events.removeAllListeners("load.progress"),this.events.removeAllListeners("replicate"),this.events.removeAllListeners("replicate.progress"),this.events.removeAllListeners("replicated"),this.events.removeAllListeners("ready"),this.events.removeAllListeners("write"),await this._cache.close(),this.events.emit("closed",this.address.toString()),Promise.resolve()}async drop(){await this.close(),await this._cache.destroy(),this._index=new this.options.Index(this.uid),this._oplog=new log(this._ipfs,this.id,null,null,null,this._key,this.access.write),this._cache=this.options.cache}async load(e){e=e||this.options.maxHistory;const t=await this._cache.get("_localHeads")||[],r=await this._cache.get("_remoteHeads")||[],i=t.concat(r);i.length>0&&this.events.emit("load",this.address.toString(),i),await pEachSeries(i,async t=>{this._recalculateReplicationMax(t.clock.time);let r=await log.fromEntryHash(this._ipfs,t.hash,this._oplog.id,e,this._oplog.values,this._key,this.access.write,this._onLoadProgress.bind(this));await this._oplog.join(r,e)}),i.length>0&&await this._updateIndex(),this.events.emit("ready",this.address.toString(),this._oplog.heads)}sync(e){if(this._stats.syncRequestsReceieved+=1,logger$1.debug(`Sync request #${this._stats.syncRequestsReceieved} ${e.length}`),0===e.length)return;return pEachSeries(e,e=>{if(!e)return console.warn("Warning: Given input entry was 'null'."),Promise.resolve(null);if(!this.access.write.includes(e.key)&&!this.access.write.includes("*"))return console.warn("Warning: Given input entry is not allowed in this log and was discarded (no write access)."),Promise.resolve(null);const t=Object.assign({},e);return t.hash=null,this._ipfs.object.put(Buffer.from(JSON.stringify(t))).then(e=>e.toJSON().multihash).then(t=>(t!==e.hash&&console.warn("\"WARNING! Head hash didn't match the contents"),t)).then(()=>e)}).then(async e=>this._replicator.load(e.filter(e=>null!==e)))}loadMoreFrom(e,t){this._replicator.load(t)}async saveSnapshot(){const e=this._replicator.getQueue();let t=this._oplog.toSnapshot(),r=new Buffer(JSON.stringify({id:t.id,heads:t.heads,size:t.values.length,type:this.type}));const i=new readableBrowser;let n=new Uint16Array([r.length]),s=new Buffer(n.buffer);i.push(s),i.push(r);t.values.forEach(e=>{let t=new Buffer(JSON.stringify(e)),r=new Uint16Array([t.length]);i.push(new Buffer(r.buffer)),i.push(t)}),i.push(null);const a=await this._ipfs.files.add(i);return await this._cache.set("snapshot",a[a.length-1]),await this._cache.set("queue",e),logger$1.debug(`Saved snapshot: ${a[a.length-1].hash}, queue length: ${e.length}`),a}async loadFromSnapshot(e){this.events.emit("load",this.address.toString());const t=(e,t)=>Math.max(e,t.clock.time),r=await this._cache.get("queue");this.sync(r||[]);const i=await this._cache.get("snapshot");if(!i)throw new Error(`Snapshot for ${this.address} not found!`);{const e=await this._ipfs.files.catReadableStream(i.hash),r=()=>new Promise((t,r)=>{let i=new Buffer(0),n=[];e.on("data",e=>{if(this._byteSize+=e.length,n.length<2e4)n.push(e);else{const e=Buffer.concat(n);i=Buffer.concat([i,e]),n=[]}}),e.on("end",()=>{if(n.length>0){const e=Buffer.concat(n);i=Buffer.concat([i,e])}function e(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;++i)r[i]=e[i];return t}const r=parseInt(new Uint16Array(e(i.slice(0,2))));let s;try{s=JSON.parse(i.slice(2,r+2))}catch(e){}let a=[],o=2+r;for(;o<i.length;){const t=parseInt(new Uint16Array(e(i.slice(o,o+2))));o+=2;const r=i.slice(o,o+t);try{const e=JSON.parse(r);a.push(e)}catch(e){}o+=t}s?(this._type=s.type,t({values:a,id:s.id,heads:s.heads,type:s.type})):t({values:a,id:null,heads:null,type:null})})}),n=(e,t,r,i)=>{this._recalculateReplicationStatus(r,t.clock.time),this._onLoadProgress(e,t)},s=await r();if(this._recalculateReplicationMax(s.values.reduce(t,0)),s){const e=await log.fromJSON(this._ipfs,s,-1,this._key,this.access.write,1e3,n);await this._oplog.join(e),await this._updateIndex(),this.events.emit("replicated",this.address.toString())}this.events.emit("ready",this.address.toString(),this._oplog.heads)}return this}async _updateIndex(){this._recalculateReplicationMax(),await this._index.updateIndex(this._oplog),this._recalculateReplicationProgress()}async _addOperation(e,t,r,i){if(this._oplog){const t=await this._oplog.append(e,this.options.referenceCount);return this._recalculateReplicationStatus(this.replicationStatus.progress+1,t.clock.time),await this._cache.set("_localHeads",[t]),await this._updateIndex(),this.events.emit("write",this.address.toString(),t,this._oplog.heads),i&&i(t),t.hash}}_addOperationBatch(e,t,r,i){throw new Error("Not implemented!")}_onLoadProgress(e,t,r,i){this._recalculateReplicationStatus(r,i),this.events.emit("load.progress",this.address.toString(),e,t,this.replicationStatus.progress,this.replicationStatus.max)}_recalculateReplicationProgress(e){this._replicationStatus.progress=Math.max.apply(null,[this._replicationStatus.progress,this._oplog.length,e||0]),this._recalculateReplicationMax(this.replicationStatus.progress)}_recalculateReplicationMax(e){this._replicationStatus.max=Math.max.apply(null,[this._replicationStatus.max,this._oplog.length,e||0])}_recalculateReplicationStatus(e,t){this._recalculateReplicationProgress(e),this._recalculateReplicationMax(t)}}var Store_1=Store;class EventIndex{constructor(){this._index=null}get(){return this._index?this._index.values:[]}updateIndex(e){this._index=e}}var EventIndex_1=EventIndex;class EventStore extends Store_1{constructor(e,t,r,i={}){void 0===i.Index&&Object.assign(i,{Index:EventIndex_1}),super(e,t,r,i),this._type="eventlog"}add(e){return this._addOperation({op:"ADD",key:null,value:e})}get(e){return this.iterator({gte:e,limit:1}).collect()[0]}iterator(e){const t=this._query(e);let r=0;return{[Symbol.iterator](){return this},next(){let e={value:null,done:!0};return r<t.length&&(e={value:t[r],done:!1},r++),e},collect:()=>t}}_query(e){e||(e={});const t=e.limit?e.limit>-1?e.limit:this._index.get().length:1,r=this._index.get().slice();let i=[];return i=e.gt||e.gte?this._read(r,e.gt?e.gt:e.gte,t,!!e.gte):this._read(r.reverse(),e.lt?e.lt:e.lte,t,e.lte||!e.lt).reverse()}_read(e,t,r,i){const n=e.map(e=>e.hash).indexOf(t);let s=Math.max(n,0);return s+=i?0:1,e.slice(s).slice(0,r)}}var EventStore_1=EventStore;class FeedIndex{constructor(){this._index={}}get(){return Object.keys(this._index).map(e=>this._index[e])}updateIndex(e){this._index={},e.values.reduce((e,t)=>(e.includes(t.hash)||(e.push(t.hash),"ADD"===t.payload.op?this._index[t.hash]=t:"DEL"===t.payload.op&&delete this._index[t.payload.value]),e),[])}}var FeedIndex_1=FeedIndex;class FeedStore extends EventStore_1{constructor(e,t,r,i){i||(i={}),i.Index||Object.assign(i,{Index:FeedIndex_1}),super(e,t,r,i),this._type="feed"}remove(e){return this.del(e)}del(e){const t={op:"DEL",key:null,value:e};return this._addOperation(t)}}var FeedStore_1=FeedStore;class KeyValueIndex{constructor(){this._index={}}get(e){return this._index[e]}updateIndex(e){e.values.slice().reverse().reduce((e,t)=>(e.includes(t.payload.key)||(e.push(t.payload.key),"PUT"===t.payload.op?this._index[t.payload.key]=t.payload.value:"DEL"===t.payload.op&&delete this._index[t.payload.key]),e),[])}}var KeyValueIndex_1=KeyValueIndex;class KeyValueStore extends Store_1{constructor(e,t,r,i){let n=Object.assign({},{Index:KeyValueIndex_1});Object.assign(n,i),super(e,t,r,n),this._type="keyvalue"}all(){return this._index._index}get(e){return this._index.get(e)}set(e,t){return this.put(e,t)}put(e,t){return this._addOperation({op:"PUT",key:e,value:t})}del(e){return this._addOperation({op:"DEL",key:e,value:null})}}var KeyValueStore_1=KeyValueStore,deepEqual=(e,t)=>{const r=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);if(r.length!==i.length)return!1;for(let i=0;i<r.length;i++){const n=r[i];if(e[n]!==t[n])return!1}return!0};class OperationTuple3{constructor(e,t,r){this.value=e,this.added=new Set(t),this.removed=new Set(r)}static create(e,t,r){return new OperationTuple3(e,t,r)}static from(e){return OperationTuple3.create(e.value,e.added,e.removed)}}var OperationTuple3_1=OperationTuple3,utils={deepEqual:deepEqual,OperationTuple3:OperationTuple3_1};const{deepEqual:deepEqual$1}=utils,sum=(e,t)=>e+t;class GCounter{constructor(e,t){this.id=e,this._counters=t||{},this._counters[this.id]=this._counters[this.id]?this._counters[this.id]:0}get value(){return Object.values(this._counters).reduce(sum,0)}increment(e){e&&e<1||(null==e&&(e=1),this._counters[this.id]=this._counters[this.id]+e)}merge(e){Object.entries(e._counters).forEach(([e,t])=>{this._counters[e]=Math.max(this._counters[e]||0,t)})}toJSON(){return{id:this.id,counters:this._counters}}isEqual(e){return GCounter.isEqual(this,e)}static from(e){return new GCounter(e.id,e.counters)}static isEqual(e,t){return e.id===t.id&&deepEqual$1(e._counters,t._counters)}}var GCounter_1=GCounter;class CounterIndex{constructor(e){this._index=new GCounter_1(e)}get(){return this._index}updateIndex(e){if(this._index){const t=e=>GCounter_1.from(e.payload.value),r=e=>this._index.merge(e);e.values.filter(e=>e&&"COUNTER"===e.payload.op).map(t).forEach(r)}}}var CounterIndex_1=CounterIndex;class CounterStore extends Store_1{constructor(e,t,r,i={}){i.Index||Object.assign(i,{Index:CounterIndex_1}),super(e,t,r,i),this._type="counter"}get value(){return this._index.get().value}inc(e){const t=new GCounter_1(this.uid,Object.assign({},this._index.get()._counters));return t.increment(e),this._addOperation({op:"COUNTER",key:null,value:t.toJSON()})}}var CounterStore_1=CounterStore;class DocumentIndex{constructor(){this._index={}}get(e,t=!1){return t?this._index[e]:this._index[e]?this._index[e].payload.value:null}updateIndex(e,t){e.values.slice().reverse().reduce((e,r,i)=>(!0!==e[r.payload.key]&&(e[r.payload.key]=!0,"PUT"===r.payload.op?this._index[r.payload.key]=r:"DEL"===r.payload.op&&delete this._index[r.payload.key]),t&&t(r,i),e),{})}}var DocumentIndex_1=DocumentIndex,pMap$1=(e,t,r)=>new Promise((i,n)=>{const s=(r=Object.assign({concurrency:1/0},r)).concurrency;if(s<1)throw new TypeError("Expected `concurrency` to be a number from 1 and up");const a=[],o=e[Symbol.iterator]();let d=!1,f=!1,c=0,h=0;const u=()=>{if(d)return;const e=o.next(),r=h;if(h++,e.done)return f=!0,void(0===c&&i(a));c++,Promise.resolve(e.value).then(e=>t(e,r)).then(e=>{a[r]=e,c--,u()},e=>{d=!0,n(e)})};for(let e=0;e<s&&(u(),!f);e++);});const replaceAll=(e,t,r)=>e.toString().split(t).join(r);class DocumentStore extends Store_1{constructor(e,t,r,i){i||(i={}),i.indexBy||Object.assign(i,{indexBy:"_id"}),i.Index||Object.assign(i,{Index:DocumentIndex_1}),super(e,t,r,i),this._type="docstore"}get(e,t=!1){const r=(e=e.toString()).split(" ");e=r.length>1?replaceAll(e,"."," ").toLowerCase():e.toLowerCase();return Object.keys(this._index._index).filter(i=>t?-1!==i.indexOf(e):(t=>r.length>1?-1!==replaceAll(t,"."," ").toLowerCase().indexOf(e):-1!==t.toLowerCase().indexOf(e))(i)).map(e=>this._index.get(e))}query(e,t={}){const r=!!t&&t.fullOp;return Object.keys(this._index._index).map(e=>this._index.get(e,r)).filter(e)}batchPut(e,t){return pMap$1(e,(r,i)=>this._addOperationBatch({op:"PUT",key:r[this.options.indexBy],value:r},!0,i===e.length-1,t),{concurrency:1}).then(()=>this.saveSnapshot())}put(e){if(!e[this.options.indexBy])throw new Error(`The provided document doesn't contain field '${this.options.indexBy}'`);return this._addOperation({op:"PUT",key:e[this.options.indexBy],value:e})}del(e){if(!this._index.get(e))throw new Error(`No entry with key '${e}' in the database`);return this._addOperation({op:"DEL",key:e,value:null})}}var DocumentStore_1=DocumentStore,dist=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Object.prototype.toString,i=e=>t=>typeof t===e,n=e=>{const t=r.call(e).slice(8,-1);return t||null},s=e=>t=>n(t)===e;function a(e){if(null===e)return"null";if(!0===e||!1===e)return"boolean";const t=typeof e;if("undefined"===t)return"undefined";if("string"===t)return"string";if("number"===t)return"number";if("symbol"===t)return"symbol";if(a.function_(e))return"Function";if(Array.isArray(e))return"Array";if(Buffer.isBuffer(e))return"Buffer";const r=n(e);if(r)return r;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}!function(e){const t=e=>"object"==typeof e;e.undefined=i("undefined"),e.string=i("string"),e.number=i("number"),e.function_=i("function"),e.null_=(e=>null===e),e.class_=(t=>e.function_(t)&&t.toString().startsWith("class ")),e.boolean=(e=>!0===e||!1===e),e.symbol=i("symbol"),e.array=Array.isArray,e.buffer=Buffer.isBuffer,e.nullOrUndefined=(t=>e.null_(t)||e.undefined(t)),e.object=(r=>!e.nullOrUndefined(r)&&(e.function_(r)||t(r))),e.iterable=(t=>!e.nullOrUndefined(t)&&e.function_(t[Symbol.iterator])),e.generator=(t=>e.iterable(t)&&e.function_(t.next)&&e.function_(t.throw)),e.nativePromise=s("Promise");e.promise=(r=>e.nativePromise(r)||(r=>!e.null_(r)&&t(r)&&e.function_(r.then)&&e.function_(r.catch))(r));const r=t=>r=>e.function_(r)&&e.function_(r.constructor)&&r.constructor.name===t;e.generatorFunction=r("GeneratorFunction"),e.asyncFunction=r("AsyncFunction"),e.boundFunction=(t=>e.function_(t)&&!t.hasOwnProperty("prototype")),e.regExp=s("RegExp"),e.date=s("Date"),e.error=s("Error"),e.map=s("Map"),e.set=s("Set"),e.weakMap=s("WeakMap"),e.weakSet=s("WeakSet"),e.int8Array=s("Int8Array"),e.uint8Array=s("Uint8Array"),e.uint8ClampedArray=s("Uint8ClampedArray"),e.int16Array=s("Int16Array"),e.uint16Array=s("Uint16Array"),e.int32Array=s("Int32Array"),e.uint32Array=s("Uint32Array"),e.float32Array=s("Float32Array"),e.float64Array=s("Float64Array"),e.arrayBuffer=s("ArrayBuffer"),e.sharedArrayBuffer=s("SharedArrayBuffer"),e.dataView=s("DataView"),e.directInstanceOf=((t,r)=>e.object(t)&&e.object(r)&&Object.getPrototypeOf(t)===r.prototype),e.truthy=(e=>Boolean(e)),e.falsy=(e=>!e),e.nan=(e=>Number.isNaN(e));const a=new Set(["undefined","string","number","boolean","symbol"]);e.primitive=(t=>e.null_(t)||a.has(typeof t)),e.integer=(e=>Number.isInteger(e)),e.safeInteger=(e=>Number.isSafeInteger(e)),e.plainObject=(e=>{let t;return"Object"===n(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))});const o=new Set(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"]);e.typedArray=(e=>{const t=n(e);return null!==t&&o.has(t)});e.arrayLike=(t=>!e.nullOrUndefined(t)&&!e.function_(t)&&(t=>e.safeInteger(t)&&t>-1)(t.length)),e.inRange=((t,r)=>{if(e.number(r))return t>=Math.min(0,r)&&t<=Math.max(r,0);if(e.array(r)&&2===r.length)return t>=Math.min.apply(null,r)&&t<=Math.max.apply(null,r);throw new TypeError(`Invalid range: ${util.inspect(r)}`)});const d=["innerHTML","ownerDocument","style","attributes","nodeValue"];e.domElement=(t=>e.object(t)&&1===t.nodeType&&e.string(t.nodeName)&&!e.plainObject(t)&&d.every(e=>e in t)),e.nodeStream=(r=>!e.nullOrUndefined(r)&&t(r)&&e.function_(r.pipe)),e.infinite=(e=>e===1/0||e===-1/0);const f=t=>r=>e.integer(r)&&Math.abs(r%2)===t;e.even=f(0),e.odd=f(1);e.empty=(t=>e.falsy(t)||(t=>(e.string(t)||e.array(t))&&0===t.length)(t)||(t=>!e.map(t)&&!e.set(t)&&e.object(t)&&0===Object.keys(t).length)(t)||(t=>(e.map(t)||e.set(t))&&0===t.size)(t)),e.emptyOrWhitespace=(t=>e.empty(t)||(t=>e.string(t)&&!1===/\S/.test(t))(t));const c=(t,r,i)=>{const n=Array.prototype.slice.call(i,1);if(!1===e.function_(r))throw new TypeError(`Invalid predicate: ${util.inspect(r)}`);if(0===n.length)throw new TypeError("Invalid number of values");return t.call(n,r)};e.any=function(e){return c(Array.prototype.some,e,arguments)},e.all=function(e){return c(Array.prototype.every,e,arguments)}}(a||(a={})),Object.defineProperties(a,{class:{value:a.class_},function:{value:a.function_},null:{value:a.null_}}),t.default=a,e.exports=a,e.exports.default=a});unwrapExports(dist);var pSeries=e=>{const t=[];for(const t of e){const e=dist(t);if("Function"!==e)return Promise.reject(new TypeError(`Expected task to be a \`Function\`, received \`${e}\``))}return pReduce(e,(e,r)=>Promise.resolve().then(r).then(e=>{t.push(e)})).then(()=>t)};const difference$1=(e,t)=>new Set([...e].filter(e=>!t.has(e))),sleep=e=>new Promise(t=>setTimeout(t,e)),runWithDelay=async(e,t,r)=>{const i=await e(t);return await sleep(r),i};var runWithDelay_1=runWithDelay,difference_1$1=difference$1,utils$1={runWithDelay:runWithDelay_1,difference:difference_1$1};const{difference:difference$2}=utils$1,DEFAULT_OPTIONS={start:!0,pollInterval:1e3};class IpfsPubsubPeerMonitor extends events{constructor(e,t,r){super(),this._pubsub=e,this._topic=t,this._options=Object.assign({},DEFAULT_OPTIONS,r),this._peers=[],this._interval=null,this._options.start&&this.start()}get started(){return null!==this._interval}set started(e){throw new Error("'started' is read-only")}start(){this._interval&&this.stop(),this._interval=setInterval(this._pollPeers.bind(this),this._options.pollInterval)}stop(){clearInterval(this._interval),this._interval=null,this.removeAllListeners("error"),this.removeAllListeners("join"),this.removeAllListeners("leave")}async getPeers(){return this._peers=await this._pubsub.peers(this._topic),this._peers.slice()}hasPeer(e){return this._peers.includes(e)}async _pollPeers(){try{const e=await this._pubsub.peers(this._topic);IpfsPubsubPeerMonitor._emitJoinsAndLeaves(new Set(this._peers),new Set(e),this),this._peers=e}catch(e){clearInterval(this._interval),this.emit("error",e)}}static _emitJoinsAndLeaves(e,t,r){difference$2(t,e).forEach(e=>r.emit("join",e)),difference$2(e,t).forEach(e=>r.emit("leave",e))}}var ipfsPubsubPeerMonitor=IpfsPubsubPeerMonitor;const logger$2=src.create("pubsub",{color:src.Colors.Yellow});src.setLogLevel("ERROR");const maxTopicsOpen=256;let topicsOpenCount=0;class IPFSPubsub{constructor(e,t){this._ipfs=e,this._id=t,this._subscriptions={},null===this._ipfs.pubsub&&logger$2.error("The provided version of ipfs doesn't have pubsub support. Messages will not be exchanged."),this._handleMessage=this._handleMessage.bind(this),this._ipfs.setMaxListeners&&this._ipfs.setMaxListeners(maxTopicsOpen)}async subscribe(e,t,r){if(!this._subscriptions[e]&&this._ipfs.pubsub){await this._ipfs.pubsub.subscribe(e,this._handleMessage);const i=new ipfsPubsubPeerMonitor(this._ipfs.pubsub,e);i.on("join",t=>{logger$2.debug(`Peer joined ${e}:`),logger$2.debug(t),this._subscriptions[e]?r(e,t):(logger$2.warn("Peer joined a room we don't have a subscription for"),logger$2.warn(e,t))}),i.on("leave",t=>logger$2.debug(`Peer ${t} left ${e}`)),i.on("error",e=>logger$2.error(e)),this._subscriptions[e]={topicMonitor:i,onMessage:t,onNewPeer:r},topicsOpenCount++,logger$2.debug("Topics open:",topicsOpenCount)}}async unsubscribe(e){this._subscriptions[e]&&(await this._ipfs.pubsub.unsubscribe(e,this._handleMessage),this._subscriptions[e].topicMonitor.stop(),delete this._subscriptions[e],logger$2.debug(`Unsubscribed from '${e}'`),topicsOpenCount--,logger$2.debug("Topics open:",topicsOpenCount))}publish(e,t){this._subscriptions[e]&&this._ipfs.pubsub&&this._ipfs.pubsub.publish(e,Buffer.from(JSON.stringify(t)))}async disconnect(){const e=Object.keys(this._subscriptions);await pSeries(e.map(e=>this.unsubscribe.bind(this,e))),this._subscriptions={}}async _handleMessage(e){if(e.from===this._id)return;let t,r,i;try{i=e.topicIDs[0],t=JSON.parse(e.data),r=this._subscriptions[i]}catch(t){logger$2.error(t),logger$2.error("Couldn't parse pubsub message:",e)}r&&r.onMessage&&t&&await r.onMessage(i,t)}}var ipfsPubsub=IPFSPubsub,orbitDbPubsub=ipfsPubsub,immutable=extend,hasOwnProperty=Object.prototype.hasOwnProperty;function extend(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}function AbstractIterator(e){this.db=e,this._ended=!1,this._nexting=!1}AbstractIterator.prototype.next=function(e){var t=this;if("function"!=typeof e)throw new Error("next() requires a callback argument");return t._ended?(process.nextTick(e,new Error("cannot call next() after end()")),t):t._nexting?(process.nextTick(e,new Error("cannot call next() before previous next() has completed")),t):(t._nexting=!0,t._next(function(){t._nexting=!1,e.apply(null,arguments)}),t)},AbstractIterator.prototype._next=function(e){process.nextTick(e)},AbstractIterator.prototype.end=function(e){if("function"!=typeof e)throw new Error("end() requires a callback argument");if(this._ended)return process.nextTick(e,new Error("end() already called on iterator"));this._ended=!0,this._end(e)},AbstractIterator.prototype._end=function(e){process.nextTick(e)};var abstractIterator=AbstractIterator;function AbstractChainedBatch(e){this._db=e,this._operations=[],this._written=!1}AbstractChainedBatch.prototype._serializeKey=function(e){return this._db._serializeKey(e)},AbstractChainedBatch.prototype._serializeValue=function(e){return this._db._serializeValue(e)},AbstractChainedBatch.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},AbstractChainedBatch.prototype.put=function(e,t){this._checkWritten();var r=this._db._checkKey(e,"key");if(r)throw r;return e=this._serializeKey(e),t=this._serializeValue(t),this._put(e,t),this},AbstractChainedBatch.prototype._put=function(e,t){this._operations.push({type:"put",key:e,value:t})},AbstractChainedBatch.prototype.del=function(e){this._checkWritten();var t=this._db._checkKey(e,"key");if(t)throw t;return e=this._serializeKey(e),this._del(e),this},AbstractChainedBatch.prototype._del=function(e){this._operations.push({type:"del",key:e})},AbstractChainedBatch.prototype.clear=function(){return this._checkWritten(),this._operations=[],this._clear(),this},AbstractChainedBatch.prototype._clear=function(){},AbstractChainedBatch.prototype.write=function(e,t){if(this._checkWritten(),"function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("write() requires a callback argument");return"object"!=typeof e&&(e={}),this._written=!0,"function"==typeof this._write?this._write(t):"function"==typeof this._db._batch?this._db._batch(this._operations,e,t):void process.nextTick(t)};var abstractChainedBatch=AbstractChainedBatch,hasOwnProperty$1=Object.prototype.hasOwnProperty,rangeOptions="start end gt gte lt lte".split(" ");function AbstractLevelDOWN(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.status="new"}function cleanRangeOptions(e){var t={};for(var r in e)hasOwnProperty$1.call(e,r)&&(isRangeOption(r)&&isEmptyRangeOption(e[r])||(t[r]=e[r]));return t}function isRangeOption(e){return-1!==rangeOptions.indexOf(e)}function isEmptyRangeOption(e){return""===e||null==e||isEmptyBuffer(e)}function isEmptyBuffer(e){return Buffer.isBuffer(e)&&0===e.length}AbstractLevelDOWN.prototype.open=function(e,t){var r=this,i=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"!=typeof e&&(e={}),e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists,this.status="opening",this._open(e,function(e){if(e)return r.status=i,t(e);r.status="open",t()})},AbstractLevelDOWN.prototype._open=function(e,t){process.nextTick(t)},AbstractLevelDOWN.prototype.close=function(e){var t=this,r=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");this.status="closing",this._close(function(i){if(i)return t.status=r,e(i);t.status="closed",e()})},AbstractLevelDOWN.prototype._close=function(e){process.nextTick(e)},AbstractLevelDOWN.prototype.get=function(e,t,r){if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("get() requires a callback argument");var i=this._checkKey(e,"key");if(i)return process.nextTick(r,i);e=this._serializeKey(e),"object"!=typeof t&&(t={}),t.asBuffer=!1!==t.asBuffer,this._get(e,t,r)},AbstractLevelDOWN.prototype._get=function(e,t,r){process.nextTick(function(){r(new Error("NotFound"))})},AbstractLevelDOWN.prototype.put=function(e,t,r,i){if("function"==typeof r&&(i=r),"function"!=typeof i)throw new Error("put() requires a callback argument");var n=this._checkKey(e,"key");if(n)return process.nextTick(i,n);e=this._serializeKey(e),t=this._serializeValue(t),"object"!=typeof r&&(r={}),this._put(e,t,r,i)},AbstractLevelDOWN.prototype._put=function(e,t,r,i){process.nextTick(i)},AbstractLevelDOWN.prototype.del=function(e,t,r){if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("del() requires a callback argument");var i=this._checkKey(e,"key");if(i)return process.nextTick(r,i);e=this._serializeKey(e),"object"!=typeof t&&(t={}),this._del(e,t,r)},AbstractLevelDOWN.prototype._del=function(e,t,r){process.nextTick(r)},AbstractLevelDOWN.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(r=t),"function"==typeof e&&(r=e),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return process.nextTick(r,new Error("batch(array) requires an array argument"));t&&"object"==typeof t||(t={});for(var i=new Array(e.length),n=0;n<e.length;n++){if("object"!=typeof e[n]||null===e[n])return process.nextTick(r,new Error("batch(array) element must be an object and not `null`"));var s=immutable(e[n]);if("put"!==s.type&&"del"!==s.type)return process.nextTick(r,new Error("`type` must be 'put' or 'del'"));var a=this._checkKey(s.key,"key");if(a)return process.nextTick(r,a);s.key=this._serializeKey(s.key),"put"===s.type&&(s.value=this._serializeValue(s.value)),i[n]=s}this._batch(i,t,r)},AbstractLevelDOWN.prototype._batch=function(e,t,r){process.nextTick(r)},AbstractLevelDOWN.prototype._setupIteratorOptions=function(e){return(e=cleanRangeOptions(e)).reverse=!!e.reverse,e.keys=!1!==e.keys,e.values=!1!==e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=!1!==e.keyAsBuffer,e.valueAsBuffer=!1!==e.valueAsBuffer,e},AbstractLevelDOWN.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),this._iterator(e)},AbstractLevelDOWN.prototype._iterator=function(e){return new abstractIterator(this)},AbstractLevelDOWN.prototype._chainedBatch=function(){return new abstractChainedBatch(this)},AbstractLevelDOWN.prototype._serializeKey=function(e){return Buffer.isBuffer(e)?e:String(e)},AbstractLevelDOWN.prototype._serializeValue=function(e){return null==e?"":(Buffer.isBuffer(e),e)},AbstractLevelDOWN.prototype._checkKey=function(e,t){return null==e?new Error(t+" cannot be `null` or `undefined`"):Buffer.isBuffer(e)&&0===e.length?new Error(t+" cannot be an empty Buffer"):""===String(e)?new Error(t+" cannot be an empty String"):void 0};var abstractLeveldown=AbstractLevelDOWN,AbstractLevelDOWN$1=abstractLeveldown,AbstractIterator$1=abstractIterator,AbstractChainedBatch$1=abstractChainedBatch,abstractLeveldown$1={AbstractLevelDOWN:AbstractLevelDOWN$1,AbstractIterator:AbstractIterator$1,AbstractChainedBatch:AbstractChainedBatch$1},ltgt=createCommonjsModule(function(e,t){function r(e){return void 0!==e&&""!==e}function i(e,t){return Object.hasOwnProperty.call(e,t)}function n(e,t){return Object.hasOwnProperty.call(e,t)&&t}t.compare=function(e,t){if(Buffer.isBuffer(e)){for(var r=Math.min(e.length,t.length),i=0;i<r;i++){var n=e[i]-t[i];if(n)return n}return e.length-t.length}return e<t?-1:e>t?1:0};var s=t.lowerBoundKey=function(e){return n(e,"gt")||n(e,"gte")||n(e,"min")||(e.reverse?n(e,"end"):n(e,"start"))||void 0},a=t.lowerBound=function(e,t){var r=s(e);return r?e[r]:t},o=t.lowerBoundInclusive=function(e){return!i(e,"gt")},d=t.upperBoundInclusive=function(e){return!i(e,"lt")},f=t.lowerBoundExclusive=function(e){return!o(e)},c=t.upperBoundExclusive=function(e){return!d(e)},h=t.upperBoundKey=function(e){return n(e,"lt")||n(e,"lte")||n(e,"max")||(e.reverse?n(e,"start"):n(e,"end"))||void 0},u=t.upperBound=function(e,t){var r=h(e);return r?e[r]:t};function l(e){return e}t.start=function(e,t){return e.reverse?u(e,t):a(e,t)},t.end=function(e,t){return e.reverse?a(e,t):u(e,t)},t.startInclusive=function(e){return e.reverse?d(e):o(e)},t.endInclusive=function(e){return e.reverse?o(e):d(e)},t.toLtgt=function(e,r,n,s,a){r=r||{},n=n||l;var o=arguments.length>3,d=t.lowerBoundKey(e),f=t.upperBoundKey(e);return d?"gt"===d?r.gt=n(e.gt,!1):r.gte=n(e[d],!1):o&&(r.gte=n(s,!1)),f?"lt"===f?r.lt=n(e.lt,!0):r.lte=n(e[f],!0):o&&(r.lte=n(a,!0)),null!=e.reverse&&(r.reverse=!!e.reverse),i(r,"max")&&delete r.max,i(r,"min")&&delete r.min,i(r,"start")&&delete r.start,i(r,"end")&&delete r.end,r},t.contains=function(e,i,n){n=n||t.compare;var s=a(e);if(r(s)&&((o=n(i,s))<0||0===o&&f(e)))return!1;var o,d=u(e);if(r(d)&&((o=n(i,d))>0||0===o&&c(e)))return!1;return!0},t.filter=function(e,r){return function(i){return t.contains(e,i,r)}}}),ltgt_1=ltgt.compare,ltgt_2=ltgt.lowerBoundKey,ltgt_3=ltgt.lowerBound,ltgt_4=ltgt.lowerBoundInclusive,ltgt_5=ltgt.upperBoundInclusive,ltgt_6=ltgt.lowerBoundExclusive,ltgt_7=ltgt.upperBoundExclusive,ltgt_8=ltgt.upperBoundKey,ltgt_9=ltgt.upperBound,ltgt_10=ltgt.start,ltgt_11=ltgt.end,ltgt_12=ltgt.startInclusive,ltgt_13=ltgt.endInclusive,ltgt_14=ltgt.toLtgt,ltgt_15=ltgt.contains,ltgt_16=ltgt.filter,isTypedarray=isTypedArray;isTypedArray.strict=isStrictTypedArray,isTypedArray.loose=isLooseTypedArray;var toString$1=Object.prototype.toString,names={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function isTypedArray(e){return isStrictTypedArray(e)||isLooseTypedArray(e)}function isStrictTypedArray(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function isLooseTypedArray(e){return names[toString$1.call(e)]}var isTypedArray$1=isTypedarray.strict,typedarrayToBuffer=function(e){if(isTypedArray$1(e)){var t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return Buffer.from(e)},mixedToBuffer=function(e){return e instanceof Uint8Array?typedarrayToBuffer(e):e instanceof ArrayBuffer?Buffer.from(e):Buffer.from(String(e))},immediateBrowser$$1=immediateBrowser$$1,AbstractIterator$2=abstractLeveldown$1.AbstractIterator,noop=function(){},iterator=Iterator;function Iterator(e,t,r){if(AbstractIterator$2.call(this,e),this._limit=r.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keyAsBuffer=r.keyAsBuffer,this._valueAsBuffer=r.valueAsBuffer,0!==this._limit){try{var i=this.createKeyRange(r)}catch(e){return void(this._completed=!0)}this.createIterator(t,i,r.reverse)}else this._completed=!0}inherits_browser(Iterator,AbstractIterator$2),Iterator.prototype.createKeyRange=function(e){var t=ltgt.lowerBound(e),r=ltgt.upperBound(e),i=ltgt.lowerBoundExclusive(e),n=ltgt.upperBoundExclusive(e);return void 0!==t&&void 0!==r?IDBKeyRange.bound(t,r,i,n):void 0!==t?IDBKeyRange.lowerBound(t,i):void 0!==r?IDBKeyRange.upperBound(r,n):null},Iterator.prototype.createIterator=function(e,t,r){var i=this,n=this.db.transaction([e],"readonly");n.objectStore(e).openCursor(t,r?"prev":"next").onsuccess=function(e){var t=e.target.result;t&&i.onItem(t)},this._transaction=n,n.onabort=function(){i.onAbort(i._transaction.error||new Error("aborted by user"))},n.oncomplete=function(){i.onComplete()}},Iterator.prototype.onItem=function(e){this._cache.push(e.key,e.value),(this._limit<=0||++this._count<this._limit)&&e.continue(),this.maybeNext()},Iterator.prototype.onAbort=function(e){this._aborted=!0,this._error=e,this.maybeNext()},Iterator.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},Iterator.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},Iterator.prototype._next=function(e){if(this._aborted){this._error;this._error=null}else if(this._cache.length>0){var t=this._cache.shift(),r=this._cache.shift();this._keyAsBuffer&&(t=mixedToBuffer(t)),this._valueAsBuffer&&(r=mixedToBuffer(r))}else this._completed||(this._callback=e)},Iterator.prototype._end=function(e){if(this._aborted||this._completed)this._error;else this.onItem=noop,this.onAbort=e,this.onComplete=e};var support=createCommonjsModule(function(e,t){t.test=function(e){return function(t){try{return t.cmp(e,0),!0}catch(e){return!1}}},t.binaryKeys=t.test(new Uint8Array(0)),t.arrayKeys=t.test([1])}),support_1=support.test,support_2=support.binaryKeys,support_3=support.arrayKeys,levelJs=Level,AbstractLevelDOWN$2=abstractLeveldown$1.AbstractLevelDOWN,DEFAULT_PREFIX="level-js-";function Level(e,t){if(!(this instanceof Level))return new Level(e,t);AbstractLevelDOWN$2.call(this,e),t=t||{},this.prefix=t.prefix||DEFAULT_PREFIX,this.version=parseInt(t.version||1,10)}inherits_browser(Level,AbstractLevelDOWN$2),Level.binaryKeys=support.binaryKeys(indexedDB),Level.arrayKeys=support.arrayKeys(indexedDB),Level.prototype._open=function(e,t){var r=indexedDB.open(this.prefix+this.location,this.version),i=this;r.onerror=function(){t(r.error||new Error("unknown error"))},r.onsuccess=function(){i.db=r.result,t()},r.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(i.location)||t.createObjectStore(i.location)}},Level.prototype.store=function(e){return this.db.transaction([this.location],e).objectStore(this.location)},Level.prototype.await=function(e,t){var r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}},Level.prototype._get=function(e,t,r){var i=this.store("readonly");try{var n=i.get(e)}catch(e){return immediateBrowser$$1(function(){r(e)})}this.await(n,function(e,i){return e?r(e):void 0===i?r(new Error("NotFound")):(t.asBuffer&&(i=mixedToBuffer(i)),void r(null,i))})},Level.prototype._del=function(e,t,r){var i=this.store("readwrite");try{var n=i.delete(e)}catch(e){return immediateBrowser$$1(function(){r(e)})}this.await(n,r)},Level.prototype._put=function(e,t,r,i){var n=this.store("readwrite");try{var s=n.put(t,e)}catch(e){return immediateBrowser$$1(function(){i(e)})}this.await(s,i)},Level.prototype._serializeKey=function(e){return Buffer.isBuffer(e)?Level.binaryKeys?e:e.toString():Array.isArray(e)?Level.arrayKeys?e.map(this._serializeKey,this):String(e):"boolean"==typeof e||"number"==typeof e&&isNaN(e)?String(e):e},Level.prototype._serializeValue=function(e){return null==e?"":e},Level.prototype._iterator=function(e){return new iterator(this.db,this.location,e)},Level.prototype._batch=function(e,t,r){if(0===e.length)return immediateBrowser$$1(r);var i,n=this.store("readwrite"),s=n.transaction,a=0;s.onabort=function(){r(i||s.error||new Error("aborted by user"))},s.oncomplete=function(){r()},function t(){var r=e[a++],o=r.key;try{var d="del"===r.type?n.delete(o):n.put(r.value,o)}catch(e){return i=e,void s.abort()}a<e.length&&(d.onsuccess=t)}()},Level.prototype._close=function(e){this.db.close()},Level.destroy=function(e,t,r){"function"==typeof t&&(r=t,t=DEFAULT_PREFIX);var i=indexedDB.deleteDatabase(t+e);i.onsuccess=function(){r()},i.onerror=function(e){r(e)}};const logger$3=src.create("cache",{color:src.Colors.Magenta});src.setLogLevel("ERROR");let caches={};class Cache{constructor(e,t){this.path=t||"./orbitdb",this._storage=e,this._store=null}async open(){return logger$3.debug("open",this.path),this.store?Promise.resolve():new Promise((e,t)=>{const r=this._storage(this.path);r.open(i=>{if(i)return t(i);this._store=r,e()})})}async close(){return logger$3.debug("close",this.path),this._store?new Promise(e=>{this._store.close(t=>{if(t)return reject(t);this._store=null,delete caches[this.path],e()})}):Promise.resolve()}async destroy(){return logger$3.debug("destroy",this.path),new Promise((e,t)=>{this._storage.destroy(this.path,r=>{if(r)return t(r);e()})})}async get(e){return this._store||await this.open(),this._store.status&&"open"!==this._store.status?Promise.resolve(null):new Promise((t,r)=>{this._store.get(e,(e,i)=>{if(e&&-1===e.toString().indexOf("NotFoundError: Key not found in database")&&-1===e.toString().indexOf("NotFound"))return r(e);t(i?JSON.parse(i):null)})})}async set(e,t){return this._store||await this.open(),this._store.status&&"open"!==this._store.status?Promise.resolve():new Promise((r,i)=>{this._store.put(e,JSON.stringify(t),e=>{if(e&&-1===e.toString().indexOf("NotFoundError: Key not found in database")&&-1===e.toString().indexOf("NotFound"))return i(e);r()})})}async del(e){return this._store||await this.open(),new Promise((t,r)=>{this._store.del(e,e=>{if(e&&-1===e.toString().indexOf("NotFoundError: Key not found in database")&&-1===e.toString().indexOf("NotFound"))return r(e);t()})})}}var Cache_1=(e,t)=>({load:async(r,i)=>{logger$3.debug("load, database:",i.toString());const n=path.join(i.root,i.path),s=path.join(r,n);let a=caches[s];return a||(t&&t.sync&&t.sync(s),a=new Cache(e,s),await a.open(),caches[s]=a),a},close:async()=>{logger$3.debug("close all"),await Promise.all(Object.values(caches),e=>e.close()),caches={}}}),indexBrowser=Cache_1(levelJs),_from="elliptic@^6.2.3",_id="elliptic@6.4.0",_inBundle=!1,_integrity="sha1-ysmvh2LIWDYYcAPI3+GT5eLq5d8=",_location="/elliptic",_phantomChildren={},_requested={type:"range",registry:!0,raw:"elliptic@^6.2.3",name:"elliptic",escapedName:"elliptic",rawSpec:"^6.2.3",saveSpec:null,fetchSpec:"^6.2.3"},_requiredBy=["/secp256k1"],_resolved="https://registry.npmjs.org/elliptic/-/elliptic-6.4.0.tgz",_shasum="cac9af8762c85836187003c8dfe193e5e2eae5df",_spec="elliptic@^6.2.3",_where="/home/haoliang/Documents/Projects/maplicate-core/node_modules/secp256k1",author={name:"Fedor Indutny",email:"fedor@indutny.com"},bugs={url:"https://github.com/indutny/elliptic/issues"},bundleDependencies=!1,dependencies={"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},deprecated=!1,description="EC cryptography",devDependencies={brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},files=["lib"],homepage="https://github.com/indutny/elliptic",keywords=["EC","Elliptic","curve","Cryptography"],license="MIT",main="lib/elliptic.js",name="elliptic",repository={type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts={jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version="6.4.0",_package={_from:_from,_id:_id,_inBundle:_inBundle,_integrity:_integrity,_location:_location,_phantomChildren:_phantomChildren,_requested:_requested,_requiredBy:_requiredBy,_resolved:_resolved,_shasum:_shasum,_spec:_spec,_where:_where,author:author,bugs:bugs,bundleDependencies:bundleDependencies,dependencies:dependencies,deprecated:deprecated,description:description,devDependencies:devDependencies,files:files,homepage:homepage,keywords:keywords,license:license,main:main,name:name,repository:repository,scripts:scripts,version:version},_package$1=Object.freeze({_from:_from,_id:_id,_inBundle:_inBundle,_integrity:_integrity,_location:_location,_phantomChildren:_phantomChildren,_requested:_requested,_requiredBy:_requiredBy,_resolved:_resolved,_shasum:_shasum,_spec:_spec,_where:_where,author:author,bugs:bugs,bundleDependencies:bundleDependencies,dependencies:dependencies,deprecated:deprecated,description:description,devDependencies:devDependencies,files:files,homepage:homepage,keywords:keywords,license:license,main:main,name:name,repository:repository,scripts:scripts,version:version,default:_package}),bn=createCommonjsModule(function(e){!function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{s=require$$0.Buffer}catch(e){}function a(e,t,r){for(var i=0,n=Math.min(e.length,r),s=t;s<n;s++){var a=e.charCodeAt(s)-48;i<<=4,i|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return i}function o(e,t,r,i){for(var n=0,s=Math.min(e.length,r),a=t;a<s;a++){var o=e.charCodeAt(a)-48;n*=i,n+=o>=49?o-49+10:o>=17?o-17+10:o}return n}n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return e.cmp(t)<0?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&n++,16===t?this._parseHex(e,n):this._parseBase(e,t,n),"-"===e[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,a,o=0;if("be"===i)for(n=e.length-1,s=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);else if("le"===i)for(n=0,s=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);return this.strip()},n.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,s=0;for(r=e.length-6,i=0;r>=t;r-=6)n=a(e,r,r+6),this.words[i]|=n<<s&67108863,this.words[i+1]|=n>>>26-s&4194303,(s+=24)>=26&&(s-=26,i++);r+6!==t&&(n=a(e,t,r+6),this.words[i]|=n<<s&67108863,this.words[i+1]|=n>>>26-s&4194303),this.strip()},n.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var s=e.length-r,a=s%i,d=Math.min(s,s-a)+r,f=0,c=r;c<d;c+=i)f=o(e,c,c+i,t),this.imuln(n),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(0!==a){var h=1;for(f=o(e,c,e.length,t),c=0;c<a;c++)h*=t;this.imuln(h),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],s=0|t.words[0],a=n*s,o=67108863&a,d=a/67108864|0;r.words[0]=o;for(var f=1;f<i;f++){for(var c=d>>>26,h=67108863&d,u=Math.min(f,t.length-1),l=Math.max(0,f-e.length+1);l<=u;l++){var b=f-l|0;c+=(a=(n=0|e.words[b])*(s=0|t.words[l])+h)/67108864|0,h=67108863&a}r.words[f]=0|h,d=0|c}return 0!==d?r.words[f]=0|d:r.length--,r.strip()}n.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var n=0,s=0,a=0;a<this.length;a++){var o=this.words[a],h=(16777215&(o<<n|s)).toString(16);i=0!==(s=o>>>24-n&16777215)||a!==this.length-1?d[6-h.length]+h+i:h+i,(n+=2)>=26&&(n-=26,a--)}for(0!==s&&(i=s.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var u=f[e],l=c[e];i="";var b=this.clone();for(b.negative=0;!b.isZero();){var p=b.modn(l).toString(e);i=(b=b.idivn(l)).isZero()?p+i:d[u-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){var n=this.byteLength(),s=i||Math.max(1,n);r(n<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0"),this.strip();var a,o,d="le"===t,f=new e(s),c=this.clone();if(d){for(o=0;!c.isZero();o++)a=c.andln(255),c.iushrn(8),f[o]=a;for(;o<s;o++)f[o]=0}else{for(o=0;o<s-n;o++)f[o]=0;for(o=0;!c.isZero();o++)a=c.andln(255),c.iushrn(8),f[s-o-1]=a}return f},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},n.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},n.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},n.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,n=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},n.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,s=0;s<i.length;s++)t=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&t,n=t>>>26;for(;0!==n&&s<r.length;s++)t=(0|r.words[s])+n,this.words[s]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var s=0,a=0;a<i.length;a++)s=(t=(0|r.words[a])-(0|i.words[a])+s)>>26,this.words[a]=67108863&t;for(;0!==s&&a<r.length;a++)s=(t=(0|r.words[a])+s)>>26,this.words[a]=67108863&t;if(0===s&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var u=function(e,t,r){var i,n,s,a=e.words,o=t.words,d=r.words,f=0,c=0|a[0],h=8191&c,u=c>>>13,l=0|a[1],b=8191&l,p=l>>>13,m=0|a[2],g=8191&m,y=m>>>13,v=0|a[3],_=8191&v,w=v>>>13,S=0|a[4],k=8191&S,M=S>>>13,x=0|a[5],A=8191&x,$=x>>>13,E=0|a[6],B=8191&E,I=E>>>13,P=0|a[7],R=8191&P,O=P>>>13,C=0|a[8],D=8191&C,L=C>>>13,N=0|a[9],j=8191&N,T=N>>>13,q=0|o[0],z=8191&q,H=q>>>13,W=0|o[1],F=8191&W,K=W>>>13,U=0|o[2],J=8191&U,G=U>>>13,V=0|o[3],X=8191&V,Z=V>>>13,Y=0|o[4],Q=8191&Y,ee=Y>>>13,te=0|o[5],re=8191&te,ie=te>>>13,ne=0|o[6],se=8191&ne,ae=ne>>>13,oe=0|o[7],de=8191&oe,fe=oe>>>13,ce=0|o[8],he=8191&ce,ue=ce>>>13,le=0|o[9],be=8191&le,pe=le>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(f+(i=Math.imul(h,z))|0)+((8191&(n=(n=Math.imul(h,H))+Math.imul(u,z)|0))<<13)|0;f=((s=Math.imul(u,H))+(n>>>13)|0)+(me>>>26)|0,me&=67108863,i=Math.imul(b,z),n=(n=Math.imul(b,H))+Math.imul(p,z)|0,s=Math.imul(p,H);var ge=(f+(i=i+Math.imul(h,F)|0)|0)+((8191&(n=(n=n+Math.imul(h,K)|0)+Math.imul(u,F)|0))<<13)|0;f=((s=s+Math.imul(u,K)|0)+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(g,z),n=(n=Math.imul(g,H))+Math.imul(y,z)|0,s=Math.imul(y,H),i=i+Math.imul(b,F)|0,n=(n=n+Math.imul(b,K)|0)+Math.imul(p,F)|0,s=s+Math.imul(p,K)|0;var ye=(f+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,G)|0)+Math.imul(u,J)|0))<<13)|0;f=((s=s+Math.imul(u,G)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(_,z),n=(n=Math.imul(_,H))+Math.imul(w,z)|0,s=Math.imul(w,H),i=i+Math.imul(g,F)|0,n=(n=n+Math.imul(g,K)|0)+Math.imul(y,F)|0,s=s+Math.imul(y,K)|0,i=i+Math.imul(b,J)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(p,J)|0,s=s+Math.imul(p,G)|0;var ve=(f+(i=i+Math.imul(h,X)|0)|0)+((8191&(n=(n=n+Math.imul(h,Z)|0)+Math.imul(u,X)|0))<<13)|0;f=((s=s+Math.imul(u,Z)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(k,z),n=(n=Math.imul(k,H))+Math.imul(M,z)|0,s=Math.imul(M,H),i=i+Math.imul(_,F)|0,n=(n=n+Math.imul(_,K)|0)+Math.imul(w,F)|0,s=s+Math.imul(w,K)|0,i=i+Math.imul(g,J)|0,n=(n=n+Math.imul(g,G)|0)+Math.imul(y,J)|0,s=s+Math.imul(y,G)|0,i=i+Math.imul(b,X)|0,n=(n=n+Math.imul(b,Z)|0)+Math.imul(p,X)|0,s=s+Math.imul(p,Z)|0;var _e=(f+(i=i+Math.imul(h,Q)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(u,Q)|0))<<13)|0;f=((s=s+Math.imul(u,ee)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(A,z),n=(n=Math.imul(A,H))+Math.imul($,z)|0,s=Math.imul($,H),i=i+Math.imul(k,F)|0,n=(n=n+Math.imul(k,K)|0)+Math.imul(M,F)|0,s=s+Math.imul(M,K)|0,i=i+Math.imul(_,J)|0,n=(n=n+Math.imul(_,G)|0)+Math.imul(w,J)|0,s=s+Math.imul(w,G)|0,i=i+Math.imul(g,X)|0,n=(n=n+Math.imul(g,Z)|0)+Math.imul(y,X)|0,s=s+Math.imul(y,Z)|0,i=i+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,ee)|0)+Math.imul(p,Q)|0,s=s+Math.imul(p,ee)|0;var we=(f+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(u,re)|0))<<13)|0;f=((s=s+Math.imul(u,ie)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(B,z),n=(n=Math.imul(B,H))+Math.imul(I,z)|0,s=Math.imul(I,H),i=i+Math.imul(A,F)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul($,F)|0,s=s+Math.imul($,K)|0,i=i+Math.imul(k,J)|0,n=(n=n+Math.imul(k,G)|0)+Math.imul(M,J)|0,s=s+Math.imul(M,G)|0,i=i+Math.imul(_,X)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(w,X)|0,s=s+Math.imul(w,Z)|0,i=i+Math.imul(g,Q)|0,n=(n=n+Math.imul(g,ee)|0)+Math.imul(y,Q)|0,s=s+Math.imul(y,ee)|0,i=i+Math.imul(b,re)|0,n=(n=n+Math.imul(b,ie)|0)+Math.imul(p,re)|0,s=s+Math.imul(p,ie)|0;var Se=(f+(i=i+Math.imul(h,se)|0)|0)+((8191&(n=(n=n+Math.imul(h,ae)|0)+Math.imul(u,se)|0))<<13)|0;f=((s=s+Math.imul(u,ae)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(R,z),n=(n=Math.imul(R,H))+Math.imul(O,z)|0,s=Math.imul(O,H),i=i+Math.imul(B,F)|0,n=(n=n+Math.imul(B,K)|0)+Math.imul(I,F)|0,s=s+Math.imul(I,K)|0,i=i+Math.imul(A,J)|0,n=(n=n+Math.imul(A,G)|0)+Math.imul($,J)|0,s=s+Math.imul($,G)|0,i=i+Math.imul(k,X)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(M,X)|0,s=s+Math.imul(M,Z)|0,i=i+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,ee)|0)+Math.imul(w,Q)|0,s=s+Math.imul(w,ee)|0,i=i+Math.imul(g,re)|0,n=(n=n+Math.imul(g,ie)|0)+Math.imul(y,re)|0,s=s+Math.imul(y,ie)|0,i=i+Math.imul(b,se)|0,n=(n=n+Math.imul(b,ae)|0)+Math.imul(p,se)|0,s=s+Math.imul(p,ae)|0;var ke=(f+(i=i+Math.imul(h,de)|0)|0)+((8191&(n=(n=n+Math.imul(h,fe)|0)+Math.imul(u,de)|0))<<13)|0;f=((s=s+Math.imul(u,fe)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(D,z),n=(n=Math.imul(D,H))+Math.imul(L,z)|0,s=Math.imul(L,H),i=i+Math.imul(R,F)|0,n=(n=n+Math.imul(R,K)|0)+Math.imul(O,F)|0,s=s+Math.imul(O,K)|0,i=i+Math.imul(B,J)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(I,J)|0,s=s+Math.imul(I,G)|0,i=i+Math.imul(A,X)|0,n=(n=n+Math.imul(A,Z)|0)+Math.imul($,X)|0,s=s+Math.imul($,Z)|0,i=i+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,ee)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,ee)|0,i=i+Math.imul(_,re)|0,n=(n=n+Math.imul(_,ie)|0)+Math.imul(w,re)|0,s=s+Math.imul(w,ie)|0,i=i+Math.imul(g,se)|0,n=(n=n+Math.imul(g,ae)|0)+Math.imul(y,se)|0,s=s+Math.imul(y,ae)|0,i=i+Math.imul(b,de)|0,n=(n=n+Math.imul(b,fe)|0)+Math.imul(p,de)|0,s=s+Math.imul(p,fe)|0;var Me=(f+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,ue)|0)+Math.imul(u,he)|0))<<13)|0;f=((s=s+Math.imul(u,ue)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(j,z),n=(n=Math.imul(j,H))+Math.imul(T,z)|0,s=Math.imul(T,H),i=i+Math.imul(D,F)|0,n=(n=n+Math.imul(D,K)|0)+Math.imul(L,F)|0,s=s+Math.imul(L,K)|0,i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(O,J)|0,s=s+Math.imul(O,G)|0,i=i+Math.imul(B,X)|0,n=(n=n+Math.imul(B,Z)|0)+Math.imul(I,X)|0,s=s+Math.imul(I,Z)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,ee)|0)+Math.imul($,Q)|0,s=s+Math.imul($,ee)|0,i=i+Math.imul(k,re)|0,n=(n=n+Math.imul(k,ie)|0)+Math.imul(M,re)|0,s=s+Math.imul(M,ie)|0,i=i+Math.imul(_,se)|0,n=(n=n+Math.imul(_,ae)|0)+Math.imul(w,se)|0,s=s+Math.imul(w,ae)|0,i=i+Math.imul(g,de)|0,n=(n=n+Math.imul(g,fe)|0)+Math.imul(y,de)|0,s=s+Math.imul(y,fe)|0,i=i+Math.imul(b,he)|0,n=(n=n+Math.imul(b,ue)|0)+Math.imul(p,he)|0,s=s+Math.imul(p,ue)|0;var xe=(f+(i=i+Math.imul(h,be)|0)|0)+((8191&(n=(n=n+Math.imul(h,pe)|0)+Math.imul(u,be)|0))<<13)|0;f=((s=s+Math.imul(u,pe)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(j,F),n=(n=Math.imul(j,K))+Math.imul(T,F)|0,s=Math.imul(T,K),i=i+Math.imul(D,J)|0,n=(n=n+Math.imul(D,G)|0)+Math.imul(L,J)|0,s=s+Math.imul(L,G)|0,i=i+Math.imul(R,X)|0,n=(n=n+Math.imul(R,Z)|0)+Math.imul(O,X)|0,s=s+Math.imul(O,Z)|0,i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,ee)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,ee)|0,i=i+Math.imul(A,re)|0,n=(n=n+Math.imul(A,ie)|0)+Math.imul($,re)|0,s=s+Math.imul($,ie)|0,i=i+Math.imul(k,se)|0,n=(n=n+Math.imul(k,ae)|0)+Math.imul(M,se)|0,s=s+Math.imul(M,ae)|0,i=i+Math.imul(_,de)|0,n=(n=n+Math.imul(_,fe)|0)+Math.imul(w,de)|0,s=s+Math.imul(w,fe)|0,i=i+Math.imul(g,he)|0,n=(n=n+Math.imul(g,ue)|0)+Math.imul(y,he)|0,s=s+Math.imul(y,ue)|0;var Ae=(f+(i=i+Math.imul(b,be)|0)|0)+((8191&(n=(n=n+Math.imul(b,pe)|0)+Math.imul(p,be)|0))<<13)|0;f=((s=s+Math.imul(p,pe)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(j,J),n=(n=Math.imul(j,G))+Math.imul(T,J)|0,s=Math.imul(T,G),i=i+Math.imul(D,X)|0,n=(n=n+Math.imul(D,Z)|0)+Math.imul(L,X)|0,s=s+Math.imul(L,Z)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(O,Q)|0,s=s+Math.imul(O,ee)|0,i=i+Math.imul(B,re)|0,n=(n=n+Math.imul(B,ie)|0)+Math.imul(I,re)|0,s=s+Math.imul(I,ie)|0,i=i+Math.imul(A,se)|0,n=(n=n+Math.imul(A,ae)|0)+Math.imul($,se)|0,s=s+Math.imul($,ae)|0,i=i+Math.imul(k,de)|0,n=(n=n+Math.imul(k,fe)|0)+Math.imul(M,de)|0,s=s+Math.imul(M,fe)|0,i=i+Math.imul(_,he)|0,n=(n=n+Math.imul(_,ue)|0)+Math.imul(w,he)|0,s=s+Math.imul(w,ue)|0;var $e=(f+(i=i+Math.imul(g,be)|0)|0)+((8191&(n=(n=n+Math.imul(g,pe)|0)+Math.imul(y,be)|0))<<13)|0;f=((s=s+Math.imul(y,pe)|0)+(n>>>13)|0)+($e>>>26)|0,$e&=67108863,i=Math.imul(j,X),n=(n=Math.imul(j,Z))+Math.imul(T,X)|0,s=Math.imul(T,Z),i=i+Math.imul(D,Q)|0,n=(n=n+Math.imul(D,ee)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,ee)|0,i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(O,re)|0,s=s+Math.imul(O,ie)|0,i=i+Math.imul(B,se)|0,n=(n=n+Math.imul(B,ae)|0)+Math.imul(I,se)|0,s=s+Math.imul(I,ae)|0,i=i+Math.imul(A,de)|0,n=(n=n+Math.imul(A,fe)|0)+Math.imul($,de)|0,s=s+Math.imul($,fe)|0,i=i+Math.imul(k,he)|0,n=(n=n+Math.imul(k,ue)|0)+Math.imul(M,he)|0,s=s+Math.imul(M,ue)|0;var Ee=(f+(i=i+Math.imul(_,be)|0)|0)+((8191&(n=(n=n+Math.imul(_,pe)|0)+Math.imul(w,be)|0))<<13)|0;f=((s=s+Math.imul(w,pe)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(j,Q),n=(n=Math.imul(j,ee))+Math.imul(T,Q)|0,s=Math.imul(T,ee),i=i+Math.imul(D,re)|0,n=(n=n+Math.imul(D,ie)|0)+Math.imul(L,re)|0,s=s+Math.imul(L,ie)|0,i=i+Math.imul(R,se)|0,n=(n=n+Math.imul(R,ae)|0)+Math.imul(O,se)|0,s=s+Math.imul(O,ae)|0,i=i+Math.imul(B,de)|0,n=(n=n+Math.imul(B,fe)|0)+Math.imul(I,de)|0,s=s+Math.imul(I,fe)|0,i=i+Math.imul(A,he)|0,n=(n=n+Math.imul(A,ue)|0)+Math.imul($,he)|0,s=s+Math.imul($,ue)|0;var Be=(f+(i=i+Math.imul(k,be)|0)|0)+((8191&(n=(n=n+Math.imul(k,pe)|0)+Math.imul(M,be)|0))<<13)|0;f=((s=s+Math.imul(M,pe)|0)+(n>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(j,re),n=(n=Math.imul(j,ie))+Math.imul(T,re)|0,s=Math.imul(T,ie),i=i+Math.imul(D,se)|0,n=(n=n+Math.imul(D,ae)|0)+Math.imul(L,se)|0,s=s+Math.imul(L,ae)|0,i=i+Math.imul(R,de)|0,n=(n=n+Math.imul(R,fe)|0)+Math.imul(O,de)|0,s=s+Math.imul(O,fe)|0,i=i+Math.imul(B,he)|0,n=(n=n+Math.imul(B,ue)|0)+Math.imul(I,he)|0,s=s+Math.imul(I,ue)|0;var Ie=(f+(i=i+Math.imul(A,be)|0)|0)+((8191&(n=(n=n+Math.imul(A,pe)|0)+Math.imul($,be)|0))<<13)|0;f=((s=s+Math.imul($,pe)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(j,se),n=(n=Math.imul(j,ae))+Math.imul(T,se)|0,s=Math.imul(T,ae),i=i+Math.imul(D,de)|0,n=(n=n+Math.imul(D,fe)|0)+Math.imul(L,de)|0,s=s+Math.imul(L,fe)|0,i=i+Math.imul(R,he)|0,n=(n=n+Math.imul(R,ue)|0)+Math.imul(O,he)|0,s=s+Math.imul(O,ue)|0;var Pe=(f+(i=i+Math.imul(B,be)|0)|0)+((8191&(n=(n=n+Math.imul(B,pe)|0)+Math.imul(I,be)|0))<<13)|0;f=((s=s+Math.imul(I,pe)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(j,de),n=(n=Math.imul(j,fe))+Math.imul(T,de)|0,s=Math.imul(T,fe),i=i+Math.imul(D,he)|0,n=(n=n+Math.imul(D,ue)|0)+Math.imul(L,he)|0,s=s+Math.imul(L,ue)|0;var Re=(f+(i=i+Math.imul(R,be)|0)|0)+((8191&(n=(n=n+Math.imul(R,pe)|0)+Math.imul(O,be)|0))<<13)|0;f=((s=s+Math.imul(O,pe)|0)+(n>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(j,he),n=(n=Math.imul(j,ue))+Math.imul(T,he)|0,s=Math.imul(T,ue);var Oe=(f+(i=i+Math.imul(D,be)|0)|0)+((8191&(n=(n=n+Math.imul(D,pe)|0)+Math.imul(L,be)|0))<<13)|0;f=((s=s+Math.imul(L,pe)|0)+(n>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Ce=(f+(i=Math.imul(j,be))|0)+((8191&(n=(n=Math.imul(j,pe))+Math.imul(T,be)|0))<<13)|0;return f=((s=Math.imul(T,pe))+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,d[0]=me,d[1]=ge,d[2]=ye,d[3]=ve,d[4]=_e,d[5]=we,d[6]=Se,d[7]=ke,d[8]=Me,d[9]=xe,d[10]=Ae,d[11]=$e,d[12]=Ee,d[13]=Be,d[14]=Ie,d[15]=Pe,d[16]=Re,d[17]=Oe,d[18]=Ce,0!==f&&(d[19]=f,r.length++),r};function l(e,t,r){return(new b).mulp(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(u=h),n.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?u(this,e,t):r<63?h(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var a=n;n=0;for(var o=67108863&i,d=Math.min(s,t.length-1),f=Math.max(0,s-e.length+1);f<=d;f++){var c=s-f,h=(0|e.words[c])*(0|t.words[f]),u=67108863&h;o=67108863&(u=u+o|0),n+=(a=(a=a+(h/67108864|0)|0)+(u>>>26)|0)>>>26,a&=67108863}r.words[s]=o,i=a,a=n}return 0!==i?r.words[s]=i:r.length--,r.strip()}(this,e,t):l(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=n.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},b.prototype.permute=function(e,t,r,i,n,s){for(var a=0;a<s;a++)i[a]=t[e[a]],n[a]=r[e[a]]},b.prototype.transform=function(e,t,r,i,n,s){this.permute(s,e,t,r,i,n);for(var a=1;a<n;a<<=1)for(var o=a<<1,d=Math.cos(2*Math.PI/o),f=Math.sin(2*Math.PI/o),c=0;c<n;c+=o)for(var h=d,u=f,l=0;l<a;l++){var b=r[c+l],p=i[c+l],m=r[c+l+a],g=i[c+l+a],y=h*m-u*g;g=h*g+u*m,m=y,r[c+l]=b+m,i[c+l]=p+g,r[c+l+a]=b-m,i[c+l+a]=p-g,l!==o&&(y=d*h-f*u,u=d*u+f*h,h=y)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},b.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},b.prototype.convert13b=function(e,t,i,n){for(var s=0,a=0;a<t;a++)s+=0|e[a],i[2*a]=8191&s,s>>>=13,i[2*a+1]=8191&s,s>>>=13;for(a=2*t;a<n;++a)i[a]=0;r(0===s),r(0==(-8192&s))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),s=this.stub(i),a=new Array(i),o=new Array(i),d=new Array(i),f=new Array(i),c=new Array(i),h=new Array(i),u=r.words;u.length=i,this.convert13b(e.words,e.length,a,i),this.convert13b(t.words,t.length,f,i),this.transform(a,s,o,d,i,n),this.transform(f,s,c,h,i,n);for(var l=0;l<i;l++){var b=o[l]*c[l]-d[l]*h[l];d[l]=o[l]*h[l]+d[l]*c[l],o[l]=b}return this.conjugate(o,d,i),this.transform(o,d,u,s,i,n),this.conjugate(u,s,i),this.normalize13b(u,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),l(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,i=0;i<this.length;i++){var n=(0|this.words[i])*e,s=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=s>>>26,this.words[i]=67108863&s}return 0!==t&&(this.words[i]=t,this.length++),this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new n(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var s=r.sqr();i<t.length;i++,s=s.sqr())0!==t[i]&&(r=r.mul(s));return r},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,n=(e-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(t=0;t<this.length;t++){var o=this.words[t]&s,d=(0|this.words[t])-o<<i;this.words[t]=d|a,a=o>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var s=e%26,a=Math.min((e-s)/26,this.length),o=67108863^67108863>>>s<<s,d=i;if(n-=a,n=Math.max(0,n),d){for(var f=0;f<a;f++)d.words[f]=this.words[f];d.length=a}if(0===a);else if(this.length>a)for(this.length-=a,f=0;f<this.length;f++)this.words[f]=this.words[f+a];else this.words[0]=0,this.length=1;var c=0;for(f=this.length-1;f>=0&&(0!==c||f>=n);f--){var h=0|this.words[f];this.words[f]=c<<26-s|h>>>s,c=h&o}return d&&0!==c&&(d.words[d.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,n=1<<t;return!(this.length<=i)&&!!(this.words[i]&n)},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var n,s,a=e.length+i;this._expand(a);var o=0;for(n=0;n<e.length;n++){s=(0|this.words[n+i])+o;var d=(0|e.words[n])*t;o=((s-=67108863&d)>>26)-(d/67108864|0),this.words[n+i]=67108863&s}for(;n<this.length-i;n++)o=(s=(0|this.words[n+i])+o)>>26,this.words[n+i]=67108863&s;if(0===o)return this.strip();for(r(-1===o),o=0,n=0;n<this.length;n++)o=(s=-(0|this.words[n])+o)>>26,this.words[n]=67108863&s;return this.negative=1,this.strip()},n.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),s=e,a=0|s.words[s.length-1];0!==(r=26-this._countBits(a))&&(s=s.ushln(r),i.iushln(r),a=0|s.words[s.length-1]);var o,d=i.length-s.length;if("mod"!==t){(o=new n(null)).length=d+1,o.words=new Array(o.length);for(var f=0;f<o.length;f++)o.words[f]=0}var c=i.clone()._ishlnsubmul(s,1,d);0===c.negative&&(i=c,o&&(o.words[d]=1));for(var h=d-1;h>=0;h--){var u=67108864*(0|i.words[s.length+h])+(0|i.words[s.length+h-1]);for(u=Math.min(u/a|0,67108863),i._ishlnsubmul(s,u,h);0!==i.negative;)u--,i.negative=0,i._ishlnsubmul(s,1,h),i.isZero()||(i.negative^=1);o&&(o.words[h]=u)}return o&&o.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:o||null,mod:i}},n.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(s=o.div.neg()),"div"!==t&&(a=o.mod.neg(),i&&0!==a.negative&&a.iadd(e)),{div:s,mod:a}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(s=o.div.neg()),{div:s,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(a=o.mod.neg(),i&&0!==a.negative&&a.isub(e)),{div:o.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t);var s,a,o},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,i=0,n=this.length-1;n>=0;n--)i=(t*i+(0|this.words[n]))%e;return i},n.prototype.idivn=function(e){r(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*t;this.words[i]=n/e|0,t=n%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s=new n(1),a=new n(0),o=new n(0),d=new n(1),f=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++f;for(var c=i.clone(),h=t.clone();!t.isZero();){for(var u=0,l=1;0==(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)(s.isOdd()||a.isOdd())&&(s.iadd(c),a.isub(h)),s.iushrn(1),a.iushrn(1);for(var b=0,p=1;0==(i.words[0]&p)&&b<26;++b,p<<=1);if(b>0)for(i.iushrn(b);b-- >0;)(o.isOdd()||d.isOdd())&&(o.iadd(c),d.isub(h)),o.iushrn(1),d.iushrn(1);t.cmp(i)>=0?(t.isub(i),s.isub(o),a.isub(d)):(i.isub(t),o.isub(s),d.isub(a))}return{a:o,b:d,gcd:i.iushln(f)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s,a=new n(1),o=new n(0),d=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var f=0,c=1;0==(t.words[0]&c)&&f<26;++f,c<<=1);if(f>0)for(t.iushrn(f);f-- >0;)a.isOdd()&&a.iadd(d),a.iushrn(1);for(var h=0,u=1;0==(i.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(i.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(d),o.iushrn(1);t.cmp(i)>=0?(t.isub(i),a.isub(o)):(i.isub(t),o.isub(a))}return(s=0===t.cmpn(1)?a:o).cmpn(0)<0&&s.iadd(e),s},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var s=t;t=r,r=s}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,a=i;0!==s&&a<this.length;a++){var o=0|this.words[a];s=(o+=s)>>>26,o&=67108863,this.words[a]=o}return 0!==s&&(this.words[a]=s,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return-1===this.cmpn(e)},n.prototype.lt=function(e){return-1===this.cmp(e)},n.prototype.lten=function(e){return this.cmpn(e)<=0},n.prototype.lte=function(e){return this.cmp(e)<=0},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new w(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var p={k256:null,p224:null,p192:null,p25519:null};function m(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function w(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){w.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r.strip(),r},m.prototype.split=function(e,t){e.iushrn(this.n,0,t)},m.prototype.imulK=function(e){return e.imul(this.k)},i(g,m),g.prototype.split=function(e,t){for(var r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var n=e.words[9];for(t.words[t.length++]=4194303&n,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,e.words[i-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},g.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(y,m),i(v,m),i(_,m),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){if(p[e])return p[e];var t;if("k256"===e)t=new g;else if("p224"===e)t=new y;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return p[e]=t,t},w.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},w.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},w.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},w.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},w.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},w.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},w.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},w.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},w.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},w.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},w.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},w.prototype.isqr=function(e){return this.imul(e,e.clone())},w.prototype.sqr=function(e){return this.mul(e,e)},w.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var s=this.m.subn(1),a=0;!s.isZero()&&0===s.andln(1);)a++,s.iushrn(1);r(!s.isZero());var o=new n(1).toRed(this),d=o.redNeg(),f=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);0!==this.pow(c,f).cmp(d);)c.redIAdd(d);for(var h=this.pow(c,s),u=this.pow(e,s.addn(1).iushrn(1)),l=this.pow(e,s),b=a;0!==l.cmp(o);){for(var p=l,m=0;0!==p.cmp(o);m++)p=p.redSqr();r(m<b);var g=this.pow(h,new n(1).iushln(b-m-1));u=u.redMul(g),h=g.redSqr(),l=l.redMul(h),b=m}return u},w.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},w.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var s=r[0],a=0,o=0,d=t.bitLength()%26;for(0===d&&(d=26),i=t.length-1;i>=0;i--){for(var f=t.words[i],c=d-1;c>=0;c--){var h=f>>c&1;s!==r[0]&&(s=this.sqr(s)),0!==h||0!==a?(a<<=1,a|=h,(4===++o||0===i&&0===c)&&(s=this.mul(s,r[a]),o=0,a=0)):o=0}d=26}return s},w.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},w.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new S(e)},i(S,w),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(i).iushrn(this.shift),a=s;return s.cmp(this.m)>=0?a=s.isub(this.m):s.cmpn(0)<0&&(a=s.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,commonjsGlobal)}),minimalisticAssert=assert;function assert(e,t){if(!e)throw new Error(t||"Assertion failed")}assert.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var r,utils_1=createCommonjsModule(function(e,t){var r=t;function i(e){return 1===e.length?"0"+e:e}function n(e){for(var t="",r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16));else for(i=0;i<e.length;i++){var n=e.charCodeAt(i),s=n>>8,a=255&n;s?r.push(s,a):r.push(a)}return r},r.zero2=i,r.toHex=n,r.encode=function(e,t){return"hex"===t?n(e):e}}),utils_1$1=createCommonjsModule(function(e,t){var r=t;r.assert=minimalisticAssert,r.toArray=utils_1.toArray,r.zero2=utils_1.zero2,r.toHex=utils_1.toHex,r.encode=utils_1.encode,r.getNAF=function(e,t){for(var r=[],i=1<<t+1,n=e.clone();n.cmpn(1)>=0;){var s;if(n.isOdd()){var a=n.andln(i-1);s=a>(i>>1)-1?(i>>1)-a:a,n.isubn(s)}else s=0;r.push(s);for(var o=0!==n.cmpn(0)&&0===n.andln(i-1)?t+1:1,d=1;d<o;d++)r.push(0);n.iushrn(o)}return r},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i=0,n=0;e.cmpn(-i)>0||t.cmpn(-n)>0;){var s,a,o,d=e.andln(3)+i&3,f=t.andln(3)+n&3;3===d&&(d=-1),3===f&&(f=-1),s=0==(1&d)?0:3!=(o=e.andln(7)+i&7)&&5!==o||2!==f?d:-d,r[0].push(s),a=0==(1&f)?0:3!=(o=t.andln(7)+n&7)&&5!==o||2!==d?f:-f,r[1].push(a),2*i===s+1&&(i=1-i),2*n===a+1&&(n=1-n),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new bn(e,"hex","le")}}),brorand=function(e){return r||(r=new Rand(null)),r.generate(e)};function Rand(e){this.rand=e}var Rand_1=Rand;if(Rand.prototype.generate=function(e){return this._rand(e)},Rand.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto=require$$0;if("function"!=typeof crypto.randomBytes)throw new Error("Not supported");Rand.prototype._rand=function(e){return crypto.randomBytes(e)}}catch(e){}brorand.Rand=Rand_1;var utils$2=elliptic_1.utils,getNAF=utils$2.getNAF,getJSF=utils$2.getJSF,assert$1=utils$2.assert;function BaseCurve(e,t){this.type=e,this.p=new bn(t.p,16),this.red=t.prime?bn.red(t.prime):bn.mont(this.p),this.zero=new bn(0).toRed(this.red),this.one=new bn(1).toRed(this.red),this.two=new bn(2).toRed(this.red),this.n=t.n&&new bn(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base=BaseCurve;function BasePoint(e,t){this.curve=e,this.type=t,this.precomputed=null}BaseCurve.prototype.point=function(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function(e,t){assert$1(e.precomputed);var r=e._getDoubles(),i=getNAF(t,1),n=(1<<r.step+1)-(r.step%2==0?2:1);n/=3;for(var s=[],a=0;a<i.length;a+=r.step){var o=0;for(t=a+r.step-1;t>=a;t--)o=(o<<1)+i[t];s.push(o)}for(var d=this.jpoint(null,null,null),f=this.jpoint(null,null,null),c=n;c>0;c--){for(a=0;a<s.length;a++){(o=s[a])===c?f=f.mixedAdd(r.points[a]):o===-c&&(f=f.mixedAdd(r.points[a].neg()))}d=d.add(f)}return d.toP()},BaseCurve.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var n=i.points,s=getNAF(t,r),a=this.jpoint(null,null,null),o=s.length-1;o>=0;o--){for(t=0;o>=0&&0===s[o];o--)t++;if(o>=0&&t++,a=a.dblp(t),o<0)break;var d=s[o];assert$1(0!==d),a="affine"===e.type?d>0?a.mixedAdd(n[d-1>>1]):a.mixedAdd(n[-d-1>>1].neg()):d>0?a.add(n[d-1>>1]):a.add(n[-d-1>>1].neg())}return"affine"===e.type?a.toP():a},BaseCurve.prototype._wnafMulAdd=function(e,t,r,i,n){for(var s=this._wnafT1,a=this._wnafT2,o=this._wnafT3,d=0,f=0;f<i;f++){var c=(k=t[f])._getNAFPoints(e);s[f]=c.wnd,a[f]=c.points}for(f=i-1;f>=1;f-=2){var h=f-1,u=f;if(1===s[h]&&1===s[u]){var l=[t[h],null,null,t[u]];0===t[h].y.cmp(t[u].y)?(l[1]=t[h].add(t[u]),l[2]=t[h].toJ().mixedAdd(t[u].neg())):0===t[h].y.cmp(t[u].y.redNeg())?(l[1]=t[h].toJ().mixedAdd(t[u]),l[2]=t[h].add(t[u].neg())):(l[1]=t[h].toJ().mixedAdd(t[u]),l[2]=t[h].toJ().mixedAdd(t[u].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],p=getJSF(r[h],r[u]);d=Math.max(p[0].length,d),o[h]=new Array(d),o[u]=new Array(d);for(var m=0;m<d;m++){var g=0|p[0][m],y=0|p[1][m];o[h][m]=b[3*(g+1)+(y+1)],o[u][m]=0,a[h]=l}}else o[h]=getNAF(r[h],s[h]),o[u]=getNAF(r[u],s[u]),d=Math.max(o[h].length,d),d=Math.max(o[u].length,d)}var v=this.jpoint(null,null,null),_=this._wnafT4;for(f=d;f>=0;f--){for(var w=0;f>=0;){var S=!0;for(m=0;m<i;m++)_[m]=0|o[m][f],0!==_[m]&&(S=!1);if(!S)break;w++,f--}if(f>=0&&w++,v=v.dblp(w),f<0)break;for(m=0;m<i;m++){var k,M=_[m];0!==M&&(M>0?k=a[m][M-1>>1]:M<0&&(k=a[m][-M-1>>1].neg()),v="affine"===k.type?v.mixedAdd(k):v.add(k))}}for(f=0;f<i;f++)a[f]=null;return n?v:v.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function(){throw new Error("Not implemented")},BasePoint.prototype.validate=function(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function(e,t){e=utils$2.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?assert$1(e[e.length-1]%2==0):7===e[0]&&assert$1(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function(e){return this.encode(e,!0)},BasePoint.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},BasePoint.prototype.encode=function(e,t){return utils$2.encode(this._encode(t),e)},BasePoint.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},BasePoint.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},BasePoint.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var s=0;s<e;s++)i=i.dbl();r.push(i)}return{step:e,points:r}},BasePoint.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},BasePoint.prototype._getBeta=function(){return null},BasePoint.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var Base=curve_1.base,assert$2=elliptic_1.utils.assert;function ShortCurve(e){Base.call(this,"short",e),this.a=new bn(e.a,16).toRed(this.red),this.b=new bn(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve,Base);var short_1=ShortCurve;function Point(e,t,r,i){Base.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new bn(t,16),this.y=new bn(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(e,t,r,i){Base.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new bn(0)):(this.x=new bn(t,16),this.y=new bn(r,16),this.z=new bn(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ShortCurve.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new bn(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)r=new bn(e.lambda,16);else{var n=this._getEndoRoots(this.n);0===this.g.mul(n[0]).x.cmp(this.g.x.redMul(t))?r=n[0]:(r=n[1],assert$2(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new bn(e.a,16),b:new bn(e.b,16)}}):this._getEndoBasis(r)}}},ShortCurve.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:bn.mont(e),r=new bn(2).toRed(t).redInvm(),i=r.redNeg(),n=new bn(3).toRed(t).redNeg().redSqrt().redMul(r);return[i.redAdd(n).fromRed(),i.redSub(n).fromRed()]},ShortCurve.prototype._getEndoBasis=function(e){for(var t,r,i,n,s,a,o,d,f,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,u=this.n.clone(),l=new bn(1),b=new bn(0),p=new bn(0),m=new bn(1),g=0;0!==h.cmpn(0);){var y=u.div(h);d=u.sub(y.mul(h)),f=p.sub(y.mul(l));var v=m.sub(y.mul(b));if(!i&&d.cmp(c)<0)t=o.neg(),r=l,i=d.neg(),n=f;else if(i&&2==++g)break;o=d,u=h,h=d,p=l,l=f,m=b,b=v}s=d.neg(),a=f;var _=i.sqr().add(n.sqr());return s.sqr().add(a.sqr()).cmp(_)>=0&&(s=t,a=r),i.negative&&(i=i.neg(),n=n.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:i,b:n},{a:s,b:a}]},ShortCurve.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),a=n.mul(r.a),o=s.mul(i.a),d=n.mul(r.b),f=s.mul(i.b);return{k1:e.sub(a).sub(o),k2:d.add(f).neg()}},ShortCurve.prototype.pointFromX=function(e,t){(e=new bn(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var n=i.fromRed().isOdd();return(t&&!n||!t&&n)&&(i=i.redNeg()),this.point(e,i)},ShortCurve.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},ShortCurve.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,s=0;s<e.length;s++){var a=this._endoSplit(t[s]),o=e[s],d=o._getBeta();a.k1.negative&&(a.k1.ineg(),o=o.neg(!0)),a.k2.negative&&(a.k2.ineg(),d=d.neg(!0)),i[2*s]=o,i[2*s+1]=d,n[2*s]=a.k1,n[2*s+1]=a.k2}for(var f=this._wnafMulAdd(1,i,n,2*s,r),c=0;c<2*s;c++)i[c]=null,n[c]=null;return f},inherits_browser(Point,Base.BasePoint),ShortCurve.prototype.point=function(e,t,r){return new Point(this,e,t,r)},ShortCurve.prototype.pointFromJSON=function(e,t){return Point.fromJSON(this,e,t)},Point.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},Point.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(t){return e.point(t[0],t[1],r)}var s=t[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(n))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(n))}},i},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return this.inf},Point.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},Point.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),s=n.redSqr().redISub(this.x.redAdd(this.x)),a=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)},Point.prototype.getX=function(){return this.x.fromRed()},Point.prototype.getY=function(){return this.y.fromRed()},Point.prototype.mul=function(e){return e=new bn(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Point.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},Point.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},Point.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Point.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},Point.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},inherits_browser(JPoint,Base.BasePoint),ShortCurve.prototype.jpoint=function(e,t,r){return new JPoint(this,e,t,r)},JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),o=i.redSub(n),d=s.redSub(a);if(0===o.cmpn(0))return 0!==d.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var f=o.redSqr(),c=f.redMul(o),h=i.redMul(f),u=d.redSqr().redIAdd(c).redISub(h).redISub(h),l=d.redMul(h.redISub(u)).redISub(s.redMul(c)),b=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(u,l,b)},JPoint.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,s=e.y.redMul(t).redMul(this.z),a=r.redSub(i),o=n.redSub(s);if(0===a.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var d=a.redSqr(),f=d.redMul(a),c=r.redMul(d),h=o.redSqr().redIAdd(f).redISub(c).redISub(c),u=o.redMul(c.redISub(h)).redISub(n.redMul(f)),l=this.z.redMul(a);return this.curve.jpoint(h,u,l)},JPoint.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var i=this.curve.a,n=this.curve.tinv,s=this.x,a=this.y,o=this.z,d=o.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<e;r++){var c=s.redSqr(),h=f.redSqr(),u=h.redSqr(),l=c.redAdd(c).redIAdd(c).redIAdd(i.redMul(d)),b=s.redMul(h),p=l.redSqr().redISub(b.redAdd(b)),m=b.redISub(p),g=l.redMul(m);g=g.redIAdd(g).redISub(u);var y=f.redMul(o);r+1<e&&(d=d.redMul(u)),s=p,o=y,f=g}return this.curve.jpoint(s,f.redMul(n),o)},JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var o=i.redAdd(i).redIAdd(i),d=o.redSqr().redISub(a).redISub(a),f=s.redIAdd(s);f=(f=f.redIAdd(f)).redIAdd(f),e=d,t=o.redMul(a.redISub(d)).redISub(f),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),h=this.y.redSqr(),u=h.redSqr(),l=this.x.redAdd(h).redSqr().redISub(c).redISub(u);l=l.redIAdd(l);var b=c.redAdd(c).redIAdd(c),p=b.redSqr(),m=u.redIAdd(u);m=(m=m.redIAdd(m)).redIAdd(m),e=p.redISub(l).redISub(l),t=b.redMul(l.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},JPoint.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var o=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),d=o.redSqr().redISub(a).redISub(a);e=d;var f=s.redIAdd(s);f=(f=f.redIAdd(f)).redIAdd(f),t=o.redMul(a.redISub(d)).redISub(f),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),h=this.y.redSqr(),u=this.x.redMul(h),l=this.x.redSub(c).redMul(this.x.redAdd(c));l=l.redAdd(l).redIAdd(l);var b=u.redIAdd(u),p=(b=b.redIAdd(b)).redAdd(b);e=l.redSqr().redISub(p),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(c);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=l.redMul(b.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},JPoint.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),s=t.redSqr(),a=r.redSqr(),o=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(n)),d=t.redAdd(t),f=(d=d.redIAdd(d)).redMul(a),c=o.redSqr().redISub(f.redAdd(f)),h=f.redISub(c),u=a.redSqr();u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=o.redMul(h).redISub(u),b=r.redAdd(r).redMul(i);return this.curve.jpoint(c,l,b)},JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),s=n.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i),o=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(s)).redSqr(),d=i.redIAdd(i);d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=n.redIAdd(a).redSqr().redISub(s).redISub(o).redISub(d),c=t.redMul(f);c=(c=c.redIAdd(c)).redIAdd(c);var h=this.x.redMul(o).redISub(c);h=(h=h.redIAdd(h)).redIAdd(h);var u=this.y.redMul(f.redMul(d.redISub(f)).redISub(a.redMul(o)));u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=this.z.redAdd(a).redSqr().redISub(r).redISub(o);return this.curve.jpoint(h,u,l)},JPoint.prototype.mul=function(e,t){return e=new bn(e,t),this.curve._wnafMul(this,e)},JPoint.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},JPoint.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}return!1},JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Base$1=curve_1.base,utils$3=elliptic_1.utils;function MontCurve(e){Base$1.call(this,"mont",e),this.a=new bn(e.a,16).toRed(this.red),this.b=new bn(e.b,16).toRed(this.red),this.i4=new bn(4).toRed(this.red).redInvm(),this.two=new bn(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits_browser(MontCurve,Base$1);var mont=MontCurve;function Point$1(e,t,r){Base$1.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new bn(t,16),this.z=new bn(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}MontCurve.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},inherits_browser(Point$1,Base$1.BasePoint),MontCurve.prototype.decodePoint=function(e,t){return this.point(utils$3.toArray(e,t),1)},MontCurve.prototype.point=function(e,t){return new Point$1(this,e,t)},MontCurve.prototype.pointFromJSON=function(e){return Point$1.fromJSON(this,e)},Point$1.prototype.precompute=function(){},Point$1.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Point$1.fromJSON=function(e,t){return new Point$1(e,t[0],t[1]||e.one)},Point$1.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$1.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Point$1.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),n=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},Point$1.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Point$1.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=e.x.redAdd(e.z),s=e.x.redSub(e.z).redMul(r),a=n.redMul(i),o=t.z.redMul(s.redAdd(a).redSqr()),d=t.x.redMul(s.redISub(a).redSqr());return this.curve.point(o,d)},Point$1.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var s=n.length-1;s>=0;s--)0===n[s]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},Point$1.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$1.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$1.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},Point$1.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point$1.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Base$2=curve_1.base,assert$3=elliptic_1.utils.assert;function EdwardsCurve(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,Base$2.call(this,"edwards",e),this.a=new bn(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new bn(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new bn(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$3(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}inherits_browser(EdwardsCurve,Base$2);var edwards=EdwardsCurve;function Point$2(e,t,r,i,n){Base$2.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new bn(t,16),this.y=new bn(r,16),this.z=i?new bn(i,16):this.curve.one,this.t=n&&new bn(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}EdwardsCurve.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},EdwardsCurve.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},EdwardsCurve.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},EdwardsCurve.prototype.pointFromX=function(e,t){(e=new bn(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=this.c2.redSub(this.a.redMul(r)),n=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=i.redMul(n.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var o=a.fromRed().isOdd();return(t&&!o||!t&&o)&&(a=a.redNeg()),this.point(e,a)},EdwardsCurve.prototype.pointFromY=function(e,t){(e=new bn(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=r.redSub(this.one),n=r.redMul(this.d).redAdd(this.one),s=i.redMul(n.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},EdwardsCurve.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(n)},inherits_browser(Point$2,Base$2.BasePoint),EdwardsCurve.prototype.pointFromJSON=function(e){return Point$2.fromJSON(this,e)},EdwardsCurve.prototype.point=function(e,t,r,i){return new Point$2(this,e,t,r,i)},Point$2.fromJSON=function(e,t){return new Point$2(e,t[0],t[1],t[2])},Point$2.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$2.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},Point$2.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=i.redAdd(t),a=s.redSub(r),o=i.redSub(t),d=n.redMul(a),f=s.redMul(o),c=n.redMul(o),h=a.redMul(s);return this.curve.point(d,f,h,c)},Point$2.prototype._projDbl=function(){var e,t,r,i=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),s=this.y.redSqr();if(this.curve.twisted){var a=(f=this.curve._mulA(n)).redAdd(s);if(this.zOne)e=i.redSub(n).redSub(s).redMul(a.redSub(this.curve.two)),t=a.redMul(f.redSub(s)),r=a.redSqr().redSub(a).redSub(a);else{var o=this.z.redSqr(),d=a.redSub(o).redISub(o);e=i.redSub(n).redISub(s).redMul(d),t=a.redMul(f.redSub(s)),r=a.redMul(d)}}else{var f=n.redAdd(s);o=this.curve._mulC(this.c.redMul(this.z)).redSqr(),d=f.redSub(o).redSub(o);e=this.curve._mulC(i.redISub(f)).redMul(d),t=this.curve._mulC(f).redMul(n.redISub(s)),r=f.redMul(d)}return this.curve.point(e,t,r)},Point$2.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point$2.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),s=r.redSub(t),a=n.redSub(i),o=n.redAdd(i),d=r.redAdd(t),f=s.redMul(a),c=o.redMul(d),h=s.redMul(d),u=a.redMul(o);return this.curve.point(f,c,u,h)},Point$2.prototype._projAdd=function(e){var t,r,i=this.z.redMul(e.z),n=i.redSqr(),s=this.x.redMul(e.x),a=this.y.redMul(e.y),o=this.curve.d.redMul(s).redMul(a),d=n.redSub(o),f=n.redAdd(o),c=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(a),h=i.redMul(d).redMul(c);return this.curve.twisted?(t=i.redMul(f).redMul(a.redSub(this.curve._mulA(s))),r=d.redMul(f)):(t=i.redMul(f).redMul(a.redSub(s)),r=this.curve._mulC(d).redMul(f)),this.curve.point(h,t,r)},Point$2.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},Point$2.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},Point$2.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},Point$2.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},Point$2.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},Point$2.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point$2.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Point$2.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Point$2.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},Point$2.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}return!1},Point$2.prototype.toP=Point$2.prototype.normalize,Point$2.prototype.mixedAdd=Point$2.prototype.add;var curve_1=createCommonjsModule(function(e,t){var r=t;r.base=base,r.short=short_1,r.mont=mont,r.edwards=edwards}),inherits_1=inherits_browser;function toArray(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var i=0;i<e.length;i++){var n=e.charCodeAt(i),s=n>>8,a=255&n;s?r.push(s,a):r.push(a)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r}var toArray_1=toArray;function toHex(e){for(var t="",r=0;r<e.length;r++)t+=zero2(e[r].toString(16));return t}var toHex_1=toHex;function htonl(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}var htonl_1=htonl;function toHex32(e,t){for(var r="",i=0;i<e.length;i++){var n=e[i];"little"===t&&(n=htonl(n)),r+=zero8(n.toString(16))}return r}var toHex32_1=toHex32;function zero2(e){return 1===e.length?"0"+e:e}var zero2_1=zero2;function zero8(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}var zero8_1=zero8;function join32(e,t,r,i){var n=r-t;minimalisticAssert(n%4==0);for(var s=new Array(n/4),a=0,o=t;a<s.length;a++,o+=4){var d;d="big"===i?e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3]:e[o+3]<<24|e[o+2]<<16|e[o+1]<<8|e[o],s[a]=d>>>0}return s}var join32_1=join32;function split32(e,t){for(var r=new Array(4*e.length),i=0,n=0;i<e.length;i++,n+=4){var s=e[i];"big"===t?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=255&s):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=255&s)}return r}var split32_1=split32;function rotr32(e,t){return e>>>t|e<<32-t}var rotr32_1=rotr32;function rotl32(e,t){return e<<t|e>>>32-t}var rotl32_1=rotl32;function sum32(e,t){return e+t>>>0}var sum32_1=sum32;function sum32_3(e,t,r){return e+t+r>>>0}var sum32_3_1=sum32_3;function sum32_4(e,t,r,i){return e+t+r+i>>>0}var sum32_4_1=sum32_4;function sum32_5(e,t,r,i,n){return e+t+r+i+n>>>0}var sum32_5_1=sum32_5;function sum64(e,t,r,i){var n=e[t],s=i+e[t+1]>>>0,a=(s<i?1:0)+r+n;e[t]=a>>>0,e[t+1]=s}var sum64_1=sum64;function sum64_hi(e,t,r,i){return(t+i>>>0<t?1:0)+e+r>>>0}var sum64_hi_1=sum64_hi;function sum64_lo(e,t,r,i){return t+i>>>0}var sum64_lo_1=sum64_lo;function sum64_4_hi(e,t,r,i,n,s,a,o){var d=0,f=t;return d+=(f=f+i>>>0)<t?1:0,d+=(f=f+s>>>0)<s?1:0,e+r+n+a+(d+=(f=f+o>>>0)<o?1:0)>>>0}var sum64_4_hi_1=sum64_4_hi;function sum64_4_lo(e,t,r,i,n,s,a,o){return t+i+s+o>>>0}var sum64_4_lo_1=sum64_4_lo;function sum64_5_hi(e,t,r,i,n,s,a,o,d,f){var c=0,h=t;return c+=(h=h+i>>>0)<t?1:0,c+=(h=h+s>>>0)<s?1:0,c+=(h=h+o>>>0)<o?1:0,e+r+n+a+d+(c+=(h=h+f>>>0)<f?1:0)>>>0}var sum64_5_hi_1=sum64_5_hi;function sum64_5_lo(e,t,r,i,n,s,a,o,d,f){return t+i+s+o+f>>>0}var sum64_5_lo_1=sum64_5_lo;function rotr64_hi(e,t,r){return(t<<32-r|e>>>r)>>>0}var rotr64_hi_1=rotr64_hi;function rotr64_lo(e,t,r){return(e<<32-r|t>>>r)>>>0}var rotr64_lo_1=rotr64_lo;function shr64_hi(e,t,r){return e>>>r}var shr64_hi_1=shr64_hi;function shr64_lo(e,t,r){return(e<<32-r|t>>>r)>>>0}var shr64_lo_1=shr64_lo,utils$4={inherits:inherits_1,toArray:toArray_1,toHex:toHex_1,htonl:htonl_1,toHex32:toHex32_1,zero2:zero2_1,zero8:zero8_1,join32:join32_1,split32:split32_1,rotr32:rotr32_1,rotl32:rotl32_1,sum32:sum32_1,sum32_3:sum32_3_1,sum32_4:sum32_4_1,sum32_5:sum32_5_1,sum64:sum64_1,sum64_hi:sum64_hi_1,sum64_lo:sum64_lo_1,sum64_4_hi:sum64_4_hi_1,sum64_4_lo:sum64_4_lo_1,sum64_5_hi:sum64_5_hi_1,sum64_5_lo:sum64_5_lo_1,rotr64_hi:rotr64_hi_1,rotr64_lo:rotr64_lo_1,shr64_hi:shr64_hi_1,shr64_lo:shr64_lo_1};function BlockHash(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var BlockHash_1=BlockHash;BlockHash.prototype.update=function(e,t){if(e=utils$4.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=utils$4.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},BlockHash.prototype.digest=function(e){return this.update(this._pad()),minimalisticAssert(null===this.pending),this._digest(e)},BlockHash.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var n=1;n<r;n++)i[n]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=e>>>24&255,i[n++]=e>>>16&255,i[n++]=e>>>8&255,i[n++]=255&e}else for(i[n++]=255&e,i[n++]=e>>>8&255,i[n++]=e>>>16&255,i[n++]=e>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,s=8;s<this.padLength;s++)i[n++]=0;return i};var common={BlockHash:BlockHash_1},rotr32$1=utils$4.rotr32;function ft_1(e,t,r,i){return 0===e?ch32(t,r,i):1===e||3===e?p32(t,r,i):2===e?maj32(t,r,i):void 0}var ft_1_1=ft_1;function ch32(e,t,r){return e&t^~e&r}var ch32_1=ch32;function maj32(e,t,r){return e&t^e&r^t&r}var maj32_1=maj32;function p32(e,t,r){return e^t^r}var p32_1=p32;function s0_256(e){return rotr32$1(e,2)^rotr32$1(e,13)^rotr32$1(e,22)}var s0_256_1=s0_256;function s1_256(e){return rotr32$1(e,6)^rotr32$1(e,11)^rotr32$1(e,25)}var s1_256_1=s1_256;function g0_256(e){return rotr32$1(e,7)^rotr32$1(e,18)^e>>>3}var g0_256_1=g0_256;function g1_256(e){return rotr32$1(e,17)^rotr32$1(e,19)^e>>>10}var g1_256_1=g1_256,common$1={ft_1:ft_1_1,ch32:ch32_1,maj32:maj32_1,p32:p32_1,s0_256:s0_256_1,s1_256:s1_256_1,g0_256:g0_256_1,g1_256:g1_256_1},rotl32$1=utils$4.rotl32,sum32$1=utils$4.sum32,sum32_5$1=utils$4.sum32_5,ft_1$1=common$1.ft_1,BlockHash$1=common.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$1.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$4.inherits(SHA1,BlockHash$1);var _1=SHA1;SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=rotl32$1(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var n=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],d=this.h[4];for(i=0;i<r.length;i++){var f=~~(i/20),c=sum32_5$1(rotl32$1(n,5),ft_1$1(f,s,a,o),d,r[i],sha1_K[f]);d=o,o=a,a=rotl32$1(s,30),s=n,n=c}this.h[0]=sum32$1(this.h[0],n),this.h[1]=sum32$1(this.h[1],s),this.h[2]=sum32$1(this.h[2],a),this.h[3]=sum32$1(this.h[3],o),this.h[4]=sum32$1(this.h[4],d)},SHA1.prototype._digest=function(e){return"hex"===e?utils$4.toHex32(this.h,"big"):utils$4.split32(this.h,"big")};var sum32$2=utils$4.sum32,sum32_4$1=utils$4.sum32_4,sum32_5$2=utils$4.sum32_5,ch32$1=common$1.ch32,maj32$1=common$1.maj32,s0_256$1=common$1.s0_256,s1_256$1=common$1.s1_256,g0_256$1=common$1.g0_256,g1_256$1=common$1.g1_256,BlockHash$2=common.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256(){if(!(this instanceof SHA256))return new SHA256;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$4.inherits(SHA256,BlockHash$2);var _256=SHA256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;_256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}SHA256.blockSize=512,SHA256.outSize=256,SHA256.hmacStrength=192,SHA256.padLength=64,SHA256.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=sum32_4$1(g1_256$1(r[i-2]),r[i-7],g0_256$1(r[i-15]),r[i-16]);var n=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],d=this.h[4],f=this.h[5],c=this.h[6],h=this.h[7];for(minimalisticAssert(this.k.length===r.length),i=0;i<r.length;i++){var u=sum32_5$2(h,s1_256$1(d),ch32$1(d,f,c),this.k[i],r[i]),l=sum32$2(s0_256$1(n),maj32$1(n,s,a));h=c,c=f,f=d,d=sum32$2(o,u),o=a,a=s,s=n,n=sum32$2(u,l)}this.h[0]=sum32$2(this.h[0],n),this.h[1]=sum32$2(this.h[1],s),this.h[2]=sum32$2(this.h[2],a),this.h[3]=sum32$2(this.h[3],o),this.h[4]=sum32$2(this.h[4],d),this.h[5]=sum32$2(this.h[5],f),this.h[6]=sum32$2(this.h[6],c),this.h[7]=sum32$2(this.h[7],h)},SHA256.prototype._digest=function(e){return"hex"===e?utils$4.toHex32(this.h,"big"):utils$4.split32(this.h,"big")},utils$4.inherits(SHA224,_256);var _224=SHA224;SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function(e){return"hex"===e?utils$4.toHex32(this.h.slice(0,7),"big"):utils$4.split32(this.h.slice(0,7),"big")};var rotr64_hi$1=utils$4.rotr64_hi,rotr64_lo$1=utils$4.rotr64_lo,shr64_hi$1=utils$4.shr64_hi,shr64_lo$1=utils$4.shr64_lo,sum64$1=utils$4.sum64,sum64_hi$1=utils$4.sum64_hi,sum64_lo$1=utils$4.sum64_lo,sum64_4_hi$1=utils$4.sum64_4_hi,sum64_4_lo$1=utils$4.sum64_4_lo,sum64_5_hi$1=utils$4.sum64_5_hi,sum64_5_lo$1=utils$4.sum64_5_lo,BlockHash$3=common.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512(){if(!(this instanceof SHA512))return new SHA512;BlockHash$3.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$4.inherits(SHA512,BlockHash$3);var _512=SHA512;function ch64_hi(e,t,r,i,n){var s=e&r^~e&n;return s<0&&(s+=4294967296),s}function ch64_lo(e,t,r,i,n,s){var a=t&i^~t&s;return a<0&&(a+=4294967296),a}function maj64_hi(e,t,r,i,n){var s=e&r^e&n^r&n;return s<0&&(s+=4294967296),s}function maj64_lo(e,t,r,i,n,s){var a=t&i^t&s^i&s;return a<0&&(a+=4294967296),a}function s0_512_hi(e,t){var r=rotr64_hi$1(e,t,28)^rotr64_hi$1(t,e,2)^rotr64_hi$1(t,e,7);return r<0&&(r+=4294967296),r}function s0_512_lo(e,t){var r=rotr64_lo$1(e,t,28)^rotr64_lo$1(t,e,2)^rotr64_lo$1(t,e,7);return r<0&&(r+=4294967296),r}function s1_512_hi(e,t){var r=rotr64_hi$1(e,t,14)^rotr64_hi$1(e,t,18)^rotr64_hi$1(t,e,9);return r<0&&(r+=4294967296),r}function s1_512_lo(e,t){var r=rotr64_lo$1(e,t,14)^rotr64_lo$1(e,t,18)^rotr64_lo$1(t,e,9);return r<0&&(r+=4294967296),r}function g0_512_hi(e,t){var r=rotr64_hi$1(e,t,1)^rotr64_hi$1(e,t,8)^shr64_hi$1(e,t,7);return r<0&&(r+=4294967296),r}function g0_512_lo(e,t){var r=rotr64_lo$1(e,t,1)^rotr64_lo$1(e,t,8)^shr64_lo$1(e,t,7);return r<0&&(r+=4294967296),r}function g1_512_hi(e,t){var r=rotr64_hi$1(e,t,19)^rotr64_hi$1(t,e,29)^shr64_hi$1(e,t,6);return r<0&&(r+=4294967296),r}function g1_512_lo(e,t){var r=rotr64_lo$1(e,t,19)^rotr64_lo$1(t,e,29)^shr64_lo$1(e,t,6);return r<0&&(r+=4294967296),r}function SHA384(){if(!(this instanceof SHA384))return new SHA384;_512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}SHA512.blockSize=1024,SHA512.outSize=512,SHA512.hmacStrength=192,SHA512.padLength=128,SHA512.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var n=g1_512_hi(r[i-4],r[i-3]),s=g1_512_lo(r[i-4],r[i-3]),a=r[i-14],o=r[i-13],d=g0_512_hi(r[i-30],r[i-29]),f=g0_512_lo(r[i-30],r[i-29]),c=r[i-32],h=r[i-31];r[i]=sum64_4_hi$1(n,s,a,o,d,f,c,h),r[i+1]=sum64_4_lo$1(n,s,a,o,d,f,c,h)}},SHA512.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],n=this.h[1],s=this.h[2],a=this.h[3],o=this.h[4],d=this.h[5],f=this.h[6],c=this.h[7],h=this.h[8],u=this.h[9],l=this.h[10],b=this.h[11],p=this.h[12],m=this.h[13],g=this.h[14],y=this.h[15];minimalisticAssert(this.k.length===r.length);for(var v=0;v<r.length;v+=2){var _=g,w=y,S=s1_512_hi(h,u),k=s1_512_lo(h,u),M=ch64_hi(h,u,l,b,p,m),x=ch64_lo(h,u,l,b,p,m),A=this.k[v],$=this.k[v+1],E=r[v],B=r[v+1],I=sum64_5_hi$1(_,w,S,k,M,x,A,$,E,B),P=sum64_5_lo$1(_,w,S,k,M,x,A,$,E,B);_=s0_512_hi(i,n),w=s0_512_lo(i,n),S=maj64_hi(i,n,s,a,o,d),k=maj64_lo(i,n,s,a,o,d);var R=sum64_hi$1(_,w,S,k),O=sum64_lo$1(_,w,S,k);g=p,y=m,p=l,m=b,l=h,b=u,h=sum64_hi$1(f,c,I,P),u=sum64_lo$1(c,c,I,P),f=o,c=d,o=s,d=a,s=i,a=n,i=sum64_hi$1(I,P,R,O),n=sum64_lo$1(I,P,R,O)}sum64$1(this.h,0,i,n),sum64$1(this.h,2,s,a),sum64$1(this.h,4,o,d),sum64$1(this.h,6,f,c),sum64$1(this.h,8,h,u),sum64$1(this.h,10,l,b),sum64$1(this.h,12,p,m),sum64$1(this.h,14,g,y)},SHA512.prototype._digest=function(e){return"hex"===e?utils$4.toHex32(this.h,"big"):utils$4.split32(this.h,"big")},utils$4.inherits(SHA384,_512);var _384=SHA384;SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function(e){return"hex"===e?utils$4.toHex32(this.h.slice(0,12),"big"):utils$4.split32(this.h.slice(0,12),"big")};var sha1=_1,sha224=_224,sha256=_256,sha384=_384,sha512=_512,sha={sha1:sha1,sha224:sha224,sha256:sha256,sha384:sha384,sha512:sha512},rotl32$2=utils$4.rotl32,sum32$3=utils$4.sum32,sum32_3$1=utils$4.sum32_3,sum32_4$2=utils$4.sum32_4,BlockHash$4=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash$4.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$4.inherits(RIPEMD160,BlockHash$4);var ripemd160=RIPEMD160;function f(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function K(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Kh(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],n=this.h[2],a=this.h[3],o=this.h[4],d=r,c=i,h=n,u=a,l=o,b=0;b<80;b++){var p=sum32$3(rotl32$2(sum32_4$2(r,f(b,i,n,a),e[r$1[b]+t],K(b)),s[b]),o);r=o,o=a,a=rotl32$2(n,10),n=i,i=p,p=sum32$3(rotl32$2(sum32_4$2(d,f(79-b,c,h,u),e[rh[b]+t],Kh(b)),sh[b]),l),d=l,l=u,u=rotl32$2(h,10),h=c,c=p}p=sum32_3$1(this.h[1],n,u),this.h[1]=sum32_3$1(this.h[2],a,l),this.h[2]=sum32_3$1(this.h[3],o,d),this.h[3]=sum32_3$1(this.h[4],r,c),this.h[4]=sum32_3$1(this.h[0],i,h),this.h[0]=p},RIPEMD160.prototype._digest=function(e){return"hex"===e?utils$4.toHex32(this.h,"little"):utils$4.split32(this.h,"little")};var r$1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],ripemd={ripemd160:ripemd160};function Hmac(e,t,r){if(!(this instanceof Hmac))return new Hmac(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(utils$4.toArray(t,r))}var hmac=Hmac;Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),minimalisticAssert(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},Hmac.prototype.update=function(e,t){return this.inner.update(e,t),this},Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};var hash_1=createCommonjsModule(function(e,t){var r=t;r.utils=utils$4,r.common=common,r.sha=sha,r.ripemd=ripemd,r.hmac=hmac,r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160}),secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},curves_1=createCommonjsModule(function(e,t){var r,i=t,n=elliptic_1.utils.assert;function s(e){"short"===e.type?this.curve=new elliptic_1.curve.short(e):"edwards"===e.type?this.curve=new elliptic_1.curve.edwards(e):this.curve=new elliptic_1.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new s(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=s,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash_1.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash_1.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash_1.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash_1.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash_1.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=secp256k1}catch(e){r=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash_1.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function HmacDRBG(e){if(!(this instanceof HmacDRBG))return new HmacDRBG(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=utils_1.toArray(e.entropy,e.entropyEnc||"hex"),r=utils_1.toArray(e.nonce,e.nonceEnc||"hex"),i=utils_1.toArray(e.pers,e.persEnc||"hex");minimalisticAssert(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function(){return new hash_1.hmac(this.hash,this.K)},HmacDRBG.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function(e,t,r,i){"string"!=typeof t&&(i=r,r=t,t=null),e=utils_1.toArray(e,t),r=utils_1.toArray(r,i),minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},HmacDRBG.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=r,r=t,t=null),r&&(r=utils_1.toArray(r,i||"hex"),this._update(r));for(var n=[];n.length<e;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var s=n.slice(0,e);return this._update(r),this._reseed++,utils_1.encode(s,t)};var utils$5=elliptic_1.utils,assert$4=utils$5.assert;function KeyPair(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var key=KeyPair;KeyPair.fromPublic=function(e,t,r){return t instanceof KeyPair?t:new KeyPair(e,{pub:t,pubEnc:r})},KeyPair.fromPrivate=function(e,t,r){return t instanceof KeyPair?t:new KeyPair(e,{priv:t,privEnc:r})},KeyPair.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},KeyPair.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function(e,t){this.priv=new bn(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?assert$4(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||assert$4(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},KeyPair.prototype.derive=function(e){return e.mul(this.priv).getX()},KeyPair.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},KeyPair.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},KeyPair.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var utils$6=elliptic_1.utils,assert$5=utils$6.assert;function Signature(e,t){if(e instanceof Signature)return e;this._importDER(e,t)||(assert$5(e.r&&e.s,"Signature without r or s"),this.r=new bn(e.r,16),this.s=new bn(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var signature=Signature;function Position(){this.place=0}function getLength(e,t){var r=e[t.place++];if(!(128&r))return r;for(var i=15&r,n=0,s=0,a=t.place;s<i;s++,a++)n<<=8,n|=e[a];return t.place=a,n}function rmPadding(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function constructLength(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Signature.prototype._importDER=function(e,t){e=utils$6.toArray(e,t);var r=new Position;if(48!==e[r.place++])return!1;if(getLength(e,r)+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=getLength(e,r),n=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var s=getLength(e,r);if(e.length!==s+r.place)return!1;var a=e.slice(r.place,s+r.place);return 0===n[0]&&128&n[1]&&(n=n.slice(1)),0===a[0]&&128&a[1]&&(a=a.slice(1)),this.r=new bn(n),this.s=new bn(a),this.recoveryParam=null,!0},Signature.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=rmPadding(t),r=rmPadding(r);!(r[0]||128&r[1]);)r=r.slice(1);var i=[2];constructLength(i,t.length),(i=i.concat(t)).push(2),constructLength(i,r.length);var n=i.concat(r),s=[48];return constructLength(s,n.length),s=s.concat(n),utils$6.encode(s,e)};var utils$7=elliptic_1.utils,assert$6=utils$7.assert;function EC(e){if(!(this instanceof EC))return new EC(e);"string"==typeof e&&(assert$6(elliptic_1.curves.hasOwnProperty(e),"Unknown curve "+e),e=elliptic_1.curves[e]),e instanceof elliptic_1.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var ec=EC;EC.prototype.keyPair=function(e){return new key(this,e)},EC.prototype.keyFromPrivate=function(e,t){return key.fromPrivate(this,e,t)},EC.prototype.keyFromPublic=function(e,t){return key.fromPublic(this,e,t)},EC.prototype.genKeyPair=function(e){e||(e={});for(var t=new hmacDrbg({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||elliptic_1.rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new bn(2));;){var n=new bn(t.generate(r));if(!(n.cmp(i)>0))return n.iaddn(1),this.keyFromPrivate(n)}},EC.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},EC.prototype.sign=function(e,t,r,i){"object"==typeof r&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new bn(e,16));for(var n=this.n.byteLength(),s=t.getPrivate().toArray("be",n),a=e.toArray("be",n),o=new hmacDrbg({hash:this.hash,entropy:s,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),d=this.n.sub(new bn(1)),f=0;;f++){var c=i.k?i.k(f):new bn(o.generate(this.n.byteLength()));if(!((c=this._truncateToN(c,!0)).cmpn(1)<=0||c.cmp(d)>=0)){var h=this.g.mul(c);if(!h.isInfinity()){var u=h.getX(),l=u.umod(this.n);if(0!==l.cmpn(0)){var b=c.invm(this.n).mul(l.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var p=(h.getY().isOdd()?1:0)|(0!==u.cmp(l)?2:0);return i.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),p^=1),new signature({r:l,s:b,recoveryParam:p})}}}}}},EC.prototype.verify=function(e,t,r,i){e=this._truncateToN(new bn(e,16)),r=this.keyFromPublic(r,i);var n=(t=new signature(t,"hex")).r,s=t.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,o=s.invm(this.n),d=o.mul(e).umod(this.n),f=o.mul(n).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(d,r.getPublic(),f)).isInfinity()&&a.eqXToP(n):!(a=this.g.mulAdd(d,r.getPublic(),f)).isInfinity()&&0===a.getX().umod(this.n).cmp(n)},EC.prototype.recoverPubKey=function(e,t,r,i){assert$6((3&r)===r,"The recovery param is more than two bits"),t=new signature(t,i);var n=this.n,s=new bn(e),a=t.r,o=t.s,d=1&r,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");a=f?this.curve.pointFromX(a.add(this.curve.n),d):this.curve.pointFromX(a,d);var c=t.r.invm(n),h=n.sub(s).mul(c).umod(n),u=o.mul(c).umod(n);return this.g.mulAdd(h,a,u)},EC.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new signature(t,i)).recoveryParam)return t.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(e,t,n)}catch(e){continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var utils$8=elliptic_1.utils,assert$7=utils$8.assert,parseBytes=utils$8.parseBytes,cachedProperty=utils$8.cachedProperty;function KeyPair$1(e,t){this.eddsa=e,this._secret=parseBytes(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=parseBytes(t.pub)}KeyPair$1.fromPublic=function(e,t){return t instanceof KeyPair$1?t:new KeyPair$1(e,{pub:t})},KeyPair$1.fromSecret=function(e,t){return t instanceof KeyPair$1?t:new KeyPair$1(e,{secret:t})},KeyPair$1.prototype.secret=function(){return this._secret},cachedProperty(KeyPair$1,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),cachedProperty(KeyPair$1,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),cachedProperty(KeyPair$1,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i}),cachedProperty(KeyPair$1,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),cachedProperty(KeyPair$1,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),cachedProperty(KeyPair$1,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),KeyPair$1.prototype.sign=function(e){return assert$7(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},KeyPair$1.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},KeyPair$1.prototype.getSecret=function(e){return assert$7(this._secret,"KeyPair is public only"),utils$8.encode(this.secret(),e)},KeyPair$1.prototype.getPublic=function(e){return utils$8.encode(this.pubBytes(),e)};var key$1=KeyPair$1,utils$9=elliptic_1.utils,assert$8=utils$9.assert,cachedProperty$1=utils$9.cachedProperty,parseBytes$1=utils$9.parseBytes;function Signature$1(e,t){this.eddsa=e,"object"!=typeof t&&(t=parseBytes$1(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),assert$8(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof bn&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}cachedProperty$1(Signature$1,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),cachedProperty$1(Signature$1,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),cachedProperty$1(Signature$1,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),cachedProperty$1(Signature$1,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),Signature$1.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Signature$1.prototype.toHex=function(){return utils$9.encode(this.toBytes(),"hex").toUpperCase()};var signature$1=Signature$1,utils$a=elliptic_1.utils,assert$9=utils$a.assert,parseBytes$2=utils$a.parseBytes;function EDDSA(e){if(assert$9("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(e);e=elliptic_1.curves[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=hash_1.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function(e,t){e=parseBytes$2(e);var r=this.keyFromSecret(t),i=this.hashInt(r.messagePrefix(),e),n=this.g.mul(i),s=this.encodePoint(n),a=this.hashInt(s,r.pubBytes(),e).mul(r.priv()),o=i.add(a).umod(this.curve.n);return this.makeSignature({R:n,S:o,Rencoded:s})},EDDSA.prototype.verify=function(e,t,r){e=parseBytes$2(e),t=this.makeSignature(t);var i=this.keyFromPublic(r),n=this.hashInt(t.Rencoded(),i.pubBytes(),e),s=this.g.mul(t.S());return t.R().add(i.pub().mul(n)).eq(s)},EDDSA.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return utils$a.intFromLE(e.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function(e){return key$1.fromPublic(this,e)},EDDSA.prototype.keyFromSecret=function(e){return key$1.fromSecret(this,e)},EDDSA.prototype.makeSignature=function(e){return e instanceof signature$1?e:new signature$1(this,e)},EDDSA.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},EDDSA.prototype.decodePoint=function(e){var t=(e=utils$a.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),i=0!=(128&e[t]),n=utils$a.intFromLE(r);return this.curve.pointFromY(n,i)},EDDSA.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},EDDSA.prototype.decodeInt=function(e){return utils$a.intFromLE(e)},EDDSA.prototype.isPoint=function(e){return e instanceof this.pointClass};var require$$0$1=_package$1&&_package||_package$1,elliptic_1=createCommonjsModule(function(e,t){var r=t;r.version=require$$0$1.version,r.utils=utils_1$1,r.rand=brorand,r.curve=curve_1,r.curves=curves_1,r.ec=ec,r.eddsa=eddsa});const EC$1=elliptic_1.ec,ec$1=new EC$1("secp256k1");class Keystore{constructor(e){this._storage=e}createKey(e){const t=ec$1.genKeyPair(),r=t.getPublic("hex"),i=t.getPrivate("hex");return this._storage.setItem(e,JSON.stringify({publicKey:r,privateKey:i})),t}getKey(e){let t=JSON.parse(this._storage.getItem(e));if(!t)return;return ec$1.keyPair({pub:t.publicKey,priv:t.privateKey,privEnc:"hex",pubEnc:"hex"})}generateKey(){return Promise.resolve(ec$1.genKeyPair())}exportPublicKey(e){return Promise.resolve(e.getPublic("hex"))}exportPrivateKey(e){return Promise.resolve(e.getPrivate("hex"))}importPublicKey(e){return Promise.resolve(ec$1.keyFromPublic(e,"hex"))}importPrivateKey(e){return Promise.resolve(ec$1.keyFromPrivate(e,"hex"))}sign(e,t){const r=ec$1.sign(t,e);return Promise.resolve(r.toDER("hex"))}verify(e,t,r){let i=!1;return i=ec$1.verify(r,e,t),Promise.resolve(i)}}var keystore=(e,t)=>({create:(r="./keystore")=>{t&&t.sync&&t.sync(r);const i=e?new e(r):localStorage;return new Keystore(i)}}),indexBrowser$1=keystore();class AccessController{constructor(){this._access={admin:[],write:[],read:[]}}async load(e){}async save(){}get admin(){return this._access.admin}get write(){return this._access.write.concat(this._access.admin)}get read(){return this._access.read}add(e,t){switch(e){case"admin":this._access.admin.push(t);break;case"write":this._access.write.push(t);break;case"read":this._access.read.push(t)}}remove(e,t){const r=(e,r)=>{return e.reduce((e,r)=>(r!==t&&e.push(r),e),[])};switch(e){case"admin":this._access.admin=r(this._access.admin);break;case"write":this._access.write=r(this._access.write);break;case"read":this._access.read=r(this._access.read)}}}var accessController=AccessController;class IPFSAccessController extends accessController{constructor(e){super(),this._ipfs=e}async load(e){0===e.indexOf("/ipfs")&&(e=e.split("/")[2]);try{const t=await this._ipfs.object.get(e),r=JSON.parse(t.toJSON().data);this._access=r}catch(e){console.log("ACCESS ERROR:",e)}}async save(){let e;try{const t=JSON.stringify(this._access,null,2);e=(await this._ipfs.object.put(new Buffer(t))).toJSON().multihash.toString()}catch(e){console.log("ACCESS ERROR:",e)}return e}}var ipfsAccessController=IPFSAccessController,Buffer$4=safeBuffer.Buffer,baseX=function(e){for(var t={},r=e.length,i=e.charAt(0),n=0;n<e.length;n++){var s=e.charAt(n);if(void 0!==t[s])throw new TypeError(s+" is ambiguous");t[s]=n}function a(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return Buffer$4.allocUnsafe(0);for(var n=[0],s=0;s<e.length;s++){var a=t[e[s]];if(void 0===a)return;for(var o=0,d=a;o<n.length;++o)d+=n[o]*r,n[o]=255&d,d>>=8;for(;d>0;)n.push(255&d),d>>=8}for(var f=0;e[f]===i&&f<e.length-1;++f)n.push(0);return Buffer$4.from(n.reverse())}return{encode:function(t){if(0===t.length)return"";for(var n=[0],s=0;s<t.length;++s){for(var a=0,o=t[s];a<n.length;++a)o+=n[a]<<8,n[a]=o%r,o=o/r|0;for(;o>0;)n.push(o%r),o=o/r|0}for(var d="",f=0;0===t[f]&&f<t.length-1;++f)d+=i;for(var c=n.length-1;c>=0;--c)d+=e[n[c]];return d},decodeUnsafe:a,decode:function(e){var t=a(e);if(t)return t;throw new Error("Non-base"+r+" character")}}},ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58=baseX(ALPHABET),names$1=Object.freeze({sha1:17,"sha2-256":18,"sha2-512":19,"dbl-sha2-256":86,"sha3-224":23,"sha3-256":22,"sha3-384":21,"sha3-512":20,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,"murmur3-128":34,"murmur3-32":35,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"Skein256-8":45825,"Skein256-16":45826,"Skein256-24":45827,"Skein256-32":45828,"Skein256-40":45829,"Skein256-48":45830,"Skein256-56":45831,"Skein256-64":45832,"Skein256-72":45833,"Skein256-80":45834,"Skein256-88":45835,"Skein256-96":45836,"Skein256-104":45837,"Skein256-112":45838,"Skein256-120":45839,"Skein256-128":45840,"Skein256-136":45841,"Skein256-144":45842,"Skein256-152":45843,"Skein256-160":45844,"Skein256-168":45845,"Skein256-176":45846,"Skein256-184":45847,"Skein256-192":45848,"Skein256-200":45849,"Skein256-208":45850,"Skein256-216":45851,"Skein256-224":45852,"Skein256-232":45853,"Skein256-240":45854,"Skein256-248":45855,"Skein256-256":45856,"Skein512-8":45857,"Skein512-16":45858,"Skein512-24":45859,"Skein512-32":45860,"Skein512-40":45861,"Skein512-48":45862,"Skein512-56":45863,"Skein512-64":45864,"Skein512-72":45865,"Skein512-80":45866,"Skein512-88":45867,"Skein512-96":45868,"Skein512-104":45869,"Skein512-112":45870,"Skein512-120":45871,"Skein512-128":45872,"Skein512-136":45873,"Skein512-144":45874,"Skein512-152":45875,"Skein512-160":45876,"Skein512-168":45877,"Skein512-176":45878,"Skein512-184":45879,"Skein512-192":45880,"Skein512-200":45881,"Skein512-208":45882,"Skein512-216":45883,"Skein512-224":45884,"Skein512-232":45885,"Skein512-240":45886,"Skein512-248":45887,"Skein512-256":45888,"Skein512-264":45889,"Skein512-272":45890,"Skein512-280":45891,"Skein512-288":45892,"Skein512-296":45893,"Skein512-304":45894,"Skein512-312":45895,"Skein512-320":45896,"Skein512-328":45897,"Skein512-336":45898,"Skein512-344":45899,"Skein512-352":45900,"Skein512-360":45901,"Skein512-368":45902,"Skein512-376":45903,"Skein512-384":45904,"Skein512-392":45905,"Skein512-400":45906,"Skein512-408":45907,"Skein512-416":45908,"Skein512-424":45909,"Skein512-432":45910,"Skein512-440":45911,"Skein512-448":45912,"Skein512-456":45913,"Skein512-464":45914,"Skein512-472":45915,"Skein512-480":45916,"Skein512-488":45917,"Skein512-496":45918,"Skein512-504":45919,"Skein512-512":45920,"Skein1024-8":45921,"Skein1024-16":45922,"Skein1024-24":45923,"Skein1024-32":45924,"Skein1024-40":45925,"Skein1024-48":45926,"Skein1024-56":45927,"Skein1024-64":45928,"Skein1024-72":45929,"Skein1024-80":45930,"Skein1024-88":45931,"Skein1024-96":45932,"Skein1024-104":45933,"Skein1024-112":45934,"Skein1024-120":45935,"Skein1024-128":45936,"Skein1024-136":45937,"Skein1024-144":45938,"Skein1024-152":45939,"Skein1024-160":45940,"Skein1024-168":45941,"Skein1024-176":45942,"Skein1024-184":45943,"Skein1024-192":45944,"Skein1024-200":45945,"Skein1024-208":45946,"Skein1024-216":45947,"Skein1024-224":45948,"Skein1024-232":45949,"Skein1024-240":45950,"Skein1024-248":45951,"Skein1024-256":45952,"Skein1024-264":45953,"Skein1024-272":45954,"Skein1024-280":45955,"Skein1024-288":45956,"Skein1024-296":45957,"Skein1024-304":45958,"Skein1024-312":45959,"Skein1024-320":45960,"Skein1024-328":45961,"Skein1024-336":45962,"Skein1024-344":45963,"Skein1024-352":45964,"Skein1024-360":45965,"Skein1024-368":45966,"Skein1024-376":45967,"Skein1024-384":45968,"Skein1024-392":45969,"Skein1024-400":45970,"Skein1024-408":45971,"Skein1024-416":45972,"Skein1024-424":45973,"Skein1024-432":45974,"Skein1024-440":45975,"Skein1024-448":45976,"Skein1024-456":45977,"Skein1024-464":45978,"Skein1024-472":45979,"Skein1024-480":45980,"Skein1024-488":45981,"Skein1024-496":45982,"Skein1024-504":45983,"Skein1024-512":45984,"Skein1024-520":45985,"Skein1024-528":45986,"Skein1024-536":45987,"Skein1024-544":45988,"Skein1024-552":45989,"Skein1024-560":45990,"Skein1024-568":45991,"Skein1024-576":45992,"Skein1024-584":45993,"Skein1024-592":45994,"Skein1024-600":45995,"Skein1024-608":45996,"Skein1024-616":45997,"Skein1024-624":45998,"Skein1024-632":45999,"Skein1024-640":46e3,"Skein1024-648":46001,"Skein1024-656":46002,"Skein1024-664":46003,"Skein1024-672":46004,"Skein1024-680":46005,"Skein1024-688":46006,"Skein1024-696":46007,"Skein1024-704":46008,"Skein1024-712":46009,"Skein1024-720":46010,"Skein1024-728":46011,"Skein1024-736":46012,"Skein1024-744":46013,"Skein1024-752":46014,"Skein1024-760":46015,"Skein1024-768":46016,"Skein1024-776":46017,"Skein1024-784":46018,"Skein1024-792":46019,"Skein1024-800":46020,"Skein1024-808":46021,"Skein1024-816":46022,"Skein1024-824":46023,"Skein1024-832":46024,"Skein1024-840":46025,"Skein1024-848":46026,"Skein1024-856":46027,"Skein1024-864":46028,"Skein1024-872":46029,"Skein1024-880":46030,"Skein1024-888":46031,"Skein1024-896":46032,"Skein1024-904":46033,"Skein1024-912":46034,"Skein1024-920":46035,"Skein1024-928":46036,"Skein1024-936":46037,"Skein1024-944":46038,"Skein1024-952":46039,"Skein1024-960":46040,"Skein1024-968":46041,"Skein1024-976":46042,"Skein1024-984":46043,"Skein1024-992":46044,"Skein1024-1000":46045,"Skein1024-1008":46046,"Skein1024-1016":46047,"Skein1024-1024":46048}),codes=Object.freeze({17:"sha1",18:"sha2-256",19:"sha2-512",86:"dbl-sha2-256",23:"sha3-224",22:"sha3-256",21:"sha3-384",20:"sha3-512",24:"shake-128",25:"shake-256",26:"keccak-224",27:"keccak-256",28:"keccak-384",29:"keccak-512",34:"murmur3-128",35:"murmur3-32",45569:"blake2b-8",45570:"blake2b-16",45571:"blake2b-24",45572:"blake2b-32",45573:"blake2b-40",45574:"blake2b-48",45575:"blake2b-56",45576:"blake2b-64",45577:"blake2b-72",45578:"blake2b-80",45579:"blake2b-88",45580:"blake2b-96",45581:"blake2b-104",45582:"blake2b-112",45583:"blake2b-120",45584:"blake2b-128",45585:"blake2b-136",45586:"blake2b-144",45587:"blake2b-152",45588:"blake2b-160",45589:"blake2b-168",45590:"blake2b-176",45591:"blake2b-184",45592:"blake2b-192",45593:"blake2b-200",45594:"blake2b-208",45595:"blake2b-216",45596:"blake2b-224",45597:"blake2b-232",45598:"blake2b-240",45599:"blake2b-248",45600:"blake2b-256",45601:"blake2b-264",45602:"blake2b-272",45603:"blake2b-280",45604:"blake2b-288",45605:"blake2b-296",45606:"blake2b-304",45607:"blake2b-312",45608:"blake2b-320",45609:"blake2b-328",45610:"blake2b-336",45611:"blake2b-344",45612:"blake2b-352",45613:"blake2b-360",45614:"blake2b-368",45615:"blake2b-376",45616:"blake2b-384",45617:"blake2b-392",45618:"blake2b-400",45619:"blake2b-408",45620:"blake2b-416",45621:"blake2b-424",45622:"blake2b-432",45623:"blake2b-440",45624:"blake2b-448",45625:"blake2b-456",45626:"blake2b-464",45627:"blake2b-472",45628:"blake2b-480",45629:"blake2b-488",45630:"blake2b-496",45631:"blake2b-504",45632:"blake2b-512",45633:"blake2s-8",45634:"blake2s-16",45635:"blake2s-24",45636:"blake2s-32",45637:"blake2s-40",45638:"blake2s-48",45639:"blake2s-56",45640:"blake2s-64",45641:"blake2s-72",45642:"blake2s-80",45643:"blake2s-88",45644:"blake2s-96",45645:"blake2s-104",45646:"blake2s-112",45647:"blake2s-120",45648:"blake2s-128",45649:"blake2s-136",45650:"blake2s-144",45651:"blake2s-152",45652:"blake2s-160",45653:"blake2s-168",45654:"blake2s-176",45655:"blake2s-184",45656:"blake2s-192",45657:"blake2s-200",45658:"blake2s-208",45659:"blake2s-216",45660:"blake2s-224",45661:"blake2s-232",45662:"blake2s-240",45663:"blake2s-248",45664:"blake2s-256",45825:"Skein256-8",45826:"Skein256-16",45827:"Skein256-24",45828:"Skein256-32",45829:"Skein256-40",45830:"Skein256-48",45831:"Skein256-56",45832:"Skein256-64",45833:"Skein256-72",45834:"Skein256-80",45835:"Skein256-88",45836:"Skein256-96",45837:"Skein256-104",45838:"Skein256-112",45839:"Skein256-120",45840:"Skein256-128",45841:"Skein256-136",45842:"Skein256-144",45843:"Skein256-152",45844:"Skein256-160",45845:"Skein256-168",45846:"Skein256-176",45847:"Skein256-184",45848:"Skein256-192",45849:"Skein256-200",45850:"Skein256-208",45851:"Skein256-216",45852:"Skein256-224",45853:"Skein256-232",45854:"Skein256-240",45855:"Skein256-248",45856:"Skein256-256",45857:"Skein512-8",45858:"Skein512-16",45859:"Skein512-24",45860:"Skein512-32",45861:"Skein512-40",45862:"Skein512-48",45863:"Skein512-56",45864:"Skein512-64",45865:"Skein512-72",45866:"Skein512-80",45867:"Skein512-88",45868:"Skein512-96",45869:"Skein512-104",45870:"Skein512-112",45871:"Skein512-120",45872:"Skein512-128",45873:"Skein512-136",45874:"Skein512-144",45875:"Skein512-152",45876:"Skein512-160",45877:"Skein512-168",45878:"Skein512-176",45879:"Skein512-184",45880:"Skein512-192",45881:"Skein512-200",45882:"Skein512-208",45883:"Skein512-216",45884:"Skein512-224",45885:"Skein512-232",45886:"Skein512-240",45887:"Skein512-248",45888:"Skein512-256",45889:"Skein512-264",45890:"Skein512-272",45891:"Skein512-280",45892:"Skein512-288",45893:"Skein512-296",45894:"Skein512-304",45895:"Skein512-312",45896:"Skein512-320",45897:"Skein512-328",45898:"Skein512-336",45899:"Skein512-344",45900:"Skein512-352",45901:"Skein512-360",45902:"Skein512-368",45903:"Skein512-376",45904:"Skein512-384",45905:"Skein512-392",45906:"Skein512-400",45907:"Skein512-408",45908:"Skein512-416",45909:"Skein512-424",45910:"Skein512-432",45911:"Skein512-440",45912:"Skein512-448",45913:"Skein512-456",45914:"Skein512-464",45915:"Skein512-472",45916:"Skein512-480",45917:"Skein512-488",45918:"Skein512-496",45919:"Skein512-504",45920:"Skein512-512",45921:"Skein1024-8",45922:"Skein1024-16",45923:"Skein1024-24",45924:"Skein1024-32",45925:"Skein1024-40",45926:"Skein1024-48",45927:"Skein1024-56",45928:"Skein1024-64",45929:"Skein1024-72",45930:"Skein1024-80",45931:"Skein1024-88",45932:"Skein1024-96",45933:"Skein1024-104",45934:"Skein1024-112",45935:"Skein1024-120",45936:"Skein1024-128",45937:"Skein1024-136",45938:"Skein1024-144",45939:"Skein1024-152",45940:"Skein1024-160",45941:"Skein1024-168",45942:"Skein1024-176",45943:"Skein1024-184",45944:"Skein1024-192",45945:"Skein1024-200",45946:"Skein1024-208",45947:"Skein1024-216",45948:"Skein1024-224",45949:"Skein1024-232",45950:"Skein1024-240",45951:"Skein1024-248",45952:"Skein1024-256",45953:"Skein1024-264",45954:"Skein1024-272",45955:"Skein1024-280",45956:"Skein1024-288",45957:"Skein1024-296",45958:"Skein1024-304",45959:"Skein1024-312",45960:"Skein1024-320",45961:"Skein1024-328",45962:"Skein1024-336",45963:"Skein1024-344",45964:"Skein1024-352",45965:"Skein1024-360",45966:"Skein1024-368",45967:"Skein1024-376",45968:"Skein1024-384",45969:"Skein1024-392",45970:"Skein1024-400",45971:"Skein1024-408",45972:"Skein1024-416",45973:"Skein1024-424",45974:"Skein1024-432",45975:"Skein1024-440",45976:"Skein1024-448",45977:"Skein1024-456",45978:"Skein1024-464",45979:"Skein1024-472",45980:"Skein1024-480",45981:"Skein1024-488",45982:"Skein1024-496",45983:"Skein1024-504",45984:"Skein1024-512",45985:"Skein1024-520",45986:"Skein1024-528",45987:"Skein1024-536",45988:"Skein1024-544",45989:"Skein1024-552",45990:"Skein1024-560",45991:"Skein1024-568",45992:"Skein1024-576",45993:"Skein1024-584",45994:"Skein1024-592",45995:"Skein1024-600",45996:"Skein1024-608",45997:"Skein1024-616",45998:"Skein1024-624",45999:"Skein1024-632",46000:"Skein1024-640",46001:"Skein1024-648",46002:"Skein1024-656",46003:"Skein1024-664",46004:"Skein1024-672",46005:"Skein1024-680",46006:"Skein1024-688",46007:"Skein1024-696",46008:"Skein1024-704",46009:"Skein1024-712",46010:"Skein1024-720",46011:"Skein1024-728",46012:"Skein1024-736",46013:"Skein1024-744",46014:"Skein1024-752",46015:"Skein1024-760",46016:"Skein1024-768",46017:"Skein1024-776",46018:"Skein1024-784",46019:"Skein1024-792",46020:"Skein1024-800",46021:"Skein1024-808",46022:"Skein1024-816",46023:"Skein1024-824",46024:"Skein1024-832",46025:"Skein1024-840",46026:"Skein1024-848",46027:"Skein1024-856",46028:"Skein1024-864",46029:"Skein1024-872",46030:"Skein1024-880",46031:"Skein1024-888",46032:"Skein1024-896",46033:"Skein1024-904",46034:"Skein1024-912",46035:"Skein1024-920",46036:"Skein1024-928",46037:"Skein1024-936",46038:"Skein1024-944",46039:"Skein1024-952",46040:"Skein1024-960",46041:"Skein1024-968",46042:"Skein1024-976",46043:"Skein1024-984",46044:"Skein1024-992",46045:"Skein1024-1000",46046:"Skein1024-1008",46047:"Skein1024-1016",46048:"Skein1024-1024"}),defaultLengths=Object.freeze({17:20,18:32,19:64,86:32,23:28,22:32,21:48,20:64,24:32,25:64,26:28,27:32,28:48,29:64,34:32,45569:1,45570:2,45571:3,45572:4,45573:5,45574:6,45575:7,45576:8,45577:9,45578:10,45579:11,45580:12,45581:13,45582:14,45583:15,45584:16,45585:17,45586:18,45587:19,45588:20,45589:21,45590:22,45591:23,45592:24,45593:25,45594:26,45595:27,45596:28,45597:29,45598:30,45599:31,45600:32,45601:33,45602:34,45603:35,45604:36,45605:37,45606:38,45607:39,45608:40,45609:41,45610:42,45611:43,45612:44,45613:45,45614:46,45615:47,45616:48,45617:49,45618:50,45619:51,45620:52,45621:53,45622:54,45623:55,45624:56,45625:57,45626:58,45627:59,45628:60,45629:61,45630:62,45631:63,45632:64,45633:1,45634:2,45635:3,45636:4,45637:5,45638:6,45639:7,45640:8,45641:9,45642:10,45643:11,45644:12,45645:13,45646:14,45647:15,45648:16,45649:17,45650:18,45651:19,45652:20,45653:21,45654:22,45655:23,45656:24,45657:25,45658:26,45659:27,45660:28,45661:29,45662:30,45663:31,45664:32,45825:1,45826:2,45827:3,45828:4,45829:5,45830:6,45831:7,45832:8,45833:9,45834:10,45835:11,45836:12,45837:13,45838:14,45839:15,45840:16,45841:17,45842:18,45843:19,45844:20,45845:21,45846:22,45847:23,45848:24,45849:25,45850:26,45851:27,45852:28,45853:29,45854:30,45855:31,45856:32,45857:1,45858:2,45859:3,45860:4,45861:5,45862:6,45863:7,45864:8,45865:9,45866:10,45867:11,45868:12,45869:13,45870:14,45871:15,45872:16,45873:17,45874:18,45875:19,45876:20,45877:21,45878:22,45879:23,45880:24,45881:25,45882:26,45883:27,45884:28,45885:29,45886:30,45887:31,45888:32,45889:33,45890:34,45891:35,45892:36,45893:37,45894:38,45895:39,45896:40,45897:41,45898:42,45899:43,45900:44,45901:45,45902:46,45903:47,45904:48,45905:49,45906:50,45907:51,45908:52,45909:53,45910:54,45911:55,45912:56,45913:57,45914:58,45915:59,45916:60,45917:61,45918:62,45919:63,45920:64,45921:1,45922:2,45923:3,45924:4,45925:5,45926:6,45927:7,45928:8,45929:9,45930:10,45931:11,45932:12,45933:13,45934:14,45935:15,45936:16,45937:17,45938:18,45939:19,45940:20,45941:21,45942:22,45943:23,45944:24,45945:25,45946:26,45947:27,45948:28,45949:29,45950:30,45951:31,45952:32,45953:33,45954:34,45955:35,45956:36,45957:37,45958:38,45959:39,45960:40,45961:41,45962:42,45963:43,45964:44,45965:45,45966:46,45967:47,45968:48,45969:49,45970:50,45971:51,45972:52,45973:53,45974:54,45975:55,45976:56,45977:57,45978:58,45979:59,45980:60,45981:61,45982:62,45983:63,45984:64,45985:65,45986:66,45987:67,45988:68,45989:69,45990:70,45991:71,45992:72,45993:73,45994:74,45995:75,45996:76,45997:77,45998:78,45999:79,46000:80,46001:81,46002:82,46003:83,46004:84,46005:85,46006:86,46007:87,46008:88,46009:89,46010:90,46011:91,46012:92,46013:93,46014:94,46015:95,46016:96,46017:97,46018:98,46019:99,46020:100,46021:101,46022:102,46023:103,46024:104,46025:105,46026:106,46027:107,46028:108,46029:109,46030:110,46031:111,46032:112,46033:113,46034:114,46035:115,46036:116,46037:117,46038:118,46039:119,46040:120,46041:121,46042:122,46043:123,46044:124,46045:125,46046:126,46047:127,46048:128}),constants={names:names$1,codes:codes,defaultLengths:defaultLengths},encode_1=encode,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode(e,t,r){t=t||[];for(var i=r=r||0;e>=INT;)t[r++]=255&e|MSB,e/=128;for(;e&MSBALL;)t[r++]=255&e|MSB,e>>>=7;return t[r]=0|e,encode.bytes=r-i+1,t}var decode=read,MSB$1=128,REST$1=127;function read(e,t){var r,i=0,n=0,s=t=t||0,a=e.length;do{if(s>=a)throw read.bytes=0,new RangeError("Could not decode varint");r=e[s++],i+=n<28?(r&REST$1)<<n:(r&REST$1)*Math.pow(2,n),n+=7}while(r>=MSB$1);return read.bytes=s-t,i}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(e){return e<N1?1:e<N2?2:e<N3?3:e<N4?4:e<N5?5:e<N6?6:e<N7?7:e<N8?8:e<N9?9:10},varint={encode:encode_1,decode:decode,encodingLength:length},src$1=createCommonjsModule(function(e,t){function r(e){t.decode(e)}t.names=constants.names,t.codes=constants.codes,t.defaultLengths=constants.defaultLengths,t.toHexString=function(e){if(!Buffer.isBuffer(e))throw new Error("must be passed a buffer");return e.toString("hex")},t.fromHexString=function(e){return Buffer.from(e,"hex")},t.toB58String=function(e){if(!Buffer.isBuffer(e))throw new Error("must be passed a buffer");return bs58.encode(e)},t.fromB58String=function(e){let t=e;return Buffer.isBuffer(e)&&(t=e.toString()),Buffer.from(bs58.decode(t))},t.decode=function(e){if(!Buffer.isBuffer(e))throw new Error("multihash must be a Buffer");if(e.length<3)throw new Error("multihash too short. must be > 3 bytes.");let r=varint.decode(e);if(!t.isValidCode(r))throw new Error(`multihash unknown function code: 0x${r.toString(16)}`);e=e.slice(varint.decode.bytes);let i=varint.decode(e);if(i<1)throw new Error(`multihash invalid length: 0x${i.toString(16)}`);if((e=e.slice(varint.decode.bytes)).length!==i)throw new Error(`multihash length inconsistent: 0x${e.toString("hex")}`);return{code:r,name:constants.codes[r],length:i,digest:e}},t.encode=function(e,r,i){if(!e||!r)throw new Error("multihash encode requires at least two args: digest, code");const n=t.coerceCode(r);if(!Buffer.isBuffer(e))throw new Error("digest should be a Buffer");if(null==i&&(i=e.length),i&&e.length!==i)throw new Error("digest length should be equal to specified length.");return Buffer.concat([Buffer.from(varint.encode(n)),Buffer.from(varint.encode(i)),e])},t.coerceCode=function(e){let r=e;if("string"==typeof e){if(!constants.names[e])throw new Error(`Unrecognized hash function named: ${e}`);r=constants.names[e]}if("number"!=typeof r)throw new Error(`Hash function code should be a number. Got: ${r}`);if(!constants.codes[r]&&!t.isAppCode(r))throw new Error(`Unrecognized function code: ${r}`);return r},t.isAppCode=function(e){return e>0&&e<16},t.isValidCode=function(e){return!!t.isAppCode(e)||!!constants.codes[e]},t.validate=r,t.prefix=function(e){return r(e),e.slice(0,2)}}),src_1$1=src$1.names,src_2$1=src$1.codes,src_3$1=src$1.defaultLengths,src_4$1=src$1.toHexString,src_5$1=src$1.fromHexString,src_6$1=src$1.toB58String,src_7$1=src$1.fromB58String,src_8=src$1.decode,src_9=src$1.encode,src_10=src$1.coerceCode,src_11=src$1.isAppCode,src_12=src$1.isValidCode,src_13=src$1.validate,src_14=src$1.prefix;class OrbitDBAddress{constructor(e,t){this.root=e,this.path=t}toString(){return path.join("/orbitdb",this.root,this.path)}static isValid(e){const t=e.toString().split("/").filter((t,r)=>!((0===r||1===r)&&0===e.toString().indexOf("/orbit")&&"orbitdb"===t)).filter(e=>""!==e&&" "!==e),r=t[0].indexOf("Qm")>-1?src$1.fromB58String(t[0]):null;try{src$1.validate(r)}catch(e){return!1}return null!==r}static parse(e){if(!e)throw new Error(`Not a valid OrbitDB address: ${e}`);if(!OrbitDBAddress.isValid(e))throw new Error(`Not a valid OrbitDB address: ${e}`);const t=e.toString().split("/").filter((t,r)=>!((0===r||1===r)&&0===e.toString().indexOf("/orbit")&&"orbitdb"===t)).filter(e=>""!==e&&" "!==e);return new OrbitDBAddress(t[0],t.slice(1,t.length).join("/"))}}var orbitDbAddress=OrbitDBAddress;const createDBManifest=async(e,t,r,i)=>{const n={name:t,type:r,accessController:path.join("/ipfs",i)};return(await e.object.put(Buffer.from(JSON.stringify(n)))).toJSON().multihash.toString()};var dbManifest=createDBManifest,protocol="ipfs-pubsub-direct-channel/v1";const Buffer$5=safeBuffer.Buffer;var encoding=e=>{let t=e;return Buffer$5.isBuffer(t)||(t=Buffer$5.from(t)),t};const waitForPeers=async(e,t,r)=>{const i=async()=>{const i=await e.pubsub.peers(r);return 0===t.map(e=>i.includes(e)).filter(e=>!1===e).length};return await i()?Promise.resolve():new Promise(async(e,t)=>{const r=setInterval(async()=>{try{await i()&&(clearInterval(r),e())}catch(e){t(e)}},100)})};var waitForPeers_1=waitForPeers;const getPeerID=async e=>{return(await e.id()).id};var getPeerId=getPeerID;class DirectChannel extends events{constructor(e,t){if(super(),this._ipfs=e,!e.pubsub)throw new Error("This IPFS node does not support pubsub.");if(this._receiverID=t,!this._receiverID)throw new Error("Receiver ID was undefined")}get id(){return this._id}get peers(){return this._peers}async connect(){await waitForPeers_1(this._ipfs,[this._receiverID],this._id)}async send(e){let t=encoding(e);await this._ipfs.pubsub.publish(this._id,t)}close(){this.removeAllListeners("message"),this._ipfs.pubsub.unsubscribe(this._id,this._messageHandler)}async _setup(){this._senderID=await getPeerId(this._ipfs),this._peers=Array.from([this._senderID,this._receiverID]).sort(),this._id=path.join("/",protocol,this._peers.join("/")),this._messageHandler=(e=>{e&&e.from===this._receiverID&&this.emit("message",e)})}async _openChannel(){await this._setup(),await this._ipfs.pubsub.subscribe(this._id,this._messageHandler)}static async open(e,t){const r=new DirectChannel(e,t);return await r._openChannel(),r}}var directChannel=DirectChannel;const logger$4=src.create("exchange-heads",{color:src.Colors.Yellow});src.setLogLevel("ERROR");const getHeadsForDatabase=e=>e&&e._oplog?e._oplog.heads:[],exchangeHeads=async(e,t,r,i,n,s,a)=>{const o=e=>{const t=JSON.parse(e.data),{address:r,heads:i}=t;s(r,i)};let d=n(r);if(!d)try{logger$4.debug(`Create a channel to ${r}`),(d=await directChannel.open(e,r)).on("message",o),logger$4.debug(`Channel created to ${r}`),a(d)}catch(e){logger$4.error(e)}await d.connect(),logger$4.debug(`Connected to ${r}`);const f=getHeadsForDatabase(i(t));return logger$4.debug(`Send latest heads of '${t}':\n`,JSON.stringify(f.map(e=>e.hash),null,2)),f&&d.send(JSON.stringify({address:t,heads:f})),d};var exchangeHeads_1=exchangeHeads;const logger$5=src.create("orbit-db");src.setLogLevel("ERROR");let databaseTypes={counter:CounterStore_1,eventlog:EventStore_1,feed:FeedStore_1,docstore:DocumentStore_1,keyvalue:KeyValueStore_1};class OrbitDB{constructor(e,t,r={}){this._ipfs=e,this.id=r.peerId||(this._ipfs._peerInfo?this._ipfs._peerInfo.id._idB58String:"default"),this._pubsub=r&&r.broker?new r.broker(this._ipfs):new orbitDbPubsub(this._ipfs,this.id),this.stores={},this.directory=t||"./orbitdb",this.keystore=r.keystore||indexBrowser$1.create(path.join(this.directory,this.id,"/keystore")),this.key=this.keystore.getKey(this.id)||this.keystore.createKey(this.id),this._directConnections={}}async feed(e,t={}){return t=Object.assign({create:!0,type:"feed"},t),this.open(e,t)}async log(e,t){return t=Object.assign({create:!0,type:"eventlog"},t),this.open(e,t)}async eventlog(e,t={}){return this.log(e,t)}async keyvalue(e,t){return t=Object.assign({create:!0,type:"keyvalue"},t),this.open(e,t)}async kvstore(e,t){return this.keyvalue(e,t)}async counter(e,t={}){return t=Object.assign({create:!0,type:"counter"},t),this.open(e,t)}async docs(e,t={}){return t=Object.assign({create:!0,type:"docstore"},t),this.open(e,t)}async docstore(e,t={}){return this.docs(e,t)}async disconnect(){const e=Object.values(this.stores);for(let t of e)await t.close(),delete this.stores[t.address.toString()];Object.keys(this._directConnections).forEach(e=>{this._directConnections[e].close(),delete this._directConnections[e]}),this._pubsub&&await this._pubsub.disconnect(),this.stores={}}async stop(){await this.disconnect()}async _createStore(e,t,r){const i=databaseTypes[e];if(!i)throw new Error(`Invalid database type '${e}'`);let n;r.accessControllerAddress&&(n=new ipfsAccessController(this._ipfs),await n.load(r.accessControllerAddress));const s=await this._loadCache(this.directory,t),a=Object.assign({replicate:!0},r,{accessController:n,keystore:this.keystore,cache:s,onClose:this._onClose.bind(this)}),o=new i(this._ipfs,this.id,t,a);o.events.on("write",this._onWrite.bind(this));const d=t.toString();return this.stores[d]=o,a.replicate&&this._pubsub&&this._pubsub.subscribe(d,this._onMessage.bind(this),this._onPeerConnected.bind(this)),o}_onWrite(e,t,r){if(!r)throw new Error("'heads' not defined");this._pubsub&&this._pubsub.publish(e,r)}async _onMessage(e,t){const r=this.stores[e];try{logger$5.debug(`Received ${t.length} heads for '${e}':\n`,JSON.stringify(t.map(e=>e.hash),null,2)),r&&t&&t.length>0&&await r.sync(t)}catch(e){logger$5.error(e)}}async _onPeerConnected(e,t){logger$5.debug(`New peer '${t}' connected to '${e}'`);const r=e=>this.stores[e];await exchangeHeads_1(this._ipfs,e,t,r,e=>this._directConnections[e],(e,t)=>this._onMessage(e,t),e=>this._directConnections[e._receiverID]=e);r(e)&&r(e).events.emit("peer",t)}async _onClose(e){logger$5.debug(`Close ${e}`),this._pubsub&&await this._pubsub.unsubscribe(e),delete this.stores[e]}async create(e,t,r={}){if(logger$5.debug("create()"),!OrbitDB.isValidType(t))throw new Error(`Invalid database type '${t}'`);const i=r.directory||this.directory;if(logger$5.debug(`Creating database '${e}' as ${t} in '${i}'`),orbitDbAddress.isValid(e))throw new Error("Given database name is an address. Please give only the name of the database!");const n=new ipfsAccessController(this._ipfs);r&&r.write&&r.write.length>0?r.write.forEach(e=>n.add("write",e)):n.add("write",this.key.getPublic("hex"));const s=await n.save(),a=await dbManifest(this._ipfs,e,t,s),o=orbitDbAddress.parse(path.join("/orbitdb",a,e));if(await this._loadCache(i,o).then(e=>e?e.get(path.join(o.toString(),"_manifest")):null).then(e=>null!=e)&&!r.overwrite)throw new Error(`Database '${o}' already exists!`);return await this._saveDBManifest(i,o),logger$5.debug(`Created database '${o}'`),this.open(o,r)}async open(e,t={}){logger$5.debug("open()"),t=Object.assign({localOnly:!1,create:!1},t),logger$5.debug(`Open database '${e}'`);const r=t.directory||this.directory;if(logger$5.debug(`Look from '${r}'`),!orbitDbAddress.isValid(e)){if(t.create){if(t.create&&!t.type)throw new Error(`Database type not provided! Provide a type with 'options.type' (${OrbitDB.databaseTypes.join("|")})`);return logger$5.warn(`Not a valid OrbitDB address '${e}', creating the database`),t.overwrite=!t.overwrite||t.overwrite,this.create(e,t.type,t)}throw new Error("'options.create' set to 'false'. If you want to create a database, set 'options.create' to 'true'.")}const i=orbitDbAddress.parse(e),n=await this._loadCache(r,i).then(e=>e?e.get(path.join(i.toString(),"_manifest")):null).then(e=>null!=e);if(logger$5.debug((n?"Found":"Didn't find")+` database '${i}'`),t.localOnly&&!n)throw logger$5.warn(`Database '${i}' doesn't exist!`),new Error(`Database '${i}' doesn't exist!`);logger$5.debug(`Loading Manifest for '${i}'`);const s=await this._ipfs.object.get(i.root),a=JSON.parse(s.toJSON().data);if(logger$5.debug(`Manifest for '${i}':\n${JSON.stringify(a,null,2)}`),t.type&&a.type!==t.type)throw new Error(`Database '${i}' is type '${a.type}' but was opened as '${t.type}'`);return await this._saveDBManifest(r,i),t=Object.assign({},t,{accessControllerAddress:a.accessController}),this._createStore(a.type,i,t)}async _saveDBManifest(e,t){const r=await this._loadCache(e,t);await r.set(path.join(t.toString(),"_manifest"),t.root),logger$5.debug(`Saved manifest to IPFS as '${t.root}'`)}async _loadCache(e,t){let r;try{r=await indexBrowser.load(e,t)}catch(e){console.log(e),logger$5.error("Couldn't load Cache:",e)}return r}static get databaseTypes(){return Object.keys(databaseTypes)}static isValidType(e){return Object.keys(databaseTypes).includes(e)}static addDatabaseType(e,t){if(databaseTypes[e])throw new Error(`Type already exists: ${e}`);databaseTypes[e]=t}static getDatabaseTypes(){return databaseTypes}static isValidAddress(e){return orbitDbAddress.isValid(e)}static parseAddress(e){return orbitDbAddress.parse(e)}}var OrbitDB_1=OrbitDB,OrbitDB$1=Object.freeze({default:OrbitDB_1,__moduleExports:OrbitDB_1});if("production"!==process.env.NODE_ENV&&("undefined"==typeof self||!self.crypto&&!self.msCrypto))throw new Error("Your browser does not have secure random generator. If you don’t need unpredictable IDs, you can use nanoid/non-secure.");var crypto$1=self.crypto||self.msCrypto,url="_~getRandomVcryp0123456789bfhijklqsuvwxzABCDEFGHIJKLMNOPQSTUWXYZ",index_browser=function(e){e=e||21;for(var t="",r=crypto$1.getRandomValues(new Uint8Array(e));0<e--;)t+=url[63&r[e]];return t};function generateId(){return index_browser()}function copy(e){return JSON.parse(JSON.stringify(e))}var asyncToGenerator=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function i(n,s){try{var a=t[n](s),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},MaplicateNode=function(e){function t(e,r){classCallCheck(this,t);var i=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.ready=!1,i._featureHash={},new OrbitDB$1(e).docstore(r).then(function(e){return i.store=e,i.store.events.on("replicate.progress",i._handleProgress),i.store.events.on("load.progress",i._handleProgress),e.load()}).then(function(){i.emit("ready"),i.ready=!0}),i}return inherits(t,eventemitter3),createClass(t,[{key:"add",value:function(){var e=asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{disableEvent:!1};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ready){e.next=2;break}throw new Error("map not ready");case 2:return(r=copy(t)).properties||(r.properties={}),r._id||(r._id=generateId()),e.next=7,this.store.put(r);case 7:return i=e.sent,this._featureHash[copy._id]=i,n.disableEvent||this.emit("featureAdded",r),e.abrupt("return",r._id);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var i,n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableEvent:!1};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ready){e.next=2;break}throw new Error("map not ready");case 2:if(this._featureHash[t]){e.next=4;break}throw new Error("feature not exists");case 4:return(i=copy(r)).properties||(i.properties={}),i._id=t,e.next=9,this.store.put(i);case 9:n=e.sent,this._featureHash[i._id]=n,s.disableEvent||this.emit("featureUpdated",i);case 12:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{disableEvent:!1};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ready){e.next=2;break}throw new Error("map not ready");case 2:if(this._featureHash[t]){e.next=4;break}return e.abrupt("return");case 4:return r=void 0,i.disableEvent||(r=this.store.get(t).map(function(e){return e.payload.value})[0]),e.next=8,this.store.del(t);case 8:i.disableEvent||this.emit("featureRemoved",r);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.store){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.store.close();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"drop",value:function(){var e=asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.store){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.store.drop();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_handleProgress",value:function(e,t,r){var i=r.payload.key,n=copy(r.payload.value);n?this._featureHash[i]?this._featureHash[i]!==t&&this.emit("featureUpdated",n):this.emit("featureAdded",n):this.emit("featureRemoved",{_id:i}),this._featureHash[i]=t}},{key:"mapAddress",get:function(){if(this.ready)return this.store.address}}]),t}();exports.MaplicateNode=MaplicateNode;
